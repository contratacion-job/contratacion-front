"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[510],{5170:(O,f,p)=>{p.d(f,{d:()=>b});var h=p(2096),m=p(2246),t=p(9212);let b=(()=>{class g{constructor(){this.contratos=[],this.expired=[],this.contratos=m.Io||[],this.expired=m.y2||[],console.log("Contratos inicializados:",this.contratos)}getContratos(){return(0,h.of)([...this.contratos])}getExpiredContratos(){return(0,h.of)([...this.expired])}createContrato(n){const d={...n,id:this.contratos.length+this.expired.length+1,departamento:n.departamento||m.iy[0],estado:n.estado||"Activo"};return this.contratos.push(d),(0,h.of)(d)}updateContrato(n,d){const l=this.contratos.findIndex(v=>v.id===n);if(-1!==l)return this.contratos[l]={...d,id:n},(0,h.of)(this.contratos[l]);const u=this.expired.findIndex(v=>v.id===n);if(-1!==u)return this.expired[u]={...d,id:n},(0,h.of)(this.expired[u]);throw new Error("Contrato not found")}deleteContrato(n){const d=this.contratos.findIndex(u=>u.id===n);if(-1!==d)return this.contratos.splice(d,1),(0,h.of)(void 0);const l=this.expired.findIndex(u=>u.id===n);if(-1!==l)return this.expired.splice(l,1),(0,h.of)(void 0);throw new Error("Contrato not found")}transferExpiredContratos(){const n=this.contratos.filter(d=>"Vencido"===d.estado);return n.length>0&&(this.expired.push(...n),this.contratos=this.contratos.filter(d=>"Vencido"!==d.estado)),(0,h.of)(n)}restoreContrato(n){const d=this.expired.findIndex(l=>l.id===n);if(-1!==d){const l={...this.expired[d],estado:"Activo"};return this.contratos.push(l),this.expired.splice(d,1),(0,h.of)(l)}throw new Error("Expired contrato not found")}static#t=this.\u0275fac=function(d){return new(d||g)};static#e=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},6510:(O,f,p)=>{p.r(f),p.d(f,{DashboardRoutingModule:()=>J,dashboardRoutes:()=>_});var h=p(8109),m=p(6903),t=p(9212),b=p(6814),g=p(3680);const T=["*"],v=new t.OlP("MAT_CARD_CONFIG");let x=(()=>{class a{constructor(r){this.appearance=r?.appearance||"raised"}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(v,8))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(o,e){2&o&&t.ekj("mat-mdc-card-outlined","outlined"===e.appearance)("mdc-card--outlined","outlined"===e.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:T,decls:1,vars:0,template:function(o,e){1&o&&(t.F$t(),t.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return a})(),M=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[g.BQ,b.ez,g.BQ]})}return a})();var Z=p(5170);const A=["topMontoMayorChart"],D=["topMontoMenorChart"],w=["topVigenciaMayorChart"],B=["topVigenciaMenorChart"],P=["tiposContratosChart"],S=["departamentosChart"],E=["duracionBucketsChart"];let j=(()=>{class a{constructor(r){this.contratoService=r,this.contratos=[]}ngOnInit(){this.fetchContratos()}fetchContratos(){this.contratoService.getContratos().subscribe(r=>{this.contratos=r,this.initializeCharts()})}initializeCharts(){this.createTopMontoCharts(),this.createVigenciaCharts(),this.createTiposChart(),this.createDepartamentosChart(),this.createDuracionBucketsChart()}createTopMontoCharts(){const r=[...this.contratos].sort((i,s)=>(s.monto_total||0)-(i.monto_total||0)),o=r.slice(0,10),e=r.slice(-10).reverse();this.topMontoMayorChartOptions={series:[{name:"Monto Total",data:o.map(i=>i.monto_total||0)}],chart:{type:"bar",height:300},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:o.map(i=>`${i.proveedor.nombre} - ${i.no_contrato}`)},title:{text:"Top 10 Contratos - Mayor Monto"}},this.topMontoMenorChartOptions={series:[{name:"Monto Total",data:e.map(i=>i.monto_total||0)}],chart:{type:"bar",height:300},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:e.map(i=>`${i.proveedor.nombre} - ${i.no_contrato}`)},title:{text:"Top 10 Contratos - Menor Monto"}}}createVigenciaCharts(){const r=s=>{const c=new Date(s.fecha_firmado),q=new Date(s.fecha_vencido);return Math.round((q.getTime()-c.getTime())/2592e6)},o=[...this.contratos].sort((s,c)=>r(c)-r(s)),e=o.slice(0,10),i=o.slice(-10).reverse();this.topVigenciaMayorChartOptions={series:[{name:"Duraci\xf3n (Meses)",data:e.map(r)}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:e.map(s=>`${s.proveedor.nombre} - ${s.no_contrato}`)},title:{text:"Top 10 Contratos - Mayor Vigencia"}},this.topVigenciaMenorChartOptions={series:[{name:"Duraci\xf3n (Meses)",data:i.map(r)}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:i.map(s=>`${s.proveedor.nombre} - ${s.no_contrato}`)},title:{text:"Top 10 Contratos - Menor Vigencia"}}}createTiposChart(){const r=this.contratos.reduce((o,e)=>{const i=e.tipo_contrato.nombre_tipo_contrato;return o[i]=(o[i]||0)+1,o},{});this.tiposContratosChartOptions={series:[{name:"Cantidad de Contratos",data:Object.values(r)}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},xaxis:{categories:Object.keys(r)},title:{text:"Tipos de Contratos"}}}createDuracionBucketsChart(){const r=[{label:"0-3 meses",min:0,max:3},{label:"4-6 meses",min:4,max:6},{label:"7-12 meses",min:7,max:12},{label:"13-24 meses",min:13,max:24},{label:"M\xe1s de 24 meses",min:25,max:1/0}],e=r.map(i=>this.contratos.filter(s=>{const c=(i=>{const s=new Date(i.fecha_firmado),c=new Date(i.fecha_vencido);return Math.round((c.getTime()-s.getTime())/2592e6)})(s);return c>=i.min&&c<=i.max}).length);this.duracionBucketsChartOptions={series:[{name:"Cantidad de Contratos",data:e}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},xaxis:{categories:r.map(i=>i.label)},title:{text:"Contratos por Duraci\xf3n"}}}createDepartamentosChart(){const r=this.contratos.reduce((o,e)=>{const i=e.departamento.nombre_departamento;return o[i]=(o[i]||0)+1,o},{});this.departamentosChartOptions={series:[{name:"Cantidad de Contratos",data:Object.values(r)}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},xaxis:{categories:Object.keys(r)},title:{text:"Contratos por Departamento"}}}downloadChart(r){let o;switch(r){case"topMontoMayor":o=this.topMontoMayorChart;break;case"topMontoMenor":o=this.topMontoMenorChart;break;case"topVigenciaMayor":o=this.topVigenciaMayorChart;break;case"topVigenciaMenor":o=this.topVigenciaMenorChart;break;case"tiposContratos":o=this.tiposContratosChart;break;case"departamentos":o=this.departamentosChart;break;case"duracionBuckets":o=this.duracionBucketsChart}o&&o.dataURI().then(e=>{const i=document.createElement("a");i.download=`${r}.png`,i.href=e.imgURI,i.click()})}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(Z.d))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-contrato-dashboard"]],viewQuery:function(o,e){if(1&o&&(t.Gf(A,5),t.Gf(D,5),t.Gf(w,5),t.Gf(B,5),t.Gf(P,5),t.Gf(S,5),t.Gf(E,5)),2&o){let i;t.iGM(i=t.CRH())&&(e.topMontoMayorChart=i.first),t.iGM(i=t.CRH())&&(e.topMontoMenorChart=i.first),t.iGM(i=t.CRH())&&(e.topVigenciaMayorChart=i.first),t.iGM(i=t.CRH())&&(e.topVigenciaMenorChart=i.first),t.iGM(i=t.CRH())&&(e.tiposContratosChart=i.first),t.iGM(i=t.CRH())&&(e.departamentosChart=i.first),t.iGM(i=t.CRH())&&(e.duracionBucketsChart=i.first)}},standalone:!0,features:[t.jDz],decls:44,vars:42,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400","border-2","rounded-2xl"],[1,"p-6","space-y-6","w-full"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","w-full","mt-6"],[1,"p-4"],[3,"series","chart","xaxis","dataLabels","plotOptions","title"],["topMontoMayorChart",""],[1,"chart-container"],[1,"chart-header"],[3,"click"],[1,"pi","pi-download"],["topMontoMenorChart",""],["topVigenciaMayorChart",""],["topVigenciaMenorChart",""],["duracionBucketsChart",""],["tiposContratosChart",""],["departamentosChart",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-card",5),t._UZ(6,"apx-chart",6,7),t.qZA(),t.TgZ(8,"div",8)(9,"div",9)(10,"button",10),t.NdJ("click",function(){return e.downloadChart("topMontoMenor")}),t._UZ(11,"i",11),t.qZA()(),t._UZ(12,"apx-chart",6,12),t.qZA(),t.TgZ(14,"div",8)(15,"div",9)(16,"button",10),t.NdJ("click",function(){return e.downloadChart("topVigenciaMayor")}),t._UZ(17,"i",11),t.qZA()(),t._UZ(18,"apx-chart",6,13),t.qZA(),t.TgZ(20,"div",8)(21,"div",9)(22,"button",10),t.NdJ("click",function(){return e.downloadChart("topVigenciaMenor")}),t._UZ(23,"i",11),t.qZA()(),t._UZ(24,"apx-chart",6,14),t.qZA(),t.TgZ(26,"div",8)(27,"div",9)(28,"button",10),t.NdJ("click",function(){return e.downloadChart("duracionBuckets")}),t._UZ(29,"i",11),t.qZA()(),t._UZ(30,"apx-chart",6,15),t.qZA(),t.TgZ(32,"div",8)(33,"div",9)(34,"button",10),t.NdJ("click",function(){return e.downloadChart("tiposContratos")}),t._UZ(35,"i",11),t.qZA()(),t._UZ(36,"apx-chart",6,16),t.qZA(),t.TgZ(38,"div",8)(39,"div",9)(40,"button",10),t.NdJ("click",function(){return e.downloadChart("departamentos")}),t._UZ(41,"i",11),t.qZA()(),t._UZ(42,"apx-chart",6,17),t.qZA()()()()()()),2&o&&(t.xp6(6),t.Q6J("series",e.topMontoMayorChartOptions.series)("chart",e.topMontoMayorChartOptions.chart)("xaxis",e.topMontoMayorChartOptions.xaxis)("dataLabels",e.topMontoMayorChartOptions.dataLabels)("plotOptions",e.topMontoMayorChartOptions.plotOptions)("title",e.topMontoMayorChartOptions.title),t.xp6(6),t.Q6J("series",e.topMontoMenorChartOptions.series)("chart",e.topMontoMenorChartOptions.chart)("xaxis",e.topMontoMenorChartOptions.xaxis)("dataLabels",e.topMontoMenorChartOptions.dataLabels)("plotOptions",e.topMontoMenorChartOptions.plotOptions)("title",e.topMontoMenorChartOptions.title),t.xp6(6),t.Q6J("series",e.topVigenciaMayorChartOptions.series)("chart",e.topVigenciaMayorChartOptions.chart)("xaxis",e.topVigenciaMayorChartOptions.xaxis)("dataLabels",e.topVigenciaMayorChartOptions.dataLabels)("plotOptions",e.topVigenciaMayorChartOptions.plotOptions)("title",e.topVigenciaMayorChartOptions.title),t.xp6(6),t.Q6J("series",e.topVigenciaMenorChartOptions.series)("chart",e.topVigenciaMenorChartOptions.chart)("xaxis",e.topVigenciaMenorChartOptions.xaxis)("dataLabels",e.topVigenciaMenorChartOptions.dataLabels)("plotOptions",e.topVigenciaMenorChartOptions.plotOptions)("title",e.topVigenciaMenorChartOptions.title),t.xp6(6),t.Q6J("series",e.duracionBucketsChartOptions.series)("chart",e.duracionBucketsChartOptions.chart)("xaxis",e.duracionBucketsChartOptions.xaxis)("dataLabels",e.duracionBucketsChartOptions.dataLabels)("plotOptions",e.duracionBucketsChartOptions.plotOptions)("title",e.duracionBucketsChartOptions.title),t.xp6(6),t.Q6J("series",e.tiposContratosChartOptions.series)("chart",e.tiposContratosChartOptions.chart)("xaxis",e.tiposContratosChartOptions.xaxis)("dataLabels",e.tiposContratosChartOptions.dataLabels)("plotOptions",e.tiposContratosChartOptions.plotOptions)("title",e.tiposContratosChartOptions.title),t.xp6(6),t.Q6J("series",e.departamentosChartOptions.series)("chart",e.departamentosChartOptions.chart)("xaxis",e.departamentosChartOptions.xaxis)("dataLabels",e.departamentosChartOptions.dataLabels)("plotOptions",e.departamentosChartOptions.plotOptions)("title",e.departamentosChartOptions.title))},dependencies:[b.ez,m.X,m.x,M,x],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:1.5rem}.chart-grid[_ngcontent-%COMP%]{display:grid;width:100%;gap:1.5rem;grid-template-columns:repeat(2,1fr)}.chart-container[_ngcontent-%COMP%]{background:white;border-radius:.375rem;padding:1rem;box-shadow:0 1px 3px #0000001a}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.chart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px}.chart-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;border-radius:4px;transition:background-color .2s}.chart-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0000000d}.chart-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:#666}canvas[_ngcontent-%COMP%]{width:100%!important;height:300px!important}@media (max-width: 768px){.chart-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return a})();var y=p(8645),k=p(9773),U=p(3018);let I=(()=>{class a{constructor(r,o){this.proveedorService=r,this.cdr=o,this._unsubscribeAll=new y.x,this.proveedores=[],this.totalProveedoresChartOptions={chart:{type:"radialBar",height:250},series:[0],labels:["Proveedores"],plotOptions:{radialBar:{hollow:{size:"70%"}}}},this.proveedoresByTypeChartOptions={chart:{type:"bar",height:200},series:[{name:"Proveedores",data:[]}],xaxis:{categories:[]}},this.proveedoresByStatusChartOptions={chart:{type:"donut",height:200},series:[0],labels:["Sin datos"]},this.proveedoresByMonthChartOptions={chart:{type:"line",height:200},series:[{name:"Proveedores",data:[]}],xaxis:{categories:[]}},this.proveedoresByTipoEmpresaChartOptions={chart:{type:"pie",height:200},series:[0],labels:["Sin datos"]},this.proveedoresByMinisterioChartOptions={chart:{type:"bar",height:200},series:[{name:"Proveedores",data:[]}],xaxis:{categories:[]}},this.proveedoresByProvinciaChartOptions={chart:{type:"bar",height:200},series:[{name:"Proveedores",data:[]}],xaxis:{categories:[]}},this.proveedoresByMunicipioChartOptions={chart:{type:"bar",height:200},series:[{name:"Proveedores",data:[]}],xaxis:{categories:[]}}}ngOnInit(){this.loadProveedores()}loadProveedores(){this.proveedorService.getProveedores().pipe((0,k.R)(this._unsubscribeAll)).subscribe({next:r=>{this.proveedores=r,this.updateCharts(),this.cdr.markForCheck()},error:r=>{console.error("Error loading proveedores:",r)}})}updateCharts(){this.totalProveedoresChartOptions={chart:{type:"radialBar",height:250},series:[this.proveedores.length],labels:["Proveedores"],plotOptions:{radialBar:{hollow:{size:"70%"}}}};const r=this.groupByKey("ministerio","nombre_ministerio");this.proveedoresByMinisterioChartOptions={chart:{type:"bar",height:200},series:[{name:"Proveedores",data:Object.values(r.counts)}],xaxis:{categories:Object.keys(r.counts)}};const o=this.groupByKey("municipio","nombre_municipio");this.proveedoresByMunicipioChartOptions={chart:{type:"bar",height:200},series:[{name:"Proveedores",data:Object.values(o.counts)}],xaxis:{categories:Object.keys(o.counts)}};const e=new Array(12).fill(0),i=(new Date).getFullYear();this.proveedores.forEach(s=>{if(s.fechaCreacion){const c=new Date(s.fechaCreacion);c.getFullYear()===i&&e[c.getMonth()]++}}),this.proveedoresByMonthChartOptions={chart:{type:"area",height:200},series:[{name:"Proveedores",data:e}],xaxis:{categories:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]}}}groupByKey(r,o){const e={};let i=0;return this.proveedores.forEach(s=>{let c=s[r];o&&c&&(c=c[o]),c&&(e[c]=(e[c]||0)+1,i++)}),{counts:e,total:i}}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(U.z),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-proveedor"]],standalone:!0,features:[t.jDz],decls:39,vars:25,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400","border-2","rounded-2xl"],[1,"dashboard-container",2,"width","100%"],[1,"chart-grid",2,"display","flex","gap","20px","width","100%"],[1,"chart-container",2,"flex","1 1 33%"],[3,"series","chart","labels","plotOptions"],[3,"series","chart","xaxis"],[3,"series","chart","labels"],[1,"chart-grid",2,"display","flex","gap","20px","width","100%","margin-top","20px"],[1,"chart-container",2,"flex","1 1 50%"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Total Proveedores"),t.qZA(),t._UZ(8,"apx-chart",6),t.qZA(),t.TgZ(9,"div",5)(10,"h2"),t._uU(11,"Proveedores por Tipo"),t.qZA(),t._UZ(12,"apx-chart",7),t.qZA(),t.TgZ(13,"div",5)(14,"h2"),t._uU(15,"Proveedores por Estado"),t.qZA(),t._UZ(16,"apx-chart",8),t.qZA()(),t.TgZ(17,"div",9)(18,"div",5)(19,"h2"),t._uU(20,"Proveedores por Tipo de Empresa"),t.qZA(),t._UZ(21,"apx-chart",7),t.qZA(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24,"Proveedores por Ministerio"),t.qZA(),t._UZ(25,"apx-chart",7),t.qZA(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28,"Proveedores por Provincia"),t.qZA(),t._UZ(29,"apx-chart",7),t.qZA()(),t.TgZ(30,"div",9)(31,"div",10)(32,"h2"),t._uU(33,"Proveedores por Municipio"),t.qZA(),t._UZ(34,"apx-chart",7),t.qZA(),t.TgZ(35,"div",10)(36,"h2"),t._uU(37,"Proveedores por Mes"),t.qZA(),t._UZ(38,"apx-chart",7),t.qZA()()()()()()),2&o&&(t.xp6(8),t.Q6J("series",e.totalProveedoresChartOptions.series)("chart",e.totalProveedoresChartOptions.chart)("labels",e.totalProveedoresChartOptions.labels)("plotOptions",e.totalProveedoresChartOptions.plotOptions),t.xp6(4),t.Q6J("series",e.proveedoresByTypeChartOptions.series)("chart",e.proveedoresByTypeChartOptions.chart)("xaxis",e.proveedoresByTypeChartOptions.xaxis),t.xp6(4),t.Q6J("series",e.proveedoresByStatusChartOptions.series)("chart",e.proveedoresByStatusChartOptions.chart)("labels",e.proveedoresByStatusChartOptions.labels),t.xp6(5),t.Q6J("series",e.proveedoresByTipoEmpresaChartOptions.series)("chart",e.proveedoresByTipoEmpresaChartOptions.chart)("xaxis",e.proveedoresByTipoEmpresaChartOptions.xaxis),t.xp6(4),t.Q6J("series",e.proveedoresByMinisterioChartOptions.series)("chart",e.proveedoresByMinisterioChartOptions.chart)("xaxis",e.proveedoresByMinisterioChartOptions.xaxis),t.xp6(4),t.Q6J("series",e.proveedoresByProvinciaChartOptions.series)("chart",e.proveedoresByProvinciaChartOptions.chart)("xaxis",e.proveedoresByProvinciaChartOptions.xaxis),t.xp6(5),t.Q6J("series",e.proveedoresByMunicipioChartOptions.series)("chart",e.proveedoresByMunicipioChartOptions.chart)("xaxis",e.proveedoresByMunicipioChartOptions.xaxis),t.xp6(4),t.Q6J("series",e.proveedoresByMonthChartOptions.series)("chart",e.proveedoresByMonthChartOptions.chart)("xaxis",e.proveedoresByMonthChartOptions.xaxis))},dependencies:[b.ez,m.X,m.x,M],styles:[".dashboard-container{width:100%;padding:1.5rem}.chart-grid{display:grid;width:100%;gap:1.5rem}.chart-grid.three-cols{grid-template-columns:repeat(3,1fr)}.chart-grid.two-cols{grid-template-columns:repeat(2,1fr)}.chart-container{background:white;padding:1rem;box-shadow:0 1px 3px #0000001a}h2{font-size:1.25rem}\n"],encapsulation:2})}return a})(),z=(()=>{class a{constructor(){this._unsubscribeAll=new y.x}ngOnInit(){this.totalSuplimentosChartOptions={chart:{type:"radialBar",height:200},series:[60],labels:["Total Suplimentos"],plotOptions:{radialBar:{hollow:{size:"60%"}}}},this.suplimentosByTypeChartOptions={chart:{type:"bar",height:200},series:[{name:"Suplimentos",data:[30,20,10,15]}],xaxis:{categories:["Tipo X","Tipo Y","Tipo Z","Tipo W"]}},this.suplimentosByStatusChartOptions={chart:{type:"pie",height:200},series:[50,30,20],labels:["Activo","Pendiente","Cancelado"]},this.suplimentosByMonthChartOptions={chart:{type:"area",height:200},series:[{name:"Suplimentos",data:[3,6,9,12,15,18,21,24,27,30,33,36]}],xaxis:{categories:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]}}}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-suplimento"]],standalone:!0,features:[t.jDz],decls:28,vars:13,consts:[[1,"p-6","space-y-6"],[1,"text-3xl","font-bold","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"p-4"],[1,"text-xl","font-semibold","mb-2"],[3,"series","chart","labels","plotOptions"],[3,"series","chart","xaxis"],[3,"series","chart","labels"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Dashboard Suplimento"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-card",3)(5,"h2",4),t._uU(6,"Total Suplimentos"),t.qZA(),t.TgZ(7,"p"),t._uU(8,"Resumen del total de suplimentos activos."),t.qZA(),t._UZ(9,"apx-chart",5),t.qZA(),t.TgZ(10,"mat-card",3)(11,"h2",4),t._uU(12,"Suplimentos por Tipo"),t.qZA(),t.TgZ(13,"p"),t._uU(14,"Distribuci\xf3n de suplimentos por tipo."),t.qZA(),t._UZ(15,"apx-chart",6),t.qZA(),t.TgZ(16,"mat-card",3)(17,"h2",4),t._uU(18,"Suplimentos por Estado"),t.qZA(),t.TgZ(19,"p"),t._uU(20,"Estado actual de los suplimentos."),t.qZA(),t._UZ(21,"apx-chart",7),t.qZA(),t.TgZ(22,"mat-card",3)(23,"h2",4),t._uU(24,"Suplimentos por Mes"),t.qZA(),t.TgZ(25,"p"),t._uU(26,"Suplimentos registrados por mes."),t.qZA(),t._UZ(27,"apx-chart",6),t.qZA()()()),2&o&&(t.xp6(9),t.Q6J("series",e.totalSuplimentosChartOptions.series)("chart",e.totalSuplimentosChartOptions.chart)("labels",e.totalSuplimentosChartOptions.labels)("plotOptions",e.totalSuplimentosChartOptions.plotOptions),t.xp6(6),t.Q6J("series",e.suplimentosByTypeChartOptions.series)("chart",e.suplimentosByTypeChartOptions.chart)("xaxis",e.suplimentosByTypeChartOptions.xaxis),t.xp6(6),t.Q6J("series",e.suplimentosByStatusChartOptions.series)("chart",e.suplimentosByStatusChartOptions.chart)("labels",e.suplimentosByStatusChartOptions.labels),t.xp6(6),t.Q6J("series",e.suplimentosByMonthChartOptions.series)("chart",e.suplimentosByMonthChartOptions.chart)("xaxis",e.suplimentosByMonthChartOptions.xaxis))},dependencies:[b.ez,m.X,m.x,M,x],encapsulation:2})}return a})();var C=p(2246);const _=[{path:"dashboard-contrato",component:j},{path:"dashboard-proveedor",component:I},{path:"dashboard-suplimento",component:z},{path:"dashboard-ejecucion",component:(()=>{class a{constructor(){this._unsubscribeAll=new y.x}ngOnInit(){this.totalEjecucionChartOptions={chart:{type:"radialBar",height:200},series:[80],labels:["Total Ejecuci\xf3n"],plotOptions:{radialBar:{hollow:{size:"60%"}}}},this.ejecucionByTypeChartOptions={chart:{type:"bar",height:200},series:[{name:"Ejecuci\xf3n",data:[50,20,10,15]}],xaxis:{categories:["Tipo 1","Tipo 2","Tipo 3","Tipo 4"]}},this.ejecucionByStatusChartOptions={chart:{type:"pie",height:200},series:[60,25,15],labels:["En Proceso","Completado","Pendiente"]},this.ejecucionByMonthChartOptions={chart:{type:"area",height:200},series:[{name:"Ejecuci\xf3n",data:[8,12,18,22,28,32,36,40,44,48,52,56]}],xaxis:{categories:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]}},this.contratosTopEjecucionesChartOptions={chart:{type:"bar",height:250},series:[{name:"Ejecuciones",data:[15,12,10,8,7,6,5,4,3,2]}],xaxis:{categories:C.Io.slice(0,10).map(r=>r.no_contrato)},title:{text:"Contratos con mayor cantidad de Ejecuciones"}},this.suplementosTopEjecucionesChartOptions={chart:{type:"bar",height:250},series:[{name:"Ejecuciones",data:[14,13,11,9,7,6,5,4,3,1]}],xaxis:{categories:C.Io.slice(0,10).map(r=>r.no_contrato)},title:{text:"Suplementos con mayor cantidad de Ejecuciones"}},this.top10ProveedoresMayorMontoChartOptions={chart:{type:"bar",height:250},series:[{name:"Monto Ejecutado",data:C.P_.slice(0,10).map(r=>r.costo_cup)}],xaxis:{categories:C.P_.slice(0,10).map(r=>r.proveedor.nombre)},title:{text:"Top 10 Proveedores con mayor monto Ejecutado"}},this.top10ProveedoresMenorMontoChartOptions={chart:{type:"bar",height:250},series:[{name:"Monto Ejecutado",data:C.P_.slice(-10).map(r=>r.costo_cup)}],xaxis:{categories:C.P_.slice(-10).map(r=>r.proveedor.nombre)},title:{text:"Top 10 Proveedores con menor monto Ejecutado"}},this.top10ProveedoresContratoSuplementoMayorMontoChartOptions={chart:{type:"bar",height:250},series:[{name:"Monto Ejecutado",data:[1e5,9e4,85e3,8e4,75e3,7e4,65e3,6e4,55e3,5e4]}],xaxis:{categories:C.Io.slice(0,10).map(r=>`${r.no_contrato} - Sup1`)},title:{text:"Top 10 Proveedores con Contrato y Suplemento mayor monto Ejecutado"}},this.top10ProveedoresContratoSuplementoMenorMontoChartOptions={chart:{type:"bar",height:250},series:[{name:"Monto Ejecutado",data:[5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3]}],xaxis:{categories:C.Io.slice(0,10).map(r=>`${r.no_contrato} - Sup1`)},title:{text:"Top 10 Proveedores con Contrato y Suplemento menor monto Ejecutado"}}}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-ejecucion"]],standalone:!0,features:[t.jDz],decls:21,vars:24,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400","border-2","rounded-2xl"],[1,"p-6","space-y-6","w-full"],[1,"text-3xl","font-bold","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","w-full","mt-6"],[1,"p-4"],[3,"series","chart","xaxis","title"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5,"Dashboard Ejecuci\xf3n"),t.qZA(),t.TgZ(6,"div",5)(7,"mat-card",6),t._UZ(8,"apx-chart",7),t.qZA(),t.TgZ(9,"mat-card",6),t._UZ(10,"apx-chart",7),t.qZA()(),t.TgZ(11,"div",5)(12,"mat-card",6),t._UZ(13,"apx-chart",7),t.qZA(),t.TgZ(14,"mat-card",6),t._UZ(15,"apx-chart",7),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-card",6),t._UZ(18,"apx-chart",7),t.qZA(),t.TgZ(19,"mat-card",6),t._UZ(20,"apx-chart",7),t.qZA()()()()()()),2&o&&(t.xp6(8),t.Q6J("series",e.contratosTopEjecucionesChartOptions.series)("chart",e.contratosTopEjecucionesChartOptions.chart)("xaxis",e.contratosTopEjecucionesChartOptions.xaxis)("title",e.contratosTopEjecucionesChartOptions.title),t.xp6(2),t.Q6J("series",e.suplementosTopEjecucionesChartOptions.series)("chart",e.suplementosTopEjecucionesChartOptions.chart)("xaxis",e.suplementosTopEjecucionesChartOptions.xaxis)("title",e.suplementosTopEjecucionesChartOptions.title),t.xp6(3),t.Q6J("series",e.top10ProveedoresMayorMontoChartOptions.series)("chart",e.top10ProveedoresMayorMontoChartOptions.chart)("xaxis",e.top10ProveedoresMayorMontoChartOptions.xaxis)("title",e.top10ProveedoresMayorMontoChartOptions.title),t.xp6(2),t.Q6J("series",e.top10ProveedoresMenorMontoChartOptions.series)("chart",e.top10ProveedoresMenorMontoChartOptions.chart)("xaxis",e.top10ProveedoresMenorMontoChartOptions.xaxis)("title",e.top10ProveedoresMenorMontoChartOptions.title),t.xp6(3),t.Q6J("series",e.top10ProveedoresContratoSuplementoMayorMontoChartOptions.series)("chart",e.top10ProveedoresContratoSuplementoMayorMontoChartOptions.chart)("xaxis",e.top10ProveedoresContratoSuplementoMayorMontoChartOptions.xaxis)("title",e.top10ProveedoresContratoSuplementoMayorMontoChartOptions.title),t.xp6(2),t.Q6J("series",e.top10ProveedoresContratoSuplementoMenorMontoChartOptions.series)("chart",e.top10ProveedoresContratoSuplementoMenorMontoChartOptions.chart)("xaxis",e.top10ProveedoresContratoSuplementoMenorMontoChartOptions.xaxis)("title",e.top10ProveedoresContratoSuplementoMenorMontoChartOptions.title))},dependencies:[b.ez,m.X,m.x,M,x],encapsulation:2})}return a})()}];let J=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(_),h.Bz]})}return a})()}}]);