"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7],{1007:($,f,l)=>{l.r(f),l.d(f,{DashboardRoutingModule:()=>J,dashboardRoutes:()=>M});var b=l(1896),d=l(6903),h=l(5195),m=l(617),C=l(2296),u=l(7988),g=l(6814),t=l(9212),y=l(5170);const O=["topMontoMayorChart"],x=["topMontoMenorChart"],T=["topVigenciaMayorChart"],Z=["topVigenciaMenorChart"],B=["tiposContratosChart"],P=["departamentosChart"],k=["duracionBucketsChart"],S=["evolucionMensualChart"];let A=(()=>{class n{constructor(e){this.contratoService=e,this.contratos=[],this.isLoading=!0,this.chartsInitialized=!1,this.contratosActivos=0,this.contratosVencidos=0,this.totalSuplementos=0,this.montoTotalContratos=0,this.montoTotalSuplementos=0,this.colorPalette=["#90A4AE","#B0BEC5","#CFD8DC","#E1E8ED","#2196F3","#64B5F6","#BBDEFB","#ECEFF1"],this.topMontoMayorChartOptions={},this.topMontoMenorChartOptions={},this.topVigenciaMayorChartOptions={},this.topVigenciaMenorChartOptions={},this.tiposContratosChartOptions={},this.departamentosChartOptions={},this.duracionBucketsChartOptions={},this.evolucionMensualChartOptions={}}ngOnInit(){this.initializeDefaultCharts(),this.contratoService.getDashboardcontrato().subscribe({next:e=>{console.log("Datos recibidos del servicio:",e),this.contratos=e.map(r=>({...r,monto_total:(r.valor_cup||0)+(r.valor_usd||0)+(r.monto_vencimiento_cup||0)+(r.monto_vencimiento_usd||0)+(r.monto_vencimiento_cl||0)})),this.initializeCharts(),console.log("Opciones topMontoMayorChart:",this.topMontoMayorChartOptions),console.log("Opciones topMontoMenorChart:",this.topMontoMenorChartOptions),console.log("Opciones topVigenciaMayorChart:",this.topVigenciaMayorChartOptions),console.log("Opciones topVigenciaMenorChart:",this.topVigenciaMenorChartOptions),console.log("Opciones tiposContratosChart:",this.tiposContratosChartOptions),console.log("Opciones departamentosChart:",this.departamentosChartOptions),console.log("Opciones duracionBucketsChart:",this.duracionBucketsChartOptions),console.log("Opciones evolucionMensualChart:",this.evolucionMensualChartOptions),this.isLoading=!1,this.chartsInitialized=!0},error:e=>{console.error("Error fetching dashboard contratos:",e),this.isLoading=!1,this.initializeEmptyCharts()}}),this.contratoService.getDashboard().subscribe({next:e=>{console.log("Datos recibidos del servicio:",e),this.contratos=e.map(r=>({...r,monto_total:(r.valor_cup||0)+(r.valor_usd||0)+(r.monto_vencimiento_cup||0)+(r.monto_vencimiento_usd||0)+(r.monto_vencimiento_cl||0)})),this.isLoading=!1,this.chartsInitialized=!0},error:e=>{console.error("Error fetching dashboard contratos:",e),this.isLoading=!1,this.initializeEmptyCharts()}})}get totalContratos(){return this.contratos?this.contratos.length:0}get valorTotal(){if(!this.contratos)return 0;const e=this.contratos.reduce((r,o)=>r+(o.monto_total||0),0);return Math.round(e/1e6*100)/100}get totalProveedores(){if(!this.contratos)return 0;const e=new Set;return this.contratos.forEach(r=>{r.proveedor?.id&&e.add(r.proveedor.id)}),e.size}get totalDepartamentos(){if(!this.contratos)return 0;const e=new Set;return this.contratos.forEach(r=>{r.departamento?.id&&e.add(r.departamento.id)}),e.size}initializeDefaultCharts(){const e=this.getDefaultChartOptions();this.topMontoMayorChartOptions={...e},this.topMontoMenorChartOptions={...e,chart:{...e.chart,type:"donut"}},this.topVigenciaMayorChartOptions={...e,chart:{...e.chart,type:"area"}},this.topVigenciaMenorChartOptions={...e},this.tiposContratosChartOptions={...e,chart:{...e.chart,type:"radar"}},this.departamentosChartOptions={...e},this.duracionBucketsChartOptions={...e},this.evolucionMensualChartOptions={...e,chart:{...e.chart,type:"line"}}}getDefaultChartOptions(){return{series:[{name:"Datos",data:[10,20,30,40,50]}],chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{bar:{horizontal:!1,columnWidth:"70%",borderRadius:4}},dataLabels:{enabled:!1},xaxis:{categories:["A","B","C","D","E"],labels:{style:{colors:"#64748B",fontSize:"12px"}}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"}}},title:{text:void 0},tooltip:{enabled:!0,theme:"light",style:{fontSize:"12px"}},legend:{show:!1},grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:0,position:"back"},colors:["#3F51B5"],responsive:[{breakpoint:768,options:{chart:{height:250}}}]}}downloadChart(e,r="png"){try{let o;switch(e){case"topMontoMayor":o=this.topMontoMayorChart;break;case"topMontoMenor":o=this.topMontoMenorChart;break;case"topVigenciaMayor":o=this.topVigenciaMayorChart;break;case"topVigenciaMenor":o=this.topVigenciaMenorChart;break;case"tiposContratos":o=this.tiposContratosChart;break;case"departamentos":o=this.departamentosChart;break;case"duracionBuckets":o=this.duracionBucketsChart;break;case"evolucionMensual":o=this.evolucionMensualChart}if(o&&o.chart){const a={scale:"svg"===r?1:2,width:1200,height:600};"svg"===r?o.chart.dataURI(a).then(s=>{const i=document.createElement("a");i.href=s.imgURI,i.download=`${e}-chart.svg`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}):"pdf"===r?console.log("PDF export requires additional library"):o.chart.dataURI(a).then(s=>{const i=document.createElement("a");i.href=s.imgURI,i.download=`${e}-chart.png`,document.body.appendChild(i),i.click(),document.body.removeChild(i)})}}catch(o){console.error("Error al descargar gr\xe1fica:",o)}}fetchContratos(){}initializeEmptyCharts(){this.chartsInitialized=!0}initializeCharts(){0!==this.contratos.length?(this.createTopMontoChart(),this.createTopMontoPieChart(),this.createVigenciaAreaChart(),this.createEvolucionMensualChart(),this.createTiposRadarChart(),this.createDepartamentosChart(),this.createDuracionHeatmapChart(),this.createTopVigenciaMenorChart()):this.initializeEmptyCharts()}createTopMontoChart(){if(!this.contratos||0===this.contratos.length)return void(this.topMontoMayorChartOptions={});const r=[...this.contratos].sort((o,a)=>(a.monto_total||0)-(o.monto_total||0)).slice(0,10);this.topMontoMayorChartOptions={series:[{name:"Monto Total",data:r.map(o=>o.monto_total||0)}],chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800},background:"transparent"},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:8,distributed:!0}},dataLabels:{enabled:!1},xaxis:{categories:r.map(o=>o.proveedor?.nombre?.substring(0,15)+"..."||0),labels:{style:{colors:"#64748B",fontSize:"12px"},rotate:-45}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"},formatter:function(o){return"$"+(o/1e6).toFixed(1)+"M"}}},colors:[this.colorPalette[5],this.colorPalette[6],this.colorPalette[7],this.colorPalette[1],this.colorPalette[2],this.colorPalette[3],this.colorPalette[4],this.colorPalette[0]],grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:3},tooltip:{theme:"light",y:{formatter:function(o){return"$"+o.toLocaleString()}}},legend:{show:!1}}}createTopMontoPieChart(){if(!this.contratos||0===this.contratos.length)return void(this.topMontoMenorChartOptions={});const r=[...this.contratos].sort((o,a)=>(a.monto_total||0)-(o.monto_total||0)).slice(0,6);this.topMontoMenorChartOptions={series:r.map(o=>o.monto_total||0),chart:{type:"donut",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},labels:r.map(o=>o.proveedor?.nombre?.substring(0,20)+"..."||0),colors:[this.colorPalette[4],this.colorPalette[5],this.colorPalette[0],this.colorPalette[1],this.colorPalette[2],this.colorPalette[3]],dataLabels:{enabled:!0,formatter:function(o){return o.toFixed(1)+"%"},style:{fontSize:"12px",colors:["#fff"],fontWeight:"bold"}},plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,total:{show:!0,label:"Total",color:"#64748B",formatter:function(o){return"$"+(o.globals.seriesTotals.reduce((s,i)=>s+i,0)/1e6).toFixed(1)+"M"}}}}}},legend:{position:"bottom",fontSize:"12px",labels:{colors:"#64748B"}},tooltip:{theme:"light",y:{formatter:function(o){return"$"+o.toLocaleString()}}}}}createVigenciaAreaChart(){const e=a=>{if(!a.fecha_firmado||!a.fecha_vencido)return 0;const s=new Date(a.fecha_firmado),i=new Date(a.fecha_vencido);return Math.round((i.getTime()-s.getTime())/2592e6)},o=[...this.contratos].sort((a,s)=>e(s)-e(a)).slice(0,10);this.topVigenciaMayorChartOptions={series:[{name:"Duraci\xf3n (Meses)",data:o.map(e)}],chart:{type:"area",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.5,gradientToColors:["#06B6D4"],opacityFrom:.8,opacityTo:.2,stops:[0,100]}},xaxis:{categories:o.map(a=>a.proveedor?.nombre?.substring(0,10)+"..."||0),labels:{style:{colors:"#64748B",fontSize:"12px"}}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"}}},colors:[this.colorPalette[5]],grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:3},tooltip:{theme:"light",y:{formatter:function(a){return a+" meses"}}}}}createEvolucionMensualChart(){const e=this.contratos.reduce((a,s)=>{if(s.fecha_firmado){const i=new Date(s.fecha_firmado),p=i.getMonth(),c=`${i.getFullYear()}-${p.toString().padStart(2,"0")}`;a[c]||(a[c]={count:0,monto:0}),a[c].count++,a[c].monto+=s.monto_total||0}return a},{}),o=Object.keys(e).sort().slice(-12);this.evolucionMensualChartOptions={series:[{name:"Cantidad",type:"column",data:o.map(a=>e[a].count)},{name:"Monto (M$)",type:"line",data:o.map(a=>e[a].monto/1e6)}],chart:{height:320,type:"line",toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},stroke:{width:[0,4],curve:"smooth"},dataLabels:{enabled:!1},markers:{size:6,colors:["#FFFFFF"],strokeColors:"#EF4444",strokeWidth:2,hover:{size:8}},xaxis:{categories:o.map(a=>{const[s,i]=a.split("-");return new Date(parseInt(s),parseInt(i)).toLocaleDateString("es-ES",{month:"short",year:"2-digit"})}),labels:{style:{colors:"#64748B",fontSize:"12px"}}},yaxis:[{title:{text:"Cantidad",style:{color:"#64748B",fontSize:"12px"}},labels:{style:{colors:"#64748B",fontSize:"12px"}}},{opposite:!0,title:{text:"Monto (M$)",style:{color:"#64748B",fontSize:"12px"}},labels:{style:{colors:"#64748B",fontSize:"12px"}}}],colors:[this.colorPalette[4],this.colorPalette[2]],grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:3},legend:{show:!0,position:"top",labels:{colors:"#64748B"}},tooltip:{theme:"light",shared:!0,intersect:!1}}}createTiposRadarChart(){const e=this.contratos.reduce((o,a)=>{const s=a.tipo_contrato?.nombre_tipo_contrato||"Desconocido";return o[s]||(o[s]=0),o[s]++,o},{}),r=Object.entries(e);this.tiposContratosChartOptions={series:[{name:"Cantidad",data:r.map(([o,a])=>a)}],chart:{height:320,type:"radar",toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},xaxis:{categories:r.map(([o,a])=>o.substring(0,15)+(o.length>15?"...":""))},colors:[this.colorPalette[1]],dataLabels:{enabled:!0,style:{colors:[this.colorPalette[1]],fontSize:"11px"}},plotOptions:{radar:{size:120,polygons:{strokeColors:"#E2E8F0",strokeWidth:"2",fill:{colors:["#F0FDF4","#DCFCE7"]}}}},markers:{size:5,colors:[this.colorPalette[1]],strokeColors:"#FFFFFF",strokeWidth:2,hover:{size:7}},fill:{opacity:.4},tooltip:{theme:"light",y:{formatter:function(o){return o+" contratos"}}}}}createDepartamentosChart(){const e=this.contratos.reduce((o,a)=>{const s=a.departamento?.nombre_departamento||"Desconocido";return o[s]||(o[s]=0),o[s]++,o},{}),r=Object.entries(e).sort((o,a)=>a[1]-o[1]);this.departamentosChartOptions={series:[{name:"Contratos",data:r.map(([o,a])=>a)}],chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{bar:{horizontal:!0,borderRadius:6,barHeight:"70%",distributed:!0}},dataLabels:{enabled:!0,style:{colors:["#FFFFFF"],fontSize:"12px",fontWeight:"bold"}},xaxis:{categories:r.map(([o,a])=>o.substring(0,20)+(o.length>20?"...":"")),labels:{style:{colors:"#64748B",fontSize:"12px"}}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"}}},colors:[this.colorPalette[0],this.colorPalette[2],this.colorPalette[4],this.colorPalette[1],this.colorPalette[5],this.colorPalette[3],this.colorPalette[6],this.colorPalette[7]],grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:3},tooltip:{theme:"light",y:{formatter:function(o){return o+" contratos"}}}}}createDuracionHeatmapChart(){const r=this.contratos.reduce((a,s)=>{const i=(a=>{if(!a.fecha_firmado||!a.fecha_vencido)return 0;const s=new Date(a.fecha_firmado),i=new Date(a.fecha_vencido);return Math.round((i.getTime()-s.getTime())/864e5)})(s);let p="";return p=i<=30?"0-30 d\xedas":i<=90?"31-90 d\xedas":i<=180?"91-180 d\xedas":i<=365?"181-365 d\xedas":"> 365 d\xedas",a[p]||(a[p]=0),a[p]++,a},{}),o=Object.entries(r);this.duracionBucketsChartOptions={series:[{name:"Contratos",data:o.map(([a,s])=>s)}],chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{bar:{horizontal:!1,columnWidth:"65%",borderRadius:8,distributed:!0}},dataLabels:{enabled:!0,style:{colors:["#FFFFFF"],fontSize:"12px",fontWeight:"bold"}},xaxis:{categories:o.map(([a,s])=>a),labels:{style:{colors:"#64748B",fontSize:"12px"}}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"}}},colors:[this.colorPalette[1],this.colorPalette[4],this.colorPalette[0],this.colorPalette[2],this.colorPalette[3]],grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:3},tooltip:{theme:"light",y:{formatter:function(a){return a+" contratos"}}}}}createTopVigenciaMenorChart(){const e=a=>{if(!a.fecha_firmado||!a.fecha_vencido)return 0;const s=new Date(a.fecha_firmado),i=new Date(a.fecha_vencido);return Math.round((i.getTime()-s.getTime())/2592e6)},o=[...this.contratos].sort((a,s)=>e(a)-e(s)).slice(0,8);this.topVigenciaMenorChartOptions={series:[{name:"Duraci\xf3n (Meses)",data:o.map(e)},{name:"Monto (M$)",data:o.map(a=>(a.monto_total||0)/1e6)}],chart:{height:320,type:"line",toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},stroke:{width:[4,4],curve:"smooth",dashArray:[0,5]},dataLabels:{enabled:!1},markers:{size:[6,6],colors:["#FFFFFF","#FFFFFF"],strokeColors:["#8B5CF6","#06B6D4"],strokeWidth:2,hover:{size:8}},xaxis:{categories:o.map(a=>a.proveedor?.nombre?.substring(0,10)+"..."||0),labels:{style:{colors:"#64748B",fontSize:"12px"}}},yaxis:[{title:{text:"Duraci\xf3n (Meses)",style:{color:"#64748B",fontSize:"12px"}},labels:{style:{colors:"#64748B"}}},{opposite:!0,title:{text:"Monto (M$)",style:{color:"#64748B",fontSize:"12px"}},labels:{style:{colors:"#64748B"}}}],colors:[this.colorPalette[1],this.colorPalette[5]],grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:3},legend:{show:!0,position:"top",labels:{colors:"#64748B"}},tooltip:{theme:"light",shared:!0,intersect:!1}}}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(y.d))};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-contrato-dashboard"]],viewQuery:function(r,o){if(1&r&&(t.Gf(O,5),t.Gf(x,5),t.Gf(T,5),t.Gf(Z,5),t.Gf(B,5),t.Gf(P,5),t.Gf(k,5),t.Gf(S,5)),2&r){let a;t.iGM(a=t.CRH())&&(o.topMontoMayorChart=a.first),t.iGM(a=t.CRH())&&(o.topMontoMenorChart=a.first),t.iGM(a=t.CRH())&&(o.topVigenciaMayorChart=a.first),t.iGM(a=t.CRH())&&(o.topVigenciaMenorChart=a.first),t.iGM(a=t.CRH())&&(o.tiposContratosChart=a.first),t.iGM(a=t.CRH())&&(o.departamentosChart=a.first),t.iGM(a=t.CRH())&&(o.duracionBucketsChart=a.first),t.iGM(a=t.CRH())&&(o.evolucionMensualChart=a.first)}},standalone:!0,features:[t.jDz],decls:302,vars:92,consts:[[1,"flex","flex-col","flex-auto","min-w-0","bg-gray-50","dark:bg-gray-900"],[1,"flex-auto","p-6","sm:p-8"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","space-y-3","sm:space-y-0"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","tracking-tight"],[1,"text-gray-500","dark:text-gray-400","mt-2"],[1,"flex","items-center","space-x-2"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-6","mt-8"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-400"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","mt-1"],[1,"p-3","bg-blue-50","dark:bg-blue-900/30","rounded-full"],[1,"text-blue-600","dark:text-blue-400"],[1,"p-3","bg-purple-50","dark:bg-purple-900/30","rounded-full"],[1,"text-purple-600","dark:text-purple-400"],[1,"p-3","bg-orange-50","dark:bg-orange-900/30","rounded-full"],[1,"text-orange-600","dark:text-orange-400"],[1,"p-3","bg-green-50","dark:bg-green-900/30","rounded-full"],[1,"text-green-600","dark:text-green-400"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","mt-8"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200","dark:border-gray-700"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400","mt-1"],["mat-icon-button","",1,"text-gray-400","hover:text-gray-600",3,"matMenuTriggerFor"],["chartMenu1","matMenu"],["mat-menu-item","",3,"click"],[1,"p-6"],[3,"series","chart","xaxis","yaxis","plotOptions","dataLabels","colors","grid","tooltip"],["topMontoMayorChart",""],["chartMenu2","matMenu"],[3,"series","chart","labels","colors","dataLabels","plotOptions","legend","tooltip"],["topMontoMenorChart",""],["chartMenu3","matMenu"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","fill","colors","grid","tooltip"],["topVigenciaMayorChart",""],["chartMenu4","matMenu"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","markers","colors","grid","tooltip","legend"],["topVigenciaMenorChart",""],["chartMenu5","matMenu"],[3,"series","chart","xaxis","dataLabels","plotOptions","markers","fill","colors","tooltip"],["tiposContratosChart",""],["chartMenu6","matMenu"],["departamentosChart",""],["chartMenu7","matMenu"],["duracionBucketsChart",""],["chartMenu8","matMenu"],[3,"series","chart","xaxis","yaxis","stroke","dataLabels","markers","colors","grid","tooltip","legend"],["evolucionMensualChart",""]],template:function(r,o){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),t._uU(5," Dashboard de Contratos "),t.qZA(),t.TgZ(6,"p",4),t._uU(7," An\xe1lisis completo de contratos y proveedores "),t.qZA()(),t.TgZ(8,"div",5)(9,"button",6),t._uU(10," Exportar Todo "),t.qZA()()(),t.TgZ(11,"div",7)(12,"div",8)(13,"div",9)(14,"div")(15,"p",10),t._uU(16,"Total Contratos"),t.qZA(),t.TgZ(17,"p",11),t._uU(18),t.qZA()(),t.TgZ(19,"div",12)(20,"mat-icon",13),t._uU(21,"description"),t.qZA()()()(),t.TgZ(22,"div",8)(23,"div",9)(24,"div")(25,"p",10),t._uU(26,"Proveedores"),t.qZA(),t.TgZ(27,"p",11),t._uU(28),t.qZA()(),t.TgZ(29,"div",14)(30,"mat-icon",15),t._uU(31,"business"),t.qZA()()()(),t.TgZ(32,"div",8)(33,"div",9)(34,"div")(35,"p",10),t._uU(36,"Departamentos"),t.qZA(),t.TgZ(37,"p",11),t._uU(38),t.qZA()(),t.TgZ(39,"div",16)(40,"mat-icon",17),t._uU(41,"location_city"),t.qZA()()()(),t.TgZ(42,"div",8)(43,"div",9)(44,"div")(45,"p",10),t._uU(46,"Total Suplementos"),t.qZA(),t.TgZ(47,"p",11),t._uU(48),t.qZA()(),t.TgZ(49,"div",18)(50,"mat-icon",19),t._uU(51,"description"),t.qZA()()()()(),t.TgZ(52,"div",7)(53,"div",8)(54,"div",9)(55,"div")(56,"p",10),t._uU(57,"Contratos Activos"),t.qZA(),t.TgZ(58,"p",11),t._uU(59),t.qZA()(),t.TgZ(60,"div",12)(61,"mat-icon",13),t._uU(62,"description"),t.qZA()()()(),t.TgZ(63,"div",8)(64,"div",9)(65,"div")(66,"p",10),t._uU(67,"Contratos Vencidos"),t.qZA(),t.TgZ(68,"p",11),t._uU(69),t.qZA()(),t.TgZ(70,"div",16)(71,"mat-icon",17),t._uU(72,"location_city"),t.qZA()()()(),t.TgZ(73,"div",8)(74,"div",9)(75,"div")(76,"p",10),t._uU(77,"Monto Total Contratos"),t.qZA(),t.TgZ(78,"p",11),t._uU(79),t.qZA()(),t.TgZ(80,"div",14)(81,"mat-icon",15),t._uU(82,"attach_money"),t.qZA()()()(),t.TgZ(83,"div",8)(84,"div",9)(85,"div")(86,"p",10),t._uU(87,"Monto Total Contratos"),t.qZA(),t.TgZ(88,"p",11),t._uU(89),t.qZA()(),t.TgZ(90,"div",14)(91,"mat-icon",15),t._uU(92,"attach_money"),t.qZA()()()()(),t.TgZ(93,"div",20)(94,"div",21)(95,"div",22)(96,"div")(97,"h3",23),t._uU(98," Contratos por Monto "),t.qZA(),t.TgZ(99,"p",24),t._uU(100," Top 10 contratos de mayor valor "),t.qZA()(),t.TgZ(101,"div",5)(102,"button",25)(103,"mat-icon"),t._uU(104,"more_vert"),t.qZA()(),t.TgZ(105,"mat-menu",null,26)(107,"button",27),t.NdJ("click",function(){return o.downloadChart("topMontoMayor","png")}),t.TgZ(108,"mat-icon"),t._uU(109,"image"),t.qZA(),t.TgZ(110,"span"),t._uU(111,"PNG"),t.qZA()(),t.TgZ(112,"button",27),t.NdJ("click",function(){return o.downloadChart("topMontoMayor","svg")}),t.TgZ(113,"mat-icon"),t._uU(114,"code"),t.qZA(),t.TgZ(115,"span"),t._uU(116,"SVG"),t.qZA()()()()(),t.TgZ(117,"div",28),t._UZ(118,"apx-chart",29,30),t.qZA()(),t.TgZ(120,"div",21)(121,"div",22)(122,"div")(123,"h3",23),t._uU(124," Contratos por Monto (Menores) "),t.qZA(),t.TgZ(125,"p",24),t._uU(126," Top 6 contratos de menor valor "),t.qZA()(),t.TgZ(127,"div",5)(128,"button",25)(129,"mat-icon"),t._uU(130,"more_vert"),t.qZA()(),t.TgZ(131,"mat-menu",null,31)(133,"button",27),t.NdJ("click",function(){return o.downloadChart("topMontoMenor","png")}),t.TgZ(134,"mat-icon"),t._uU(135,"image"),t.qZA(),t.TgZ(136,"span"),t._uU(137,"PNG"),t.qZA()(),t.TgZ(138,"button",27),t.NdJ("click",function(){return o.downloadChart("topMontoMenor","svg")}),t.TgZ(139,"mat-icon"),t._uU(140,"code"),t.qZA(),t.TgZ(141,"span"),t._uU(142,"SVG"),t.qZA()()()()(),t.TgZ(143,"div",28),t._UZ(144,"apx-chart",32,33),t.qZA()(),t.TgZ(146,"div",21)(147,"div",22)(148,"div")(149,"h3",23),t._uU(150," Duraci\xf3n de Contratos (Meses) "),t.qZA(),t.TgZ(151,"p",24),t._uU(152," Top 10 contratos con mayor duraci\xf3n "),t.qZA()(),t.TgZ(153,"div",5)(154,"button",25)(155,"mat-icon"),t._uU(156,"more_vert"),t.qZA()(),t.TgZ(157,"mat-menu",null,34)(159,"button",27),t.NdJ("click",function(){return o.downloadChart("topVigenciaMayor","png")}),t.TgZ(160,"mat-icon"),t._uU(161,"image"),t.qZA(),t.TgZ(162,"span"),t._uU(163,"PNG"),t.qZA()(),t.TgZ(164,"button",27),t.NdJ("click",function(){return o.downloadChart("topVigenciaMayor","svg")}),t.TgZ(165,"mat-icon"),t._uU(166,"code"),t.qZA(),t.TgZ(167,"span"),t._uU(168,"SVG"),t.qZA()()()()(),t.TgZ(169,"div",28),t._UZ(170,"apx-chart",35,36),t.qZA()(),t.TgZ(172,"div",21)(173,"div",22)(174,"div")(175,"h3",23),t._uU(176," Contratos de Menor Duraci\xf3n "),t.qZA(),t.TgZ(177,"p",24),t._uU(178," Top 8 contratos con menor duraci\xf3n "),t.qZA()(),t.TgZ(179,"div",5)(180,"button",25)(181,"mat-icon"),t._uU(182,"more_vert"),t.qZA()(),t.TgZ(183,"mat-menu",null,37)(185,"button",27),t.NdJ("click",function(){return o.downloadChart("topVigenciaMenor","png")}),t.TgZ(186,"mat-icon"),t._uU(187,"image"),t.qZA(),t.TgZ(188,"span"),t._uU(189,"PNG"),t.qZA()(),t.TgZ(190,"button",27),t.NdJ("click",function(){return o.downloadChart("topVigenciaMenor","svg")}),t.TgZ(191,"mat-icon"),t._uU(192,"code"),t.qZA(),t.TgZ(193,"span"),t._uU(194,"SVG"),t.qZA()()()()(),t.TgZ(195,"div",28),t._UZ(196,"apx-chart",38,39),t.qZA()(),t.TgZ(198,"div",21)(199,"div",22)(200,"div")(201,"h3",23),t._uU(202," Tipos de Contratos "),t.qZA(),t.TgZ(203,"p",24),t._uU(204," Distribuci\xf3n por tipo de contrato "),t.qZA()(),t.TgZ(205,"div",5)(206,"button",25)(207,"mat-icon"),t._uU(208,"more_vert"),t.qZA()(),t.TgZ(209,"mat-menu",null,40)(211,"button",27),t.NdJ("click",function(){return o.downloadChart("tiposContratos","png")}),t.TgZ(212,"mat-icon"),t._uU(213,"image"),t.qZA(),t.TgZ(214,"span"),t._uU(215,"PNG"),t.qZA()(),t.TgZ(216,"button",27),t.NdJ("click",function(){return o.downloadChart("tiposContratos","svg")}),t.TgZ(217,"mat-icon"),t._uU(218,"code"),t.qZA(),t.TgZ(219,"span"),t._uU(220,"SVG"),t.qZA()()()()(),t.TgZ(221,"div",28),t._UZ(222,"apx-chart",41,42),t.qZA()(),t.TgZ(224,"div",21)(225,"div",22)(226,"div")(227,"h3",23),t._uU(228," Contratos por Departamento "),t.qZA(),t.TgZ(229,"p",24),t._uU(230," Distribuci\xf3n por departamento "),t.qZA()(),t.TgZ(231,"div",5)(232,"button",25)(233,"mat-icon"),t._uU(234,"more_vert"),t.qZA()(),t.TgZ(235,"mat-menu",null,43)(237,"button",27),t.NdJ("click",function(){return o.downloadChart("departamentos","png")}),t.TgZ(238,"mat-icon"),t._uU(239,"image"),t.qZA(),t.TgZ(240,"span"),t._uU(241,"PNG"),t.qZA()(),t.TgZ(242,"button",27),t.NdJ("click",function(){return o.downloadChart("departamentos","svg")}),t.TgZ(243,"mat-icon"),t._uU(244,"code"),t.qZA(),t.TgZ(245,"span"),t._uU(246,"SVG"),t.qZA()()()()(),t.TgZ(247,"div",28),t._UZ(248,"apx-chart",29,44),t.qZA()(),t.TgZ(250,"div",21)(251,"div",22)(252,"div")(253,"h3",23),t._uU(254," Duraci\xf3n de Contratos "),t.qZA(),t.TgZ(255,"p",24),t._uU(256," Distribuci\xf3n por rango de duraci\xf3n "),t.qZA()(),t.TgZ(257,"div",5)(258,"button",25)(259,"mat-icon"),t._uU(260,"more_vert"),t.qZA()(),t.TgZ(261,"mat-menu",null,45)(263,"button",27),t.NdJ("click",function(){return o.downloadChart("duracionBuckets","png")}),t.TgZ(264,"mat-icon"),t._uU(265,"image"),t.qZA(),t.TgZ(266,"span"),t._uU(267,"PNG"),t.qZA()(),t.TgZ(268,"button",27),t.NdJ("click",function(){return o.downloadChart("duracionBuckets","svg")}),t.TgZ(269,"mat-icon"),t._uU(270,"code"),t.qZA(),t.TgZ(271,"span"),t._uU(272,"SVG"),t.qZA()()()()(),t.TgZ(273,"div",28),t._UZ(274,"apx-chart",29,46),t.qZA()(),t.TgZ(276,"div",21)(277,"div",22)(278,"div")(279,"h3",23),t._uU(280," Evoluci\xf3n Mensual "),t.qZA(),t.TgZ(281,"p",24),t._uU(282," Cantidad y monto de contratos por mes "),t.qZA()(),t.TgZ(283,"div",5)(284,"button",25)(285,"mat-icon"),t._uU(286,"more_vert"),t.qZA()(),t.TgZ(287,"mat-menu",null,47)(289,"button",27),t.NdJ("click",function(){return o.downloadChart("evolucionMensual","png")}),t.TgZ(290,"mat-icon"),t._uU(291,"image"),t.qZA(),t.TgZ(292,"span"),t._uU(293,"PNG"),t.qZA()(),t.TgZ(294,"button",27),t.NdJ("click",function(){return o.downloadChart("evolucionMensual","svg")}),t.TgZ(295,"mat-icon"),t._uU(296,"code"),t.qZA(),t.TgZ(297,"span"),t._uU(298,"SVG"),t.qZA()()()()(),t.TgZ(299,"div",28),t._UZ(300,"apx-chart",48,49),t.qZA()()()()()),2&r){const a=t.MAs(106),s=t.MAs(132),i=t.MAs(158),p=t.MAs(184),_=t.MAs(210),c=t.MAs(236),G=t.MAs(262),Q=t.MAs(288);t.xp6(18),t.Oqu(o.totalContratos),t.xp6(10),t.hij(" ",o.totalProveedores," "),t.xp6(10),t.hij(" ",o.totalDepartamentos," "),t.xp6(10),t.hij(" ",o.totalSuplementos," "),t.xp6(11),t.Oqu(o.contratosActivos),t.xp6(10),t.hij(" ",o.contratosVencidos," "),t.xp6(10),t.hij(" ",o.montoTotalContratos," "),t.xp6(10),t.hij(" ",o.montoTotalContratos," "),t.xp6(13),t.Q6J("matMenuTriggerFor",a),t.xp6(16),t.Q6J("series",o.topMontoMayorChartOptions.series)("chart",o.topMontoMayorChartOptions.chart)("xaxis",o.topMontoMayorChartOptions.xaxis)("yaxis",o.topMontoMayorChartOptions.yaxis)("plotOptions",o.topMontoMayorChartOptions.plotOptions)("dataLabels",o.topMontoMayorChartOptions.dataLabels)("colors",o.topMontoMayorChartOptions.colors)("grid",o.topMontoMayorChartOptions.grid)("tooltip",o.topMontoMayorChartOptions.tooltip),t.xp6(10),t.Q6J("matMenuTriggerFor",s),t.xp6(16),t.Q6J("series",o.topMontoMenorChartOptions.series)("chart",o.topMontoMenorChartOptions.chart)("labels",o.topMontoMenorChartOptions.labels)("colors",o.topMontoMenorChartOptions.colors)("dataLabels",o.topMontoMenorChartOptions.dataLabels)("plotOptions",o.topMontoMenorChartOptions.plotOptions)("legend",o.topMontoMenorChartOptions.legend)("tooltip",o.topMontoMenorChartOptions.tooltip),t.xp6(10),t.Q6J("matMenuTriggerFor",i),t.xp6(16),t.Q6J("series",o.topVigenciaMayorChartOptions.series)("chart",o.topVigenciaMayorChartOptions.chart)("xaxis",o.topVigenciaMayorChartOptions.xaxis)("yaxis",o.topVigenciaMayorChartOptions.yaxis)("dataLabels",o.topVigenciaMayorChartOptions.dataLabels)("stroke",o.topVigenciaMayorChartOptions.stroke)("fill",o.topVigenciaMayorChartOptions.fill)("colors",o.topVigenciaMayorChartOptions.colors)("grid",o.topVigenciaMayorChartOptions.grid)("tooltip",o.topVigenciaMayorChartOptions.tooltip),t.xp6(10),t.Q6J("matMenuTriggerFor",p),t.xp6(16),t.Q6J("series",o.topVigenciaMenorChartOptions.series)("chart",o.topVigenciaMenorChartOptions.chart)("xaxis",o.topVigenciaMenorChartOptions.xaxis)("yaxis",o.topVigenciaMenorChartOptions.yaxis)("dataLabels",o.topVigenciaMenorChartOptions.dataLabels)("stroke",o.topVigenciaMenorChartOptions.stroke)("markers",o.topVigenciaMenorChartOptions.markers)("colors",o.topVigenciaMenorChartOptions.colors)("grid",o.topVigenciaMenorChartOptions.grid)("tooltip",o.topVigenciaMenorChartOptions.tooltip)("legend",o.topVigenciaMenorChartOptions.legend),t.xp6(10),t.Q6J("matMenuTriggerFor",_),t.xp6(16),t.Q6J("series",o.tiposContratosChartOptions.series)("chart",o.tiposContratosChartOptions.chart)("xaxis",o.tiposContratosChartOptions.xaxis)("dataLabels",o.tiposContratosChartOptions.dataLabels)("plotOptions",o.tiposContratosChartOptions.plotOptions)("markers",o.tiposContratosChartOptions.markers)("fill",o.tiposContratosChartOptions.fill)("colors",o.tiposContratosChartOptions.colors)("tooltip",o.tiposContratosChartOptions.tooltip),t.xp6(10),t.Q6J("matMenuTriggerFor",c),t.xp6(16),t.Q6J("series",o.departamentosChartOptions.series)("chart",o.departamentosChartOptions.chart)("xaxis",o.departamentosChartOptions.xaxis)("yaxis",o.departamentosChartOptions.yaxis)("plotOptions",o.departamentosChartOptions.plotOptions)("dataLabels",o.departamentosChartOptions.dataLabels)("colors",o.departamentosChartOptions.colors)("grid",o.departamentosChartOptions.grid)("tooltip",o.departamentosChartOptions.tooltip),t.xp6(10),t.Q6J("matMenuTriggerFor",G),t.xp6(16),t.Q6J("series",o.duracionBucketsChartOptions.series)("chart",o.duracionBucketsChartOptions.chart)("xaxis",o.duracionBucketsChartOptions.xaxis)("yaxis",o.duracionBucketsChartOptions.yaxis)("plotOptions",o.duracionBucketsChartOptions.plotOptions)("dataLabels",o.duracionBucketsChartOptions.dataLabels)("colors",o.duracionBucketsChartOptions.colors)("grid",o.duracionBucketsChartOptions.grid)("tooltip",o.duracionBucketsChartOptions.tooltip),t.xp6(10),t.Q6J("matMenuTriggerFor",Q),t.xp6(16),t.Q6J("series",o.evolucionMensualChartOptions.series)("chart",o.evolucionMensualChartOptions.chart)("xaxis",o.evolucionMensualChartOptions.xaxis)("yaxis",o.evolucionMensualChartOptions.yaxis)("stroke",o.evolucionMensualChartOptions.stroke)("dataLabels",o.evolucionMensualChartOptions.dataLabels)("markers",o.evolucionMensualChartOptions.markers)("colors",o.evolucionMensualChartOptions.colors)("grid",o.evolucionMensualChartOptions.grid)("tooltip",o.evolucionMensualChartOptions.tooltip)("legend",o.evolucionMensualChartOptions.legend)}},dependencies:[g.ez,d.X,d.x,h.QW,m.Ps,m.Hw,C.ot,C.RK,u.Tx,u.VK,u.OP,u.p6],styles:[".dashboard-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh}.dashboard-header[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.2)}.dashboard-title[_ngcontent-%COMP%]{background:linear-gradient(45deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.chart-card[_ngcontent-%COMP%]{transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.chart-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 40px #0000001a}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.chart-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937}.dark[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{color:#f9fafb}.chart-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}.dark[_ngcontent-%COMP%]   .chart-subtitle[_ngcontent-%COMP%]{color:#d1d5db}.download-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;border:none;cursor:pointer;transition:all .2s ease}.download-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.download-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.stats-card[_ngcontent-%COMP%]{transition:all .3s ease}.stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000001a}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:50%}.stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;opacity:.8}@media (max-width: 768px){.chart-card[_ngcontent-%COMP%]{margin-bottom:1.5rem}.dashboard-title[_ngcontent-%COMP%]{font-size:2rem}.chart-title[_ngcontent-%COMP%]{font-size:1rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}}.loading-chart[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:300px}.loading-chart[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f4f6;border-top:4px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.apx-chart[_ngcontent-%COMP%]   .apexcharts-canvas[_ngcontent-%COMP%]{margin:0 auto}.apx-chart[_ngcontent-%COMP%]   .apexcharts-legend[_ngcontent-%COMP%]{justify-content:center!important}.dark[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{background:rgba(31,41,55,.8);border-color:#4b55634d}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:1.5rem}@media (max-width: 768px){.charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return n})();var w=l(3018);const D=["totalProveedoresChart"],z=["proveedoresByTypeChart"],E=["proveedoresByStatusChart"],U=["proveedoresByTipoEmpresaChart"],j=["proveedoresByMinisterioChart"],q=["proveedoresByProvinciaChart"],F=["proveedoresByMunicipioChart"],L=["proveedoresByMonthChart"];let V=(()=>{class n{constructor(e){this.proveedorService=e,this.proveedores=[],this.isLoading=!0,this.chartsInitialized=!1,this.totalProveedoresChartOptions={},this.proveedoresByTypeChartOptions={},this.proveedoresByStatusChartOptions={},this.proveedoresByTipoEmpresaChartOptions={},this.proveedoresByMinisterioChartOptions={},this.proveedoresByProvinciaChartOptions={},this.proveedoresByMunicipioChartOptions={},this.proveedoresByMonthChartOptions={},this.colorPalette=["#90A4AE","#B0BEC5","#CFD8DC","#E1E8ED","#2196F3","#64B5F6","#BBDEFB","#ECEFF1"]}ngOnInit(){this.initializeCharts(),this.proveedorService.getDashboardproveedor().subscribe({next:e=>{console.log("Datos recibidos del servicio proveedor:",e),this.proveedores=e,this.updateCharts(),this.isLoading=!1,this.chartsInitialized=!0},error:e=>{console.error("Error fetching dashboard proveedores:",e),this.isLoading=!1,this.initializeEmptyCharts()}})}initializeCharts(){this.initializeTotalProveedoresChart(),this.initializeProveedoresByTypeChart(),this.initializeProveedoresByStatusChart(),this.initializeProveedoresByTipoEmpresaChart(),this.initializeProveedoresByMinisterioChart(),this.initializeProveedoresByProvinciaChart(),this.initializeProveedoresByMunicipioChart(),this.initializeProveedoresByMonthChart()}initializeEmptyCharts(){this.chartsInitialized=!0}updateCharts(){this.updateTotalProveedoresChart(),this.updateProveedoresByTypeChart(),this.updateProveedoresByStatusChart(),this.updateProveedoresByTipoEmpresaChart(),this.updateProveedoresByMinisterioChart(),this.updateProveedoresByProvinciaChart(),this.updateProveedoresByMunicipioChart(),this.updateProveedoresByMonthChart()}initializeTotalProveedoresChart(){this.totalProveedoresChartOptions={series:[0],chart:{type:"radialBar",height:320,toolbar:{show:!1}},labels:["Total Proveedores"],colors:[this.colorPalette[5]],plotOptions:{radialBar:{hollow:{size:"70%"},dataLabels:{name:{fontSize:"18px",color:"#64748B",fontWeight:"bold"},value:{fontSize:"28px",color:"#1E293B",fontWeight:"bold"}}}},fill:{type:"gradient",gradient:{shade:"light",type:"horizontal",shadeIntensity:.5,gradientToColors:[this.colorPalette[4]],opacityFrom:.9,opacityTo:.7,stops:[0,100]}},stroke:{lineCap:"round"},tooltip:{enabled:!0,theme:"dark"}}}initializeProveedoresByTypeChart(){this.proveedoresByTypeChartOptions={series:[],chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},xaxis:{categories:[],labels:{style:{colors:"#64748B",fontSize:"12px"}}},colors:[this.colorPalette[1]],plotOptions:{bar:{horizontal:!1,columnWidth:"70%",borderRadius:4}},dataLabels:{enabled:!1},tooltip:{theme:"light"}}}updateTotalProveedoresChart(){this.totalProveedoresChartOptions={...this.totalProveedoresChartOptions,series:[this.proveedores.length]},console.log("Opciones totalProveedoresChart:",this.totalProveedoresChartOptions)}updateProveedoresByTypeChart(){const e=this.countByProperty("tipo","nombre_tipo",this.proveedores);this.proveedoresByTypeChartOptions={...this.proveedoresByTypeChartOptions,series:[{name:"Cantidad",data:e.values}],xaxis:{categories:e.keys}},console.log("Opciones proveedoresByTypeChart:",this.proveedoresByTypeChartOptions)}initializeProveedoresByStatusChart(){this.proveedoresByStatusChartOptions={series:[],chart:{type:"pie",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},labels:[],colors:this.colorPalette,dataLabels:{enabled:!0},tooltip:{theme:"light"},legend:{position:"bottom",fontSize:"12px",labels:{colors:"#64748B"}}}}updateProveedoresByStatusChart(){const e=this.countByProperty("estado","nombre_estado",this.proveedores);this.proveedoresByStatusChartOptions={...this.proveedoresByStatusChartOptions,series:e.values,labels:e.keys},console.log("Opciones proveedoresByStatusChart:",this.proveedoresByStatusChartOptions)}updateProveedoresByTipoEmpresaChart(){const e=this.countByProperty("tipo_empresa","nombre_tipo_empresa",this.proveedores);this.proveedoresByTipoEmpresaChartOptions={...this.proveedoresByTipoEmpresaChartOptions,series:[{name:"Cantidad",data:e.values}],xaxis:{categories:e.keys}},console.log("Opciones proveedoresByTipoEmpresaChart:",this.proveedoresByTipoEmpresaChartOptions)}updateProveedoresByMinisterioChart(){const e=this.countByProperty("ministerio","nombre_ministerio",this.proveedores);this.proveedoresByMinisterioChartOptions={...this.proveedoresByMinisterioChartOptions,series:[{name:"Cantidad",data:e.values}],xaxis:{categories:e.keys}},console.log("Opciones proveedoresByMinisterioChart:",this.proveedoresByMinisterioChartOptions)}updateProveedoresByProvinciaChart(){const e=this.countByProperty("provincia","nombre_provincia",this.proveedores);this.proveedoresByProvinciaChartOptions={...this.proveedoresByProvinciaChartOptions,series:[{name:"Cantidad",data:e.values}],xaxis:{categories:e.keys}},console.log("Opciones proveedoresByProvinciaChart:",this.proveedoresByProvinciaChartOptions)}updateProveedoresByMunicipioChart(){const e=this.countByProperty("municipio","nombre_municipio",this.proveedores);this.proveedoresByMunicipioChartOptions={...this.proveedoresByMunicipioChartOptions,series:[{name:"Cantidad",data:e.values}],xaxis:{categories:e.keys}},console.log("Opciones proveedoresByMunicipioChart:",this.proveedoresByMunicipioChartOptions)}initializeProveedoresByMonthChart(){this.proveedoresByMonthChartOptions={series:[],chart:{type:"line",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},xaxis:{categories:[]},colors:[this.colorPalette[6]],stroke:{curve:"smooth"},dataLabels:{enabled:!1},tooltip:{theme:"light"}}}updateProveedoresByMonthChart(){const e=this.countByMonth(this.proveedores);this.proveedoresByMonthChartOptions={...this.proveedoresByMonthChartOptions,series:[{name:"Cantidad",data:e.values}],xaxis:{categories:e.keys}},console.log("Opciones proveedoresByMonthChart:",this.proveedoresByMonthChartOptions)}countByProperty(e,r,o){const a={};return o.forEach(s=>{const i=s[e]?.[r]||"Desconocido";a[i]=(a[i]||0)+1}),{keys:Object.keys(a),values:Object.values(a)}}countByMonth(e){const r={};return e.forEach(o=>{const s=new Date(o.fecha_registro).toLocaleDateString("es-ES",{year:"numeric",month:"short"});r[s]=(r[s]||0)+1}),{keys:Object.keys(r),values:Object.values(r)}}initializeProveedoresByTipoEmpresaChart(){this.proveedoresByTipoEmpresaChartOptions={series:[],chart:{type:"bar",height:380,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150}},background:"transparent",dropShadow:{enabled:!0,color:"#000",top:3,left:2,blur:4,opacity:.1}},xaxis:{categories:[],labels:{style:{colors:"#64748B",fontSize:"12px",fontWeight:500},rotate:-45,rotateAlways:!1},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"}}},colors:["#3B82F6"],plotOptions:{bar:{horizontal:!1,columnWidth:"65%",borderRadius:8,borderRadiusApplication:"end",borderRadiusWhenStacked:"last",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(e){return e.toString()},offsetY:-20,style:{fontSize:"12px",colors:["#304758"],fontWeight:"bold"}},tooltip:{theme:"light",style:{fontSize:"12px"},y:{formatter:function(e){return e+" proveedores"}}},grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:4,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.25,gradientToColors:["#60A5FA"],inverseColors:!1,opacityFrom:.85,opacityTo:.55,stops:[50,0,100]}},stroke:{show:!0,width:2,colors:["transparent"]},title:{text:"Proveedores por Tipo de Empresa",align:"left",style:{fontSize:"16px",fontWeight:"bold",color:"#1E293B"}}}}initializeProveedoresByMinisterioChart(){this.proveedoresByMinisterioChartOptions={series:[],chart:{type:"bar",height:380,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150}},background:"transparent",dropShadow:{enabled:!0,color:"#000",top:3,left:2,blur:4,opacity:.1}},xaxis:{categories:[],labels:{style:{colors:"#64748B",fontSize:"12px",fontWeight:500},rotate:-45,rotateAlways:!1},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"}}},colors:["#10B981"],plotOptions:{bar:{horizontal:!1,columnWidth:"65%",borderRadius:8,borderRadiusApplication:"end",borderRadiusWhenStacked:"last",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(e){return e.toString()},offsetY:-20,style:{fontSize:"12px",colors:["#304758"],fontWeight:"bold"}},tooltip:{theme:"light",style:{fontSize:"12px"},y:{formatter:function(e){return e+" proveedores"}}},grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:4,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.25,gradientToColors:["#34D399"],inverseColors:!1,opacityFrom:.85,opacityTo:.55,stops:[50,0,100]}},stroke:{show:!0,width:2,colors:["transparent"]},title:{text:"Proveedores por Ministerio",align:"left",style:{fontSize:"16px",fontWeight:"bold",color:"#1E293B"}}}}initializeProveedoresByProvinciaChart(){this.proveedoresByProvinciaChartOptions={series:[],chart:{type:"bar",height:380,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150}},background:"transparent",dropShadow:{enabled:!0,color:"#000",top:3,left:2,blur:4,opacity:.1}},xaxis:{categories:[],labels:{style:{colors:"#64748B",fontSize:"12px",fontWeight:500},rotate:-45,rotateAlways:!1},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"}}},colors:["#8B5CF6"],plotOptions:{bar:{horizontal:!1,columnWidth:"65%",borderRadius:8,borderRadiusApplication:"end",borderRadiusWhenStacked:"last",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(e){return e.toString()},offsetY:-20,style:{fontSize:"12px",colors:["#304758"],fontWeight:"bold"}},tooltip:{theme:"light",style:{fontSize:"12px"},y:{formatter:function(e){return e+" proveedores"}}},grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:4,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.25,gradientToColors:["#A78BFA"],inverseColors:!1,opacityFrom:.85,opacityTo:.55,stops:[50,0,100]}},stroke:{show:!0,width:2,colors:["transparent"]},title:{text:"Proveedores por Provincia",align:"left",style:{fontSize:"16px",fontWeight:"bold",color:"#1E293B"}}}}initializeProveedoresByMunicipioChart(){this.proveedoresByMunicipioChartOptions={series:[],chart:{type:"bar",height:380,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150}},background:"transparent",dropShadow:{enabled:!0,color:"#000",top:3,left:2,blur:4,opacity:.1}},xaxis:{categories:[],labels:{style:{colors:"#64748B",fontSize:"12px",fontWeight:500},rotate:-45,rotateAlways:!1},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#64748B",fontSize:"12px"}}},colors:["#F59E0B"],plotOptions:{bar:{horizontal:!1,columnWidth:"65%",borderRadius:8,borderRadiusApplication:"end",borderRadiusWhenStacked:"last",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(e){return e.toString()},offsetY:-20,style:{fontSize:"12px",colors:["#304758"],fontWeight:"bold"}},tooltip:{theme:"light",style:{fontSize:"12px"},y:{formatter:function(e){return e+" proveedores"}}},grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:4,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.25,gradientToColors:["#FCD34D"],inverseColors:!1,opacityFrom:.85,opacityTo:.55,stops:[50,0,100]}},stroke:{show:!0,width:2,colors:["transparent"]},title:{text:"Proveedores por Municipio",align:"left",style:{fontSize:"16px",fontWeight:"bold",color:"#1E293B"}}}}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(w.z))};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-proveedor-dashboard"]],viewQuery:function(r,o){if(1&r&&(t.Gf(D,5),t.Gf(z,5),t.Gf(E,5),t.Gf(U,5),t.Gf(j,5),t.Gf(q,5),t.Gf(F,5),t.Gf(L,5)),2&r){let a;t.iGM(a=t.CRH())&&(o.totalProveedoresChart=a.first),t.iGM(a=t.CRH())&&(o.proveedoresByTypeChart=a.first),t.iGM(a=t.CRH())&&(o.proveedoresByStatusChart=a.first),t.iGM(a=t.CRH())&&(o.proveedoresByTipoEmpresaChart=a.first),t.iGM(a=t.CRH())&&(o.proveedoresByMinisterioChart=a.first),t.iGM(a=t.CRH())&&(o.proveedoresByProvinciaChart=a.first),t.iGM(a=t.CRH())&&(o.proveedoresByMunicipioChart=a.first),t.iGM(a=t.CRH())&&(o.proveedoresByMonthChart=a.first)}},standalone:!0,features:[t.jDz],decls:39,vars:25,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400","border-2","rounded-2xl"],[1,"dashboard-container",2,"width","100%"],[1,"chart-grid",2,"display","flex","gap","20px","width","100%"],[1,"chart-container",2,"flex","1 1 33%"],[3,"series","chart","labels","plotOptions"],[3,"series","chart","xaxis"],[3,"series","chart","labels"],[1,"chart-grid",2,"display","flex","gap","20px","width","100%","margin-top","20px"],[1,"chart-container",2,"flex","1 1 50%"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Total Proveedores"),t.qZA(),t._UZ(8,"apx-chart",6),t.qZA(),t.TgZ(9,"div",5)(10,"h2"),t._uU(11,"Proveedores por Tipo"),t.qZA(),t._UZ(12,"apx-chart",7),t.qZA(),t.TgZ(13,"div",5)(14,"h2"),t._uU(15,"Proveedores por Estado"),t.qZA(),t._UZ(16,"apx-chart",8),t.qZA()(),t.TgZ(17,"div",9)(18,"div",5)(19,"h2"),t._uU(20,"Proveedores por Tipo de Empresa"),t.qZA(),t._UZ(21,"apx-chart",7),t.qZA(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24,"Proveedores por Ministerio"),t.qZA(),t._UZ(25,"apx-chart",7),t.qZA(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28,"Proveedores por Provincia"),t.qZA(),t._UZ(29,"apx-chart",7),t.qZA()(),t.TgZ(30,"div",9)(31,"div",10)(32,"h2"),t._uU(33,"Proveedores por Municipio"),t.qZA(),t._UZ(34,"apx-chart",7),t.qZA(),t.TgZ(35,"div",10)(36,"h2"),t._uU(37,"Proveedores por Mes"),t.qZA(),t._UZ(38,"apx-chart",7),t.qZA()()()()()()),2&r&&(t.xp6(8),t.Q6J("series",o.totalProveedoresChartOptions.series)("chart",o.totalProveedoresChartOptions.chart)("labels",o.totalProveedoresChartOptions.labels)("plotOptions",o.totalProveedoresChartOptions.plotOptions),t.xp6(4),t.Q6J("series",o.proveedoresByTypeChartOptions.series)("chart",o.proveedoresByTypeChartOptions.chart)("xaxis",o.proveedoresByTypeChartOptions.xaxis),t.xp6(4),t.Q6J("series",o.proveedoresByStatusChartOptions.series)("chart",o.proveedoresByStatusChartOptions.chart)("labels",o.proveedoresByStatusChartOptions.labels),t.xp6(5),t.Q6J("series",o.proveedoresByTipoEmpresaChartOptions.series)("chart",o.proveedoresByTipoEmpresaChartOptions.chart)("xaxis",o.proveedoresByTipoEmpresaChartOptions.xaxis),t.xp6(4),t.Q6J("series",o.proveedoresByMinisterioChartOptions.series)("chart",o.proveedoresByMinisterioChartOptions.chart)("xaxis",o.proveedoresByMinisterioChartOptions.xaxis),t.xp6(4),t.Q6J("series",o.proveedoresByProvinciaChartOptions.series)("chart",o.proveedoresByProvinciaChartOptions.chart)("xaxis",o.proveedoresByProvinciaChartOptions.xaxis),t.xp6(5),t.Q6J("series",o.proveedoresByMunicipioChartOptions.series)("chart",o.proveedoresByMunicipioChartOptions.chart)("xaxis",o.proveedoresByMunicipioChartOptions.xaxis),t.xp6(4),t.Q6J("series",o.proveedoresByMonthChartOptions.series)("chart",o.proveedoresByMonthChartOptions.chart)("xaxis",o.proveedoresByMonthChartOptions.xaxis))},dependencies:[g.ez,d.X,d.x,h.QW,m.Ps,C.ot,u.Tx],styles:[".dashboard-container[_ngcontent-%COMP%]{width:100%;padding:1.5rem}.chart-grid[_ngcontent-%COMP%]{display:grid;width:100%;gap:1.5rem}.chart-grid.three-cols[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.chart-grid.two-cols[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.chart-container[_ngcontent-%COMP%]{background:white;padding:1rem;box-shadow:0 1px 3px #0000001a}h2[_ngcontent-%COMP%]{font-size:1.25rem}"]})}return n})();var v=l(8645);let W=(()=>{class n{constructor(){this._unsubscribeAll=new v.x}ngOnInit(){this.totalSuplimentosChartOptions={chart:{type:"radialBar",height:200},series:[60],labels:["Total Suplimentos"],plotOptions:{radialBar:{hollow:{size:"60%"}}}},this.suplimentosByTypeChartOptions={chart:{type:"bar",height:200},series:[{name:"Suplimentos",data:[30,20,10,15]}],xaxis:{categories:["Tipo X","Tipo Y","Tipo Z","Tipo W"]}},this.suplimentosByStatusChartOptions={chart:{type:"pie",height:200},series:[50,30,20],labels:["Activo","Pendiente","Cancelado"]},this.suplimentosByMonthChartOptions={chart:{type:"area",height:200},series:[{name:"Suplimentos",data:[3,6,9,12,15,18,21,24,27,30,33,36]}],xaxis:{categories:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]}}}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(r){return new(r||n)};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-suplimento"]],standalone:!0,features:[t.jDz],decls:28,vars:13,consts:[[1,"p-6","space-y-6"],[1,"text-3xl","font-bold","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"p-4"],[1,"text-xl","font-semibold","mb-2"],[3,"series","chart","labels","plotOptions"],[3,"series","chart","xaxis"],[3,"series","chart","labels"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Dashboard Suplimento"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-card",3)(5,"h2",4),t._uU(6,"Total Suplimentos"),t.qZA(),t.TgZ(7,"p"),t._uU(8,"Resumen del total de suplimentos activos."),t.qZA(),t._UZ(9,"apx-chart",5),t.qZA(),t.TgZ(10,"mat-card",3)(11,"h2",4),t._uU(12,"Suplimentos por Tipo"),t.qZA(),t.TgZ(13,"p"),t._uU(14,"Distribuci\xf3n de suplimentos por tipo."),t.qZA(),t._UZ(15,"apx-chart",6),t.qZA(),t.TgZ(16,"mat-card",3)(17,"h2",4),t._uU(18,"Suplimentos por Estado"),t.qZA(),t.TgZ(19,"p"),t._uU(20,"Estado actual de los suplimentos."),t.qZA(),t._UZ(21,"apx-chart",7),t.qZA(),t.TgZ(22,"mat-card",3)(23,"h2",4),t._uU(24,"Suplimentos por Mes"),t.qZA(),t.TgZ(25,"p"),t._uU(26,"Suplimentos registrados por mes."),t.qZA(),t._UZ(27,"apx-chart",6),t.qZA()()()),2&r&&(t.xp6(9),t.Q6J("series",o.totalSuplimentosChartOptions.series)("chart",o.totalSuplimentosChartOptions.chart)("labels",o.totalSuplimentosChartOptions.labels)("plotOptions",o.totalSuplimentosChartOptions.plotOptions),t.xp6(6),t.Q6J("series",o.suplimentosByTypeChartOptions.series)("chart",o.suplimentosByTypeChartOptions.chart)("xaxis",o.suplimentosByTypeChartOptions.xaxis),t.xp6(6),t.Q6J("series",o.suplimentosByStatusChartOptions.series)("chart",o.suplimentosByStatusChartOptions.chart)("labels",o.suplimentosByStatusChartOptions.labels),t.xp6(6),t.Q6J("series",o.suplimentosByMonthChartOptions.series)("chart",o.suplimentosByMonthChartOptions.chart)("xaxis",o.suplimentosByMonthChartOptions.xaxis))},dependencies:[g.ez,d.X,d.x,h.QW,h.a8],encapsulation:2})}return n})();var R=l(9773);const M=[{path:"dashboard-contrato",component:A},{path:"dashboard-proveedor",component:V},{path:"dashboard-suplimento",component:W},{path:"dashboard-ejecucion",component:(()=>{class n{constructor(e){this.contratoService=e,this._unsubscribeAll=new v.x,this.contratos=[],this.totalEjecucionChartOptions=this.getDefaultRadialOptions(),this.ejecucionByTypeChartOptions=this.getDefaultBarOptions(),this.ejecucionByStatusChartOptions=this.getDefaultPieOptions(),this.ejecucionByMonthChartOptions=this.getDefaultAreaOptions(),this.contratosTopEjecucionesChartOptions=this.getDefaultModernBarOptions(),this.suplementosTopEjecucionesChartOptions=this.getDefaultModernBarOptions(),this.top10ProveedoresMayorMontoChartOptions=this.getDefaultModernBarOptions(),this.top10ProveedoresMenorMontoChartOptions=this.getDefaultModernBarOptions(),this.top10ProveedoresContratoSuplementoMayorMontoChartOptions=this.getDefaultModernBarOptions(),this.top10ProveedoresContratoSuplementoMenorMontoChartOptions=this.getDefaultModernBarOptions()}ngOnInit(){this.loadDashboardData()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadDashboardData(){this.contratoService.getDashboardEjecucion().pipe((0,R.R)(this._unsubscribeAll)).subscribe({next:e=>{console.log("Datos recibidos del servicio:",e),this.contratos=e.map(r=>({...r,monto_total:(r.valor_cup||0)+(r.valor_usd||0)+(r.monto_vencimiento_cup||0)+(r.monto_vencimiento_usd||0)+(r.monto_vencimiento_cl||0),monto_ejecutado:r.monto_ejecutado||1e5*Math.random(),cantidad_ejecuciones:r.cantidad_ejecuciones||Math.floor(10*Math.random())+1})),this.initializeCharts()},error:e=>{console.error("Error al cargar datos del dashboard:",e)}})}initializeCharts(){this.setupTotalEjecucionChart(),this.setupEjecucionByTypeChart(),this.setupEjecucionByStatusChart(),this.setupEjecucionByMonthChart(),this.setupContratosTopEjecucionesChart(),this.setupSuplementosTopEjecucionesChart(),this.setupTop10ProveedoresMayorMontoChart(),this.setupTop10ProveedoresMenorMontoChart(),this.setupTop10ProveedoresContratoSuplementoMayorMontoChart(),this.setupTop10ProveedoresContratoSuplementoMenorMontoChart()}getDefaultRadialOptions(){return{chart:{type:"radialBar",height:300,sparkline:{enabled:!1},background:"transparent"},series:[0],labels:["Cargando..."],plotOptions:{radialBar:{hollow:{size:"65%"},track:{background:"#f1f5f9",strokeWidth:"100%"},dataLabels:{name:{fontSize:"14px",color:"#64748b",fontWeight:"500"},value:{fontSize:"24px",color:"#0f172a",fontWeight:"700"}}}},colors:["#6366f1"],stroke:{lineCap:"round"}}}getDefaultBarOptions(){return{chart:{type:"bar",height:350,toolbar:{show:!1},background:"transparent"},series:[{name:"Datos",data:[]}],xaxis:{categories:[]},colors:["#6366f1"],plotOptions:{bar:{borderRadius:6,horizontal:!1,borderRadiusApplication:"end",borderRadiusWhenStacked:"last"}},dataLabels:{enabled:!1},grid:{show:!1}}}getDefaultModernBarOptions(){return{chart:{type:"bar",height:400,toolbar:{show:!1},background:"transparent",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150}}},series:[{name:"Datos",data:[]}],xaxis:{categories:[],labels:{rotate:-45,style:{colors:"#64748b",fontSize:"11px",fontWeight:"500"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#64748b",fontSize:"12px",fontWeight:"500"}}},colors:["#6366f1"],plotOptions:{bar:{borderRadius:12,columnWidth:"65%",borderRadiusApplication:"end",borderRadiusWhenStacked:"last",dataLabels:{position:"top"}}},dataLabels:{enabled:!1,style:{fontSize:"11px",fontWeight:"600",colors:["#ffffff"]}},grid:{show:!0,borderColor:"#f1f5f9",strokeDashArray:3,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}}},tooltip:{theme:"dark",style:{fontSize:"13px",fontFamily:"Inter, sans-serif"},y:{formatter:e=>`$${e.toLocaleString()}`}}}}getDefaultPieOptions(){return{chart:{type:"donut",height:350,background:"transparent"},series:[],labels:[],colors:["#6366f1","#8b5cf6","#06b6d4","#10b981"],plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,total:{show:!0,fontSize:"14px",color:"#64748b"}}}}},legend:{show:!1}}}getDefaultAreaOptions(){return{chart:{type:"area",height:350,toolbar:{show:!1},background:"transparent"},series:[{name:"Datos",data:[]}],xaxis:{categories:[]},colors:["#6366f1"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.3,opacityTo:.1,stops:[0,90,100]}},stroke:{curve:"smooth",width:3},grid:{show:!1}}}setupTotalEjecucionChart(){const e=this.contratos.length,r=this.contratos.filter(a=>"ejecutado"===a.estado).length,o=e>0?Math.round(r/e*100):0;this.totalEjecucionChartOptions={chart:{type:"radialBar",height:280,sparkline:{enabled:!1},background:"transparent"},series:[o],labels:["Ejecuci\xf3n Total"],plotOptions:{radialBar:{hollow:{size:"65%"},track:{background:"#f1f5f9",strokeWidth:"100%",margin:10},dataLabels:{name:{fontSize:"14px",color:"#64748b",fontWeight:"500",offsetY:10},value:{fontSize:"32px",color:"#0f172a",fontWeight:"700",offsetY:-10,formatter:a=>`${a}%`}}}},colors:["#6366f1"],stroke:{lineCap:"round"}}}setupEjecucionByTypeChart(){const e=this.contratos.reduce((r,o)=>(r[o.tipo_contrato.nombre_tipo_contrato]=(r[o.tipo_contrato.nombre_tipo_contrato]||0)+1,r),{});this.ejecucionByTypeChartOptions={chart:{type:"bar",height:350,toolbar:{show:!1},background:"transparent"},series:[{name:"Contratos",data:Object.values(e)}],xaxis:{categories:Object.keys(e),labels:{style:{colors:"#64748b",fontSize:"12px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#64748b",fontSize:"12px"}}},colors:["#6366f1"],plotOptions:{bar:{borderRadius:8,horizontal:!1,columnWidth:"50%",borderRadiusApplication:"end"}},dataLabels:{enabled:!1},grid:{show:!1},tooltip:{theme:"dark",style:{fontSize:"12px"}}}}setupEjecucionByStatusChart(){const e=this.contratos.reduce((r,o)=>(r[o.estado]=(r[o.estado]||0)+1,r),{});this.ejecucionByStatusChartOptions={chart:{type:"donut",height:350,background:"transparent"},series:Object.values(e),labels:Object.keys(e),colors:["#6366f1","#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444"],plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,total:{show:!0,fontSize:"16px",color:"#0f172a",fontWeight:"600",label:"Total",formatter:()=>this.contratos.length.toString()}}}}},dataLabels:{enabled:!0,style:{fontSize:"12px",fontWeight:"600"}},legend:{show:!1},stroke:{width:0},tooltip:{theme:"dark",style:{fontSize:"12px"}}}}setupEjecucionByMonthChart(){const e=this.getEjecucionPorMes();this.ejecucionByMonthChartOptions={chart:{type:"area",height:350,toolbar:{show:!1},background:"transparent"},series:[{name:"Monto Ejecutado",data:e.values}],xaxis:{categories:e.months,labels:{style:{colors:"#64748b",fontSize:"12px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#64748b",fontSize:"12px"},formatter:r=>`$${r.toLocaleString()}`}},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,90,100]}},colors:["#6366f1"],stroke:{curve:"smooth",width:3},grid:{show:!1},tooltip:{theme:"dark",style:{fontSize:"12px"}}}}setupContratosTopEjecucionesChart(){const e=this.contratos.filter(r=>!r.no_contrato.toString().toLowerCase().includes("sup")).sort((r,o)=>(o.cantidad_ejecuciones||0)-(r.cantidad_ejecuciones||0)).slice(0,10);this.contratosTopEjecucionesChartOptions={...this.getDefaultModernBarOptions(),series:[{name:"Cantidad de Ejecuciones",data:e.map(r=>r.cantidad_ejecuciones||0)}],xaxis:{...this.getDefaultModernBarOptions().xaxis,categories:e.map(r=>`${r.no_contrato}`)},colors:["#10b981"],title:{text:"Top 10 Contratos con Mayor Cantidad de Ejecuciones",align:"center",style:{fontSize:"16px",fontWeight:"600",color:"#0f172a"}},tooltip:{...this.getDefaultModernBarOptions().tooltip,y:{formatter:r=>`${r} ejecuciones`}}}}setupSuplementosTopEjecucionesChart(){const e=this.contratos.filter(r=>r.no_contrato.toString().toLowerCase().includes("sup")).sort((r,o)=>(o.cantidad_ejecuciones||0)-(r.cantidad_ejecuciones||0)).slice(0,10);this.suplementosTopEjecucionesChartOptions={...this.getDefaultModernBarOptions(),series:[{name:"Cantidad de Ejecuciones",data:e.map(r=>r.cantidad_ejecuciones||0)}],xaxis:{...this.getDefaultModernBarOptions().xaxis,categories:e.map(r=>`${r.no_contrato}`)},colors:["#8b5cf6"],title:{text:"Top 10 Suplementos con Mayor Cantidad de Ejecuciones",align:"center",style:{fontSize:"16px",fontWeight:"600",color:"#0f172a"}},tooltip:{...this.getDefaultModernBarOptions().tooltip,y:{formatter:r=>`${r} ejecuciones`}}}}setupTop10ProveedoresMayorMontoChart(){const r=this.getProveedoresData().sort((o,a)=>a.monto_ejecutado-o.monto_ejecutado).slice(0,10);this.top10ProveedoresMayorMontoChartOptions={...this.getDefaultModernBarOptions(),series:[{name:"Monto Ejecutado",data:r.map(o=>o.monto_ejecutado)}],xaxis:{...this.getDefaultModernBarOptions().xaxis,categories:r.map(o=>`${o.proveedor} - ${o.no_contrato}`)},colors:["#f59e0b"],title:{text:"Top 10 Proveedores con Mayor Monto Ejecutado",align:"center",style:{fontSize:"16px",fontWeight:"600",color:"#0f172a"}}}}setupTop10ProveedoresMenorMontoChart(){const r=this.getProveedoresData().sort((o,a)=>o.monto_ejecutado-a.monto_ejecutado).slice(0,10);this.top10ProveedoresMenorMontoChartOptions={...this.getDefaultModernBarOptions(),series:[{name:"Monto Ejecutado",data:r.map(o=>o.monto_ejecutado)}],xaxis:{...this.getDefaultModernBarOptions().xaxis,categories:r.map(o=>`${o.proveedor} - ${o.no_contrato}`)},colors:["#ef4444"],title:{text:"Top 10 Proveedores con Menor Monto Ejecutado",align:"center",style:{fontSize:"16px",fontWeight:"600",color:"#0f172a"}}}}setupTop10ProveedoresContratoSuplementoMayorMontoChart(){const r=this.getProveedoresConSuplemento().sort((o,a)=>a.monto_ejecutado-o.monto_ejecutado).slice(0,10);this.top10ProveedoresContratoSuplementoMayorMontoChartOptions={...this.getDefaultModernBarOptions(),series:[{name:"Monto Ejecutado",data:r.map(o=>o.monto_ejecutado)}],xaxis:{...this.getDefaultModernBarOptions().xaxis,categories:r.map(o=>`${o.proveedor} - ${o.no_contrato}${o.no_suplemento?" / "+o.no_suplemento:""}`)},colors:["#06b6d4"],title:{text:"Top 10 Proveedores (Contrato + Suplemento) Mayor Monto",align:"center",style:{fontSize:"16px",fontWeight:"600",color:"#0f172a"}}}}setupTop10ProveedoresContratoSuplementoMenorMontoChart(){const r=this.getProveedoresConSuplemento().sort((o,a)=>o.monto_ejecutado-a.monto_ejecutado).slice(0,10);this.top10ProveedoresContratoSuplementoMenorMontoChartOptions={...this.getDefaultModernBarOptions(),series:[{name:"Monto Ejecutado",data:r.map(o=>o.monto_ejecutado)}],xaxis:{...this.getDefaultModernBarOptions().xaxis,categories:r.map(o=>`${o.proveedor} - ${o.no_contrato}${o.no_suplemento?" / "+o.no_suplemento:""}`)},colors:["#f97316"],title:{text:"Top 10 Proveedores (Contrato + Suplemento) Menor Monto",align:"center",style:{fontSize:"16px",fontWeight:"600",color:"#0f172a"}}}}getProveedoresData(){return this.contratos.map(e=>({proveedor:e.proveedor?.nombre||"Sin proveedor",no_contrato:e.no_contrato.toString(),monto_ejecutado:e.monto_ejecutado||0,cantidad_ejecuciones:e.cantidad_ejecuciones||0}))}getProveedoresConSuplemento(){const e=new Map;return this.contratos.forEach(r=>{const o=r.no_contrato.toString().split("-")[0],a=r.proveedor?.nombre||"Sin proveedor",s=`${a}-${o}`;e.has(s)||e.set(s,{proveedor:a,no_contrato:o,monto_ejecutado:0,cantidad_ejecuciones:0});const i=e.get(s);i.monto_ejecutado+=r.monto_ejecutado||0,i.cantidad_ejecuciones+=r.cantidad_ejecuciones||0,r.no_contrato.toString().toLowerCase().includes("sup")&&(i.no_suplemento=r.no_contrato.toString())}),Array.from(e.values()).filter(r=>r.no_suplemento)}getEjecucionPorMes(){const r=new Array(12).fill(0);return this.contratos.forEach(o=>{if(o.fecha_firmado){const s=new Date(o.fecha_firmado).getMonth();s>=0&&s<12&&(r[s]+=o.monto_ejecutado||0)}}),{months:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],values:r}}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(y.d))};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-ejecucion"]],standalone:!0,features:[t.jDz],decls:21,vars:24,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400","border-2","rounded-2xl"],[1,"p-6","space-y-6","w-full"],[1,"text-3xl","font-bold","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","w-full","mt-6"],[1,"p-4"],[3,"series","chart","xaxis","title"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5,"Dashboard Ejecuci\xf3n"),t.qZA(),t.TgZ(6,"div",5)(7,"mat-card",6),t._UZ(8,"apx-chart",7),t.qZA(),t.TgZ(9,"mat-card",6),t._UZ(10,"apx-chart",7),t.qZA()(),t.TgZ(11,"div",5)(12,"mat-card",6),t._UZ(13,"apx-chart",7),t.qZA(),t.TgZ(14,"mat-card",6),t._UZ(15,"apx-chart",7),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-card",6),t._UZ(18,"apx-chart",7),t.qZA(),t.TgZ(19,"mat-card",6),t._UZ(20,"apx-chart",7),t.qZA()()()()()()),2&r&&(t.xp6(8),t.Q6J("series",o.contratosTopEjecucionesChartOptions.series)("chart",o.contratosTopEjecucionesChartOptions.chart)("xaxis",o.contratosTopEjecucionesChartOptions.xaxis)("title",o.contratosTopEjecucionesChartOptions.title),t.xp6(2),t.Q6J("series",o.suplementosTopEjecucionesChartOptions.series)("chart",o.suplementosTopEjecucionesChartOptions.chart)("xaxis",o.suplementosTopEjecucionesChartOptions.xaxis)("title",o.suplementosTopEjecucionesChartOptions.title),t.xp6(3),t.Q6J("series",o.top10ProveedoresMayorMontoChartOptions.series)("chart",o.top10ProveedoresMayorMontoChartOptions.chart)("xaxis",o.top10ProveedoresMayorMontoChartOptions.xaxis)("title",o.top10ProveedoresMayorMontoChartOptions.title),t.xp6(2),t.Q6J("series",o.top10ProveedoresMenorMontoChartOptions.series)("chart",o.top10ProveedoresMenorMontoChartOptions.chart)("xaxis",o.top10ProveedoresMenorMontoChartOptions.xaxis)("title",o.top10ProveedoresMenorMontoChartOptions.title),t.xp6(3),t.Q6J("series",o.top10ProveedoresContratoSuplementoMayorMontoChartOptions.series)("chart",o.top10ProveedoresContratoSuplementoMayorMontoChartOptions.chart)("xaxis",o.top10ProveedoresContratoSuplementoMayorMontoChartOptions.xaxis)("title",o.top10ProveedoresContratoSuplementoMayorMontoChartOptions.title),t.xp6(2),t.Q6J("series",o.top10ProveedoresContratoSuplementoMenorMontoChartOptions.series)("chart",o.top10ProveedoresContratoSuplementoMenorMontoChartOptions.chart)("xaxis",o.top10ProveedoresContratoSuplementoMenorMontoChartOptions.xaxis)("title",o.top10ProveedoresContratoSuplementoMenorMontoChartOptions.title))},dependencies:[g.ez,d.X,d.x,h.QW,h.a8],encapsulation:2})}return n})()}];let J=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#o=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[b.Bz.forChild(M),b.Bz]})}return n})()}}]);