"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[292],{5170:(z,I,a)=>{a.d(I,{d:()=>w});var h=a(2096),c=a(2246),T=a(9212);let w=(()=>{class s{constructor(){this.contratos=[],this.tipoContrato=[],this.expired=[],this.contratos=c.Io||[],this.tipoContrato=c.j2||[],this.expired=c.y2||[]}getContratos(){return(0,h.of)([...this.contratos])}getExpiredContratos(){return(0,h.of)([...this.expired])}createContrato(p){const m={...p,id:this.contratos.length+this.expired.length+1,departamento:p.departamento||c.iy[0],estado:p.estado||"Activo"};return this.contratos.push(m),(0,h.of)(m)}updateContrato(p,m){const v=this.contratos.findIndex(o=>o.id===p);if(-1!==v)return this.contratos[v]={...m,id:p},(0,h.of)(this.contratos[v]);const g=this.expired.findIndex(o=>o.id===p);if(-1!==g)return this.expired[g]={...m,id:p},(0,h.of)(this.expired[g]);throw new Error("Contrato not found")}deleteContrato(p){const m=this.contratos.findIndex(g=>g.id===p);if(-1!==m)return this.contratos.splice(m,1),(0,h.of)(void 0);const v=this.expired.findIndex(g=>g.id===p);if(-1!==v)return this.expired.splice(v,1),(0,h.of)(void 0);throw new Error("Contrato not found")}transferExpiredContratos(){const p=this.contratos.filter(m=>"Vencido"===m.estado);return p.length>0&&(this.expired.push(...p),this.contratos=this.contratos.filter(m=>"Vencido"!==m.estado)),(0,h.of)(p)}restoreContrato(p){const m=this.expired.findIndex(v=>v.id===p);if(-1!==m){const v={...this.expired[m],estado:"Activo"};return this.contratos.push(v),this.expired.splice(m,1),(0,h.of)(v)}throw new Error("Expired contrato not found")}getTipoContratos(){return(0,h.of)([...this.tipoContrato])}createTipoContrato(p){const m={...p,id:this.tipoContrato.length+this.expired.length+1};return this.tipoContrato.push(m),(0,h.of)(m)}getVencidoEjecucionContratos(p,m){const v=this.expired.filter(b=>"Vencido"===b.estado),g=p*m,y=v.slice(g,g+m);return(0,h.of)({data:y,total:v.length})}static#e=this.\u0275fac=function(m){return new(m||s)};static#t=this.\u0275prov=T.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},8660:(z,I,a)=>{a.d(I,{d:()=>F});var h=a(6814),c=a(6223),T=a(4170),w=a(4516),s=a(2296),N=a(8525),p=a(7700),m=a(617),v=a(2596),g=a(2246),o=a(9212),y=a(3680);function q(f,e){1&f&&(o.TgZ(0,"mat-error"),o._uU(1," El nombre es requerido "),o.qZA())}function b(f,e){1&f&&(o.TgZ(0,"mat-error"),o._uU(1," El c\xf3digo es requerido "),o.qZA())}function U(f,e){1&f&&(o.TgZ(0,"mat-error"),o._uU(1," Los tel\xe9fonos son requeridos "),o.qZA())}function k(f,e){1&f&&(o.TgZ(0,"mat-error"),o._uU(1," El domicilio es requerido "),o.qZA())}function S(f,e){if(1&f&&(o.TgZ(0,"mat-option",22),o._uU(1),o.qZA()),2&f){const u=e.$implicit;o.Q6J("value",u),o.xp6(1),o.hij(" ",u.nombre_municipio," ")}}function M(f,e){1&f&&(o.TgZ(0,"mat-error"),o._uU(1," El municipio es requerido "),o.qZA())}function R(f,e){if(1&f&&(o.TgZ(0,"mat-option",22),o._uU(1),o.qZA()),2&f){const u=e.$implicit;o.Q6J("value",u),o.xp6(1),o.hij(" ",u.nombre_ministerio," ")}}function J(f,e){1&f&&(o.TgZ(0,"mat-error"),o._uU(1," El ministerio es requerido "),o.qZA())}function j(f,e){if(1&f){const u=o.EpF();o.TgZ(0,"div",23)(1,"div",24)(2,"h4",25),o._uU(3),o.qZA(),o.TgZ(4,"button",26),o.NdJ("click",function(){const C=o.CHM(u).index,P=o.oxw();return o.KtG(P.removeRepresentante(C))}),o.TgZ(5,"mat-icon"),o._uU(6,"delete"),o.qZA()()(),o.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),o._uU(10,"Nombre"),o.qZA(),o._UZ(11,"input",5),o.TgZ(12,"mat-error"),o._uU(13,"El nombre es requerido"),o.qZA()(),o.TgZ(14,"mat-form-field",4)(15,"mat-label"),o._uU(16,"Cargo"),o.qZA(),o._UZ(17,"input",27),o.TgZ(18,"mat-error"),o._uU(19,"El cargo es requerido"),o.qZA()(),o.TgZ(20,"mat-form-field",4)(21,"mat-label"),o._uU(22,"Tel\xe9fono"),o.qZA(),o._UZ(23,"input",28),o.TgZ(24,"mat-error"),o._uU(25,"El tel\xe9fono es requerido"),o.qZA()(),o.TgZ(26,"mat-form-field",4)(27,"mat-label"),o._uU(28,"Email"),o.qZA(),o._UZ(29,"input",29),o.TgZ(30,"mat-error"),o._uU(31,"Ingrese un email v\xe1lido"),o.qZA()()()()}if(2&f){const u=e.index;o.Q6J("formGroupName",u),o.xp6(3),o.hij("Representante ",u+1,"")}}let F=(()=>{class f{get representantesArray(){return this.proveedorForm.get("representantes")}constructor(u,Z,_,C){this.fb=u,this.dialog=Z,this.dialogRef=_,this.data=C,this.ministerios=g.Cj,this.municipios=g.k0,this.proveedorForm=this.fb.group({nombre:["",[c.kI.required]],codigo:["",[c.kI.required]],telefonos:["",[c.kI.required]],domicilio:["",[c.kI.required]],municipio:[null,[c.kI.required]],ministerio:[null,[c.kI.required]],tipo:["",[c.kI.required]],categoria:[""],representantes:this.fb.array([])})}ngOnInit(){0===this.representantesArray.length&&this.addRepresentante()}createRepresentante(u){return this.fb.group({id:[u?.id||""],nombre:[u?.nombre||"",c.kI.required],cargo:[u?.cargo||"",c.kI.required],telefono:[u?.telefono||"",c.kI.required],email:[u?.email||"",[c.kI.required,c.kI.email]]})}addRepresentante(u){this.representantesArray.push(this.createRepresentante(u))}removeRepresentante(u){this.representantesArray.removeAt(u)}onCancel(){this.dialogRef.close()}onSubmit(){if(this.proveedorForm.valid){const u={...this.proveedorForm.value,id:Math.floor(1e3*Math.random())};this.dialogRef.close(u)}}static#e=this.\u0275fac=function(Z){return new(Z||f)(o.Y36(c.qu),o.Y36(p.uw),o.Y36(p.so),o.Y36(p.WI))};static#t=this.\u0275cmp=o.Xpm({type:f,selectors:[["app-proveedor-form"]],standalone:!0,features:[o.jDz],decls:53,vars:11,consts:[[1,"flex","flex-col","p-6","md:p-8","gap-4"],[1,"text-3xl","font-bold","mb-4"],[1,"flex","flex-col","gap-4",3,"formGroup","ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","codigo","required",""],["matInput","","formControlName","telefonos","required",""],["matInput","","formControlName","domicilio","required",""],["formControlName","municipio","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","ministerio","required",""],[1,"col-span-full","mt-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-lg","font-medium"],["mat-icon-button","","color","primary","type","button","matTooltip","Agregar representante",3,"click"],["formArrayName","representantes",1,"space-y-4"],["class","p-4 border rounded-lg",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","justify-end","gap-2","mt-4"],["type","button","mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],[3,"value"],[1,"p-4","border","rounded-lg",3,"formGroupName"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-md","font-medium"],["mat-icon-button","","color","warn","type","button","matTooltip","Eliminar",3,"click"],["matInput","","formControlName","cargo","required",""],["matInput","","formControlName","telefono","required",""],["matInput","","type","email","formControlName","email","required",""]],template:function(Z,_){if(1&Z&&(o.TgZ(0,"div",0)(1,"h2",1),o._uU(2,"Nuevo Proveedor"),o.qZA(),o.TgZ(3,"form",2),o.NdJ("ngSubmit",function(){return _.onSubmit()}),o.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o._uU(7,"Nombre"),o.qZA(),o._UZ(8,"input",5),o.YNc(9,q,2,0,"mat-error",6),o.qZA(),o.TgZ(10,"mat-form-field",4)(11,"mat-label"),o._uU(12,"C\xf3digo"),o.qZA(),o._UZ(13,"input",7),o.YNc(14,b,2,0,"mat-error",6),o.qZA()(),o.TgZ(15,"div",3)(16,"mat-form-field",4)(17,"mat-label"),o._uU(18,"Tel\xe9fonos"),o.qZA(),o._UZ(19,"input",8),o.YNc(20,U,2,0,"mat-error",6),o.qZA(),o.TgZ(21,"mat-form-field",4)(22,"mat-label"),o._uU(23,"Domicilio"),o.qZA(),o._UZ(24,"input",9),o.YNc(25,k,2,0,"mat-error",6),o.qZA()(),o.TgZ(26,"div",3)(27,"mat-form-field",4)(28,"mat-label"),o._uU(29,"Municipio"),o.qZA(),o.TgZ(30,"mat-select",10),o.YNc(31,S,2,2,"mat-option",11),o.qZA(),o.YNc(32,M,2,0,"mat-error",6),o.qZA(),o.TgZ(33,"mat-form-field",4)(34,"mat-label"),o._uU(35,"Ministerio"),o.qZA(),o.TgZ(36,"mat-select",12),o.YNc(37,R,2,2,"mat-option",11),o.qZA(),o.YNc(38,J,2,0,"mat-error",6),o.qZA()(),o.TgZ(39,"div",13)(40,"div",14)(41,"h3",15),o._uU(42,"Representantes"),o.qZA(),o.TgZ(43,"button",16),o.NdJ("click",function(){return _.addRepresentante()}),o.TgZ(44,"mat-icon"),o._uU(45,"add_circle"),o.qZA()()(),o.TgZ(46,"div",17),o.YNc(47,j,32,2,"div",18),o.qZA()(),o.TgZ(48,"div",19)(49,"button",20),o.NdJ("click",function(){return _.onCancel()}),o._uU(50,"Cancelar"),o.qZA(),o.TgZ(51,"button",21),o._uU(52,"Guardar"),o.qZA()()()()),2&Z){let C,P,L,Q,D,Y;o.xp6(3),o.Q6J("formGroup",_.proveedorForm),o.xp6(6),o.Q6J("ngIf",null==(C=_.proveedorForm.get("nombre"))?null:C.hasError("required")),o.xp6(5),o.Q6J("ngIf",null==(P=_.proveedorForm.get("codigo"))?null:P.hasError("required")),o.xp6(6),o.Q6J("ngIf",null==(L=_.proveedorForm.get("telefonos"))?null:L.hasError("required")),o.xp6(5),o.Q6J("ngIf",null==(Q=_.proveedorForm.get("domicilio"))?null:Q.hasError("required")),o.xp6(6),o.Q6J("ngForOf",_.municipios),o.xp6(1),o.Q6J("ngIf",null==(D=_.proveedorForm.get("municipio"))?null:D.hasError("required")),o.xp6(5),o.Q6J("ngForOf",_.ministerios),o.xp6(1),o.Q6J("ngIf",null==(Y=_.proveedorForm.get("ministerio"))?null:Y.hasError("required")),o.xp6(9),o.Q6J("ngForOf",_.representantesArray.controls),o.xp6(4),o.Q6J("disabled",!_.proveedorForm.valid)}},dependencies:[h.ez,h.sg,h.O5,c.UX,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,c.x0,c.CE,T.lN,T.KE,T.hX,T.TO,w.c,w.Nt,s.ot,s.lW,s.RK,N.LD,N.gD,y.ey,m.Ps,m.Hw,v.AV,v.gM]})}return f})()},7292:(z,I,a)=>{a.r(I),a.d(I,{ProveedoresRoutingModule:()=>Ee});var h=a(1896),c=a(3566),T=a(1476),w=a(5313),s=a(6223),N=a(3620),p=a(3997),m=a(9773),v=a(9315),g=a(6814),o=a(2296),y=a(6007),q=a(617),b=a(4170),U=a(4516),k=a(8525),S=a(7988),M=a(6385),R=a(7700),J=a(2596),j=a(8660),F=a(2246),f=a(8645),e=a(9212),u=a(3018),Z=a(2096);let _=(()=>{class n{constructor(){this.representantes=[...F.qk]}getRepresentantes(){return(0,Z.of)(this.representantes)}getRepresentante(t){const r=this.representantes.find(i=>i.id===t);return(0,Z.of)(r)}createRepresentante(t){const r={...t,id:Math.max(...this.representantes.map(i=>i.id))+1};return this.representantes.push(r),(0,Z.of)(r)}updateRepresentante(t,r){const i=this.representantes.findIndex(l=>l.id===t);return-1!==i?(this.representantes[i]={...r,id:t},(0,Z.of)(this.representantes[i])):(0,Z.of)(void 0)}deleteRepresentante(t){const r=this.representantes.findIndex(i=>i.id===t);return-1!==r&&this.representantes.splice(r,1),(0,Z.of)(void 0)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var C=a(3680);function P(n,d){1&n&&(e.TgZ(0,"div",24),e._UZ(1,"mat-progress-bar",25),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function L(n,d){1&n&&e.GkF(0)}const Q=n=>({$implicit:n});function D(n,d){if(1&n&&(e.ynx(0),e.YNc(1,L,1,0,"ng-container",39),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(2);const r=e.MAs(27);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,Q,t))}}function Y(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33)(2,"div",29),e._uU(3),e.qZA(),e.TgZ(4,"div",29),e._uU(5),e.qZA(),e.TgZ(6,"div",29),e._uU(7),e.qZA(),e.TgZ(8,"div",29),e._uU(9),e.qZA(),e.TgZ(10,"div",29),e._uU(11),e.qZA(),e.TgZ(12,"div",29),e._uU(13),e.qZA(),e.TgZ(14,"div",29),e._uU(15),e.qZA(),e.TgZ(16,"div",34)(17,"button",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,x=e.oxw(2);return e.KtG(x.toggleDetails(l.id))}),e._UZ(18,"mat-icon",36),e.qZA()()(),e.TgZ(19,"div",37),e.YNc(20,D,2,4,"ng-container",38),e.qZA(),e.BQk()}if(2&n){const t=d.$implicit,r=e.oxw(2);e.xp6(2),e.Q6J("matTooltip",t.nombre),e.xp6(1),e.hij(" ",t.nombre," "),e.xp6(1),e.Q6J("matTooltip",t.codigo),e.xp6(1),e.hij(" ",t.codigo," "),e.xp6(1),e.Q6J("matTooltip",t.representante),e.xp6(1),e.hij(" ",t.representante||"Sin representante"," "),e.xp6(1),e.Q6J("matTooltip",t.telefonos),e.xp6(1),e.hij(" ",t.telefonos," "),e.xp6(1),e.Q6J("matTooltip",t.domicilio),e.xp6(1),e.hij(" ",t.domicilio," "),e.xp6(1),e.Q6J("matTooltip",t.municipio.nombre_municipio),e.xp6(1),e.hij(" ",t.municipio.nombre_municipio," "),e.xp6(1),e.Q6J("matTooltip",t.ministerio.descripcion),e.xp6(1),e.hij(" ",t.ministerio.nombre_ministerio,"\n"),e.xp6(3),e.Q6J("svgIcon",(null==r.selectedRow?null:r.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==r.selectedRow?null:r.selectedRow.id)===t.id)}}function W(n,d){if(1&n&&(e.TgZ(0,"p",51)(1,"span",52),e._uU(2,"Representante:"),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.representante," ")}}function $(n,d){1&n&&e.GkF(0)}function V(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",53),e.YNc(2,$,1,0,"ng-container",39),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(2);const r=e.MAs(27);e.xp6(2),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,Q,t))}}function H(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",40)(2,"div",41)(3,"div",42)(4,"div",7)(5,"h3",43),e._uU(6),e.qZA(),e.TgZ(7,"p",44),e._uU(8),e.qZA(),e.YNc(9,W,4,1,"p",45),e.qZA(),e.TgZ(10,"button",46),e.NdJ("click",function(){const l=e.CHM(t).$implicit,x=e.oxw(2);return e.KtG(x.toggleDetails(l.id))}),e._UZ(11,"mat-icon",15),e.qZA()()(),e.TgZ(12,"div",47)(13,"div",48)(14,"div")(15,"label",49),e._uU(16,"Tel\xe9fonos"),e.qZA(),e.TgZ(17,"p",50),e._uU(18),e.qZA()(),e.TgZ(19,"div")(20,"label",49),e._uU(21,"Domicilio"),e.qZA(),e.TgZ(22,"p",50),e._uU(23),e.qZA()(),e.TgZ(24,"div")(25,"label",49),e._uU(26,"Municipio"),e.qZA(),e.TgZ(27,"p",50),e._uU(28),e.qZA()(),e.TgZ(29,"div")(30,"label",49),e._uU(31,"Ministerio"),e.qZA(),e.TgZ(32,"p",50),e._uU(33),e.qZA()()()(),e.YNc(34,V,3,4,"ng-container",38),e.qZA(),e.BQk()}if(2&n){const t=d.$implicit,r=e.oxw(2);e.xp6(6),e.hij(" ",t.nombre," "),e.xp6(2),e.hij(" ",t.codigo," "),e.xp6(1),e.Q6J("ngIf",t.representante),e.xp6(2),e.Q6J("svgIcon",(null==r.selectedRow?null:r.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(7),e.Oqu(t.telefonos),e.xp6(5),e.Oqu(t.domicilio),e.xp6(5),e.Oqu(t.municipio.nombre_municipio),e.xp6(5),e.Oqu(t.ministerio.nombre_ministerio),e.xp6(1),e.Q6J("ngIf",(null==r.selectedRow?null:r.selectedRow.id)===t.id)}}const X=n=>({"pointer-events-none":n}),ee=()=>[5,10,25,100];function te(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",26)(2,"div",27)(3,"div",28)(4,"div",29)(5,"span"),e._uU(6,"Nombre"),e.qZA()(),e.TgZ(7,"div",29)(8,"span"),e._uU(9,"C\xf3digo"),e.qZA()(),e.TgZ(10,"div",29)(11,"span"),e._uU(12,"Representante"),e.qZA()(),e.TgZ(13,"div",29)(14,"span"),e._uU(15,"Tel\xe9fonos"),e.qZA()(),e.TgZ(16,"div",29)(17,"span"),e._uU(18,"Domicilio"),e.qZA()(),e.TgZ(19,"div",29)(20,"span"),e._uU(21,"Municipio"),e.qZA()(),e.TgZ(22,"div",29)(23,"span"),e._uU(24,"Ministerio"),e.qZA()(),e.TgZ(25,"div"),e._uU(26,"Detalles"),e.qZA()(),e.YNc(27,Y,21,16,"ng-container",30),e.qZA()(),e.TgZ(28,"div",31),e.YNc(29,H,35,9,"ng-container",30),e.qZA(),e._UZ(30,"mat-paginator",32),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("matTooltip","Nombre completo"),e.xp6(3),e.Q6J("matTooltip","C\xf3digo completo"),e.xp6(3),e.Q6J("matTooltip","Representante completo"),e.xp6(3),e.Q6J("matTooltip","Tel\xe9fonos completos"),e.xp6(3),e.Q6J("matTooltip","Domicilio completo"),e.xp6(3),e.Q6J("matTooltip","Municipio completo"),e.xp6(3),e.Q6J("matTooltip","Ministerio completo"),e.xp6(5),e.Q6J("ngForOf",t.dataSource.filteredData)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngForOf",t.dataSource.filteredData)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("ngClass",e.VKq(17,X,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(19,ee))("showFirstLastButtons",!0)}}function oe(n,d){if(1&n&&(e.TgZ(0,"mat-option",72),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_municipio," ")}}function ne(n,d){if(1&n&&(e.TgZ(0,"mat-option",72),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_ministerio," ")}}function re(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",55)(2,"form",56)(3,"div",57)(4,"div",58)(5,"div",59)(6,"mat-form-field",27)(7,"mat-label"),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",60),e.qZA(),e.TgZ(10,"mat-form-field",27)(11,"mat-label"),e._uU(12,"C\xf3digo"),e.qZA(),e._UZ(13,"input",61),e.qZA(),e.TgZ(14,"mat-form-field",27)(15,"mat-label"),e._uU(16,"Tel\xe9fonos"),e.qZA(),e._UZ(17,"input",62),e.qZA(),e.TgZ(18,"mat-form-field",27)(19,"mat-label"),e._uU(20,"Representante"),e.qZA(),e._UZ(21,"input",63),e.qZA()(),e.TgZ(22,"div",59)(23,"mat-form-field",27)(24,"mat-label"),e._uU(25,"Domicilio"),e.qZA(),e._UZ(26,"input",64),e.qZA(),e.TgZ(27,"mat-form-field",27)(28,"mat-label"),e._uU(29,"Municipio"),e.qZA(),e.TgZ(30,"mat-select",65),e.YNc(31,oe,2,2,"mat-option",66),e.qZA()()(),e.TgZ(32,"div",59)(33,"mat-form-field",27)(34,"mat-label"),e._uU(35,"Ministerio"),e.qZA(),e.TgZ(36,"mat-select",67),e.YNc(37,ne,2,2,"mat-option",66),e.qZA()()()()(),e.TgZ(38,"div",68),e._UZ(39,"div",69),e.TgZ(40,"div",70)(41,"button",71),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateSelectedRecord())}),e._uU(42," Actualizar "),e.qZA(),e.TgZ(43,"button",71),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteSelectedRecord())}),e._uU(44," Eliminar "),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedRowForm),e.xp6(29),e.Q6J("ngForOf",t.mockMunicipio),e.xp6(6),e.Q6J("ngForOf",t.mockMinisterio),e.xp6(4),e.Q6J("color","primary"),e.xp6(2),e.Q6J("color","warn")}}function ie(n,d){1&n&&(e.TgZ(0,"div",73),e._uU(1,"\xa1No hay proveedores!"),e.qZA())}let ae=(()=>{class n{constructor(t,r,i,l){this.dialog=t,this.proveedorService=r,this.representanteService=i,this.cdr=l,this.data=[],this.columns=[{key:"nombre",label:"Nombre",editable:!0},{key:"codigo",label:"C\xf3digo",editable:!0},{key:"representante",label:"Representante",editable:!0},{key:"telefonos",label:"Tel\xe9fonos",editable:!0},{key:"domicilio",label:"Domicilio",editable:!0},{key:"municipio",label:"Municipio",nestedKey:"nombre_municipio",editable:!1,selectOptions:F.k0},{key:"ministerio",label:"Ministerio",nestedKey:"nombre_ministerio",editable:!1,selectOptions:F.Cj}],this.title="Proveedores",this.addButtonText="Agregar Proveedor",this.displayedColumns=[],this.searchInputControl=new s.NI(""),this.selectedRow=null,this.isLoading=!1,this.pagination={length:0,page:0,size:10},this._unsubscribeAll=new f.x,this.proveedoresConRepresentantes=[],this.dataSource=new w.by([]),this.selectedRowForm=new s.cw({})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.cdr.detectChanges()}ngOnInit(){this.displayedColumns=this.columns.map(t=>t.key).concat("details"),this.loadProveedores(),this.searchInputControl.valueChanges.pipe((0,N.b)(300),(0,p.x)(),(0,m.R)(this._unsubscribeAll)).subscribe(t=>{console.log("Search query:",t),this.closeDetails(),this.dataSource.filter=t?.trim().toLowerCase()||"",console.log("Filtered data:",this.dataSource.filteredData),this.cdr.detectChanges(),this.dataSource._updateChangeSubscription()}),this.dataSource.filterPredicate=(t,r)=>Object.keys(t).reduce((l,x)=>l+(this.getNestedValue(t,x,this.columns.find(A=>A.key===x)?.nestedKey)||"")+" ","").toLowerCase().includes(r)}closeDetails(){this.selectedRow=null,this.cdr.detectChanges()}loadProveedores(){this.isLoading=!0,(0,v.D)([this.proveedorService.getProveedores(),this.representanteService.getRepresentantes()]).subscribe({next:([t,r])=>{this.data=t.map(i=>{const l=r.find(x=>x.entidad_id===i.id);return{...i,representante:l?`${l.nombre} ${l.apellidos}`:"Sin representante"}}),this.dataSource.data=this.data,this.pagination.length=this.data.length,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.isLoading=!1,this.cdr.markForCheck()},error:t=>{console.error("Error loading data:",t),this.isLoading=!1,this.cdr.markForCheck()}})}trackByFn(t,r){return r.id}getNestedValue(t,r,i){return i&&t[r]?t[r][i]:t[r]||""}toggleDetails(t){this.selectedRow=this.selectedRow?.id===t?null:this.data.find(r=>r.id===t),this.selectedRowForm=new s.cw({nombre:new s.NI(this.selectedRow?.nombre),codigo:new s.NI(this.selectedRow?.codigo),telefonos:new s.NI(this.selectedRow?.telefonos),domicilio:new s.NI(this.selectedRow?.domicilio),municipio:new s.NI(this.selectedRow?.municipio),ministerio:new s.NI(this.selectedRow?.ministerio),representante:new s.NI(this.selectedRow?.representante)}),this.cdr.markForCheck()}createRecord(){this.addNewProveedor()}addNewProveedor(){const t=window.innerWidth<=768;this.dialog.open(j.d,{width:t?"90vw":"750px",maxWidth:t?"100vw":"90vw",height:t?"100vh":"90vh",maxHeight:"100vh",panelClass:"full-screen-dialog",disableClose:!1,autoFocus:!1,hasBackdrop:!t,position:t?{top:"0"}:{}}).afterClosed().subscribe(i=>{i&&this.proveedorService.createProveedor(i).subscribe({next:l=>{this.loadProveedores()},error:l=>{console.error("Error creating proveedor:",l)}})})}updateSelectedRecord(){if(this.selectedRow){const t={...this.selectedRow,...this.selectedRowForm.value};this.proveedorService.updateProveedor(this.selectedRow.id,t).subscribe({next:()=>{this.loadProveedores(),this.selectedRow=null},error:r=>{console.error("Error updating proveedor:",r)}})}}deleteSelectedRecord(){this.selectedRow&&this.proveedorService.deleteProveedor(this.selectedRow.id).subscribe({next:()=>{this.loadProveedores(),this.selectedRow=null},error:t=>{console.error("Error deleting proveedor:",t)}})}exportToCSV(){if(!this.dataSource.filteredData||0===this.dataSource.filteredData.length)return;const t=[];t.push(["Nombre","C\xf3digo","Tel\xe9fonos","Domicilio","Municipio","Ministerio"].join(",")),this.dataSource.filteredData.forEach(A=>{const Ie=[A.nombre||"",A.codigo||"",A.telefonos||"",A.domicilio||"",A.municipio?.nombre_municipio||"",A.ministerio?.nombre_ministerio||""].map(O=>"string"==typeof O&&(O.includes(",")||O.includes('"'))?`"${O.replace(/"/g,'""')}"`:O);t.push(Ie.join(","))});const i=t.join("\n"),l=new Blob([i],{type:"text/csv;charset=utf-8;"}),x=window.URL.createObjectURL(l),E=document.createElement("a");E.href=x,E.download="proveedores_export.csv",E.click(),window.URL.revokeObjectURL(x)}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(R.uw),e.Y36(u.z),e.Y36(_),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-proveedor-list"]],viewQuery:function(r,i){if(1&r&&(e.Gf(c.YE,5),e.Gf(T.NW,5)),2&r){let l;e.iGM(l=e.CRH())&&(i.sort=l.first),e.iGM(l=e.CRH())&&(i.paginator=l.first)}},standalone:!0,features:[e.jDz],decls:30,vars:13,consts:[[1,"flex","flex-col","min-h-screen","p-6","w-full"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden","mb-6","w-full"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","flex-col","sm:flex-row","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","mt-4","sm:mt-0","w-50","text-lg",3,"color","click"],[3,"svgIcon"],[1,"ml-2","hidden","sm:inline"],[1,"ml-2","sm:hidden"],["mat-icon-button","","matTooltip","Exportar tabla a CSV","aria-label","Exportar tabla a CSV",1,"ml-4","mt-4","sm:mt-0",3,"color","click"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden"],[4,"ngIf","ngIfElse"],["rowDetailsTemplate",""],["noProveedores",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"hidden","lg:block","w-full"],[1,"w-full"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5",2,"grid-template-columns","1fr 150px 200px 180px 1fr 200px 200px 100px"],["matTooltipPosition","above",1,"truncate",3,"matTooltip"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"lg:hidden"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b",2,"grid-template-columns","1fr 150px 200px 180px 1fr 200px 200px 100px"],[1,"flex","items-center","justify-center"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"grid"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","mb-4","mx-4","shadow-sm"],[1,"p-4","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-500","dark:text-gray-400"],["class","text-sm text-gray-700 dark:text-gray-300 mt-1",4,"ngIf"],["mat-icon-button","",1,"ml-4","flex-shrink-0",3,"click"],[1,"p-4","space-y-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"text-xs","font-medium","text-gray-500","dark:text-gray-400","uppercase","tracking-wide"],[1,"mt-1","text-sm","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-700","dark:text-gray-300","mt-1"],[1,"font-medium"],[1,"border-t","border-gray-200","dark:border-gray-700"],[1,"shadow-lg","overflow-hidden","bg-white","dark:bg-gray-800"],[1,"flex","border-b"],[1,"responsive-form","flex","flex-col","w-full","max-w-full","mx-auto","box-border",2,"width","100%","max-width","500px","padding","0 16px","box-sizing","border-box",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-1/3","sm:pl-8"],["matInput","","formControlName","nombre"],["matInput","","formControlName","codigo"],["matInput","","formControlName","telefonos"],["matInput","","formControlName","representante"],["matInput","","formControlName","domicilio"],["formControlName","municipio"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ministerio"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","border-t","px-4","sm:px-8","py-4"],[1,"hidden","lg:block","flex-1"],[1,"flex","flex-col","sm:flex-row","items-center","gap-3","w-full","sm:w-auto","lg:w-auto"],["mat-stroked-button","",1,"w-full","sm:w-auto","lg:w-auto","px-6",3,"color","click"],[3,"value"],[1,"p-8","sm:p-16","border-b","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(r,i){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5),e.YNc(6,P,2,1,"div",6),e.TgZ(7,"div",7)(8,"div",8)(9,"h2",9),e._uU(10," Proveedores "),e.qZA()()(),e.TgZ(11,"div",10)(12,"mat-form-field",11),e._UZ(13,"mat-icon",12)(14,"input",13),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){return i.addNewProveedor()}),e._UZ(16,"mat-icon",15),e.TgZ(17,"span",16),e._uU(18,"Agregar Proveedor"),e.qZA(),e.TgZ(19,"span",17),e._uU(20,"Agregar"),e.qZA()(),e.TgZ(21,"button",18),e.NdJ("click",function(){return i.exportToCSV()}),e._UZ(22,"mat-icon",15),e.qZA()()(),e.TgZ(23,"div",19)(24,"div",20),e.YNc(25,te,31,20,"ng-container",21)(26,re,45,5,"ng-template",null,22,e.W1O)(28,ie,2,0,"ng-template",null,23,e.W1O),e.qZA()()()()()),2&r){const l=e.MAs(29);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:check-circle"),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(6),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar proveedores"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(3),e.Q6J("ngIf",i.dataSource.data.length>0)("ngIfElse",l)}},dependencies:[g.ez,g.mk,g.sg,g.O5,g.tP,o.ot,o.lW,o.RK,y.Cv,y.pW,c.JX,c.YE,w.p0,q.Ps,q.Hw,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.oH,s.sg,s.u,T.TU,T.NW,b.lN,b.KE,b.hX,b.qo,U.c,U.Nt,k.LD,k.gD,C.ey,S.Tx,J.AV,J.gM,M.t,R.Is],styles:[".inventory-grid{display:grid;grid-template-columns:25px repeat(9,1fr) 35px;gap:1rem;width:100%;box-sizing:border-box}.inventory-grid.z-3{position:sticky;top:0;background:white;z-index:20;box-shadow:0 2px 5px -2px #0000001a;overflow:visible}.dark .inventory-grid.z-3{background:#1E293B}.inventory-grid>div:last-child{position:sticky;right:0;background:white;z-index:10;box-shadow:-2px 0 5px -2px #0000001a}.dark .inventory-grid>div:last-child{background:#1E293B}.sticky-end{position:sticky;right:0;background:white;z-index:11;box-shadow:-2px 0 5px -2px #0000001a}.dark .sticky-end{background:#1E293B}.dark .inventory-grid>div{color:#e0e0e0}.dark .sticky-end .mat-stroked-button{background:#1E293B!important;color:#fff!important;border-color:#1e293b!important}.dark .sticky-end .mat-stroked-button .mat-icon{color:#fff!important}.inventory-grid>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host{display:block;width:100%;overflow-x:auto}@media (max-width: 768px){.inventory-grid{grid-template-columns:25px 70px 110px 90px 90px 80px 80px 80px 80px 80px 35px}}\n"],encapsulation:2,changeDetection:0})}return n})();var K=a(2939),se=a(5986);function le(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"El nombre es obligatorio"),e.qZA())}function de(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Los apellidos son obligatorios"),e.qZA())}function ce(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"El email es obligatorio"),e.qZA())}function pe(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Email inv\xe1lido"),e.qZA())}function me(n,d){if(1&n&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_entidad," ")}}function ue(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"La entidad es obligatoria"),e.qZA())}let ge=(()=>{class n{constructor(t,r,i,l){this.fb=t,this.representanteService=r,this.dialogRef=i,this.data=l,this.entidades=[]}ngOnInit(){this.form=this.fb.group({nombre:["",s.kI.required],apellidos:["",s.kI.required],telefono:[""],email:["",[s.kI.required,s.kI.email]],cargo:[""],entidad:[null,s.kI.required]}),this.loadEntidades(),this.data&&this.form.patchValue(this.data)}loadEntidades(){this.entidades=[]}save(){if(this.form.valid){const t=this.form.value;this.data&&this.data.id?this.representanteService.updateRepresentante(this.data.id,t).subscribe({next:()=>{this.dialogRef.close("saved")},error:r=>{console.error("Error updating representante",r)}}):this.representanteService.createRepresentante(t).subscribe({next:()=>{this.dialogRef.close("saved")},error:r=>{console.error("Error creating representante",r)}})}}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(s.qu),e.Y36(_),e.Y36(R.so),e.Y36(R.WI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-representante-form"]],standalone:!0,features:[e.jDz],decls:36,vars:8,consts:[[3,"formGroup","ngSubmit"],["appearance","fill",1,"w-full"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","apellidos","required",""],["matInput","","formControlName","telefono"],["matInput","","formControlName","email","required",""],["matInput","","formControlName","cargo"],["formControlName","entidad","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end","space-x-4","mt-4"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(r,i){if(1&r&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.save()}),e.TgZ(1,"mat-form-field",1)(2,"mat-label"),e._uU(3,"Nombre"),e.qZA(),e._UZ(4,"input",2),e.YNc(5,le,2,0,"mat-error",3),e.qZA(),e.TgZ(6,"mat-form-field",1)(7,"mat-label"),e._uU(8,"Apellidos"),e.qZA(),e._UZ(9,"input",4),e.YNc(10,de,2,0,"mat-error",3),e.qZA(),e.TgZ(11,"mat-form-field",1)(12,"mat-label"),e._uU(13,"Tel\xe9fono"),e.qZA(),e._UZ(14,"input",5),e.qZA(),e.TgZ(15,"mat-form-field",1)(16,"mat-label"),e._uU(17,"Email"),e.qZA(),e._UZ(18,"input",6),e.YNc(19,ce,2,0,"mat-error",3)(20,pe,2,0,"mat-error",3),e.qZA(),e.TgZ(21,"mat-form-field",1)(22,"mat-label"),e._uU(23,"Cargo"),e.qZA(),e._UZ(24,"input",7),e.qZA(),e.TgZ(25,"mat-form-field",1)(26,"mat-label"),e._uU(27,"Entidad"),e.qZA(),e.TgZ(28,"mat-select",8),e.YNc(29,me,2,2,"mat-option",9),e.qZA(),e.YNc(30,ue,2,0,"mat-error",3),e.qZA(),e.TgZ(31,"div",10)(32,"button",11),e.NdJ("click",function(){return i.cancel()}),e._uU(33,"Cancelar"),e.qZA(),e.TgZ(34,"button",12),e._uU(35,"Guardar"),e.qZA()()()),2&r){let l,x,E,A,B;e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngIf",null==(l=i.form.get("nombre"))?null:l.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(x=i.form.get("apellidos"))?null:x.hasError("required")),e.xp6(9),e.Q6J("ngIf",null==(E=i.form.get("email"))?null:E.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(A=i.form.get("email"))?null:A.hasError("email")),e.xp6(9),e.Q6J("ngForOf",i.entidades),e.xp6(1),e.Q6J("ngIf",null==(B=i.form.get("entidad"))?null:B.hasError("required")),e.xp6(4),e.Q6J("disabled",i.form.invalid)}},dependencies:[g.ez,g.sg,g.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,b.lN,b.KE,b.hX,b.TO,U.c,U.Nt,o.ot,o.lW,k.LD,k.gD,C.ey]})}return n})();var fe=a(5170),_e=a(8850);function xe(n,d){1&n&&(e.TgZ(0,"div",23),e._UZ(1,"mat-progress-bar",24),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function he(n,d){1&n&&e.GkF(0)}const G=n=>({$implicit:n});function ve(n,d){if(1&n&&(e.ynx(0),e.YNc(1,he,1,0,"ng-container",39),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(2);const r=e.MAs(25);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,G,t))}}function be(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"div",28),e._uU(3),e.qZA(),e.TgZ(4,"div",28),e._uU(5),e.qZA(),e.TgZ(6,"div",28),e._uU(7),e.qZA(),e.TgZ(8,"div",28),e._uU(9),e.qZA(),e.TgZ(10,"div",28),e._uU(11),e.qZA(),e.TgZ(12,"div",28)(13,"span",33),e._uU(14),e.qZA()(),e.TgZ(15,"div",28),e._uU(16),e.qZA(),e.TgZ(17,"div",34)(18,"button",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,x=e.oxw(2);return e.KtG(x.toggleDetails(l.id))}),e._UZ(19,"mat-icon",36),e.qZA()()(),e.TgZ(20,"div",37),e.YNc(21,ve,2,4,"ng-container",38),e.qZA(),e.BQk()}if(2&n){const t=d.$implicit,r=e.oxw(2);e.xp6(2),e.Q6J("matTooltip",t.nombre),e.xp6(1),e.hij(" ",t.nombre," "),e.xp6(1),e.Q6J("matTooltip",t.apellidos),e.xp6(1),e.hij(" ",t.apellidos," "),e.xp6(1),e.Q6J("matTooltip",t.cargo),e.xp6(1),e.hij(" ",t.cargo," "),e.xp6(1),e.Q6J("matTooltip",t.telefono),e.xp6(1),e.hij(" ",t.telefono," "),e.xp6(1),e.Q6J("matTooltip",t.email),e.xp6(1),e.hij(" ",t.email," "),e.xp6(1),e.Q6J("matTooltip",t.activo?"Activo":"Inactivo"),e.xp6(1),e.Q6J("ngClass",t.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),e.xp6(1),e.hij(" ",t.activo?"Activo":"Inactivo"," "),e.xp6(1),e.Q6J("matTooltip",null==t.entidad?null:t.entidad.nombre_entidad),e.xp6(1),e.hij(" ",null==t.entidad?null:t.entidad.nombre_entidad," "),e.xp6(3),e.Q6J("svgIcon",(null==r.selectedRow?null:r.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==r.selectedRow?null:r.selectedRow.id)===t.id)}}function Ze(n,d){1&n&&e.GkF(0)}function Te(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",50),e.YNc(2,Ze,1,0,"ng-container",39),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(2);const r=e.MAs(25);e.xp6(2),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,G,t))}}function Ce(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",40)(2,"div",41)(3,"div",42)(4,"div",7)(5,"h3",43),e._uU(6),e.qZA(),e.TgZ(7,"p",44),e._uU(8),e.qZA()(),e.TgZ(9,"button",45),e.NdJ("click",function(){const l=e.CHM(t).$implicit,x=e.oxw(2);return e.KtG(x.toggleDetails(l.id))}),e._UZ(10,"mat-icon",15),e.qZA()()(),e.TgZ(11,"div",46)(12,"div",47)(13,"div")(14,"label",48),e._uU(15,"Tel\xe9fono"),e.qZA(),e.TgZ(16,"p",49),e._uU(17),e.qZA()(),e.TgZ(18,"div")(19,"label",48),e._uU(20,"Email"),e.qZA(),e.TgZ(21,"p",49),e._uU(22),e.qZA()(),e.TgZ(23,"div")(24,"label",48),e._uU(25,"Estado"),e.qZA(),e.TgZ(26,"p",49)(27,"span",33),e._uU(28),e.qZA()()(),e.TgZ(29,"div")(30,"label",48),e._uU(31,"Entidad"),e.qZA(),e.TgZ(32,"p",49),e._uU(33),e.qZA()()()(),e.YNc(34,Te,3,4,"ng-container",38),e.qZA(),e.BQk()}if(2&n){const t=d.$implicit,r=e.oxw(2);e.xp6(6),e.AsE(" ",t.nombre," ",t.apellidos," "),e.xp6(2),e.hij(" ",t.cargo," "),e.xp6(2),e.Q6J("svgIcon",(null==r.selectedRow?null:r.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(7),e.Oqu(t.telefono),e.xp6(5),e.Oqu(t.email),e.xp6(5),e.Q6J("ngClass",t.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),e.xp6(1),e.hij(" ",t.activo?"Activo":"Inactivo"," "),e.xp6(5),e.Oqu(null==t.entidad?null:t.entidad.nombre_entidad),e.xp6(1),e.Q6J("ngIf",(null==r.selectedRow?null:r.selectedRow.id)===t.id)}}const we=n=>({"pointer-events-none":n}),Ae=()=>[5,10,25,100];function ye(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",25)(2,"div",26)(3,"div",27)(4,"div",28)(5,"span"),e._uU(6,"Nombre"),e.qZA()(),e.TgZ(7,"div",28)(8,"span"),e._uU(9,"Apellidos"),e.qZA()(),e.TgZ(10,"div",28)(11,"span"),e._uU(12,"Cargo"),e.qZA()(),e.TgZ(13,"div",28)(14,"span"),e._uU(15,"Tel\xe9fono"),e.qZA()(),e.TgZ(16,"div",28)(17,"span"),e._uU(18,"Email"),e.qZA()(),e.TgZ(19,"div",28)(20,"span"),e._uU(21,"Estado"),e.qZA()(),e.TgZ(22,"div",28)(23,"span"),e._uU(24,"Entidad"),e.qZA()(),e.TgZ(25,"div"),e._uU(26,"Detalles"),e.qZA()(),e.YNc(27,be,22,17,"ng-container",29),e.qZA()(),e.TgZ(28,"div",30),e.YNc(29,Ce,35,10,"ng-container",29),e.qZA(),e._UZ(30,"mat-paginator",31),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("matTooltip","Nombre completo"),e.xp6(3),e.Q6J("matTooltip","Apellidos completos"),e.xp6(3),e.Q6J("matTooltip","Cargo completo"),e.xp6(3),e.Q6J("matTooltip","Tel\xe9fono completo"),e.xp6(3),e.Q6J("matTooltip","Email completo"),e.xp6(3),e.Q6J("matTooltip","Estado completo"),e.xp6(3),e.Q6J("matTooltip","Entidad completa"),e.xp6(5),e.Q6J("ngForOf",t.dataSource.filteredData)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngForOf",t.dataSource.filteredData)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("ngClass",e.VKq(17,we,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(19,Ae))("showFirstLastButtons",!0)}}function qe(n,d){if(1&n&&(e.TgZ(0,"mat-option",68),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_entidad," ")}}function Ue(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",51)(1,"div",52)(2,"form",53)(3,"div",54)(4,"div",55)(5,"div",56)(6,"mat-form-field",26)(7,"mat-label"),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",57),e.qZA(),e.TgZ(10,"mat-form-field",26)(11,"mat-label"),e._uU(12,"Apellidos"),e.qZA(),e._UZ(13,"input",58),e.qZA(),e.TgZ(14,"mat-form-field",26)(15,"mat-label"),e._uU(16,"Tel\xe9fono"),e.qZA(),e._UZ(17,"input",59),e.qZA()(),e.TgZ(18,"div",56)(19,"mat-form-field",26)(20,"mat-label"),e._uU(21,"Email"),e.qZA(),e._UZ(22,"input",60),e.qZA(),e.TgZ(23,"mat-form-field",26)(24,"mat-label"),e._uU(25,"Cargo"),e.qZA(),e._UZ(26,"input",61),e.qZA()(),e.TgZ(27,"div",56)(28,"mat-form-field",26)(29,"mat-label"),e._uU(30,"Entidad"),e.qZA(),e.TgZ(31,"mat-select",62),e.YNc(32,qe,2,2,"mat-option",63),e.qZA()()()()(),e.TgZ(33,"div",64),e._UZ(34,"div",65),e.TgZ(35,"div",66)(36,"button",67),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateSelectedRecord())}),e._uU(37," Actualizar "),e.qZA(),e.TgZ(38,"button",67),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteSelectedRecord())}),e._uU(39," Eliminar "),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedRowForm),e.xp6(30),e.Q6J("ngForOf",t.entidades),e.xp6(4),e.Q6J("color","primary"),e.xp6(2),e.Q6J("color","warn")}}function ke(n,d){1&n&&(e.TgZ(0,"div",69),e._uU(1,"\xa1No hay representantes!"),e.qZA())}const Re=[{path:"lista",component:ae},{path:"representantes",component:(()=>{class n{constructor(t,r,i,l,x){this.representanteService=t,this.contratoService=r,this.suplementoService=i,this.dialog=l,this.snackBar=x,this.dataSource=new w.by,this.suplementosDataSource=new w.by,this.displayedColumns=["select","nombre","apellidos","cargo","telefono","email","activo","acciones"],this.displayedSuplementosColumns=["no_suplemento","fecha_firmado","valor_cup","valor_usd","estado","acciones"],this.selection=new Set,this.suplementoSelection=new Set,this.isLoading=!1,this.isSuplementosLoading=!1,this.contratos=[],this.suplementos=[],this.showSuplementos=!1,this.selectedContratoId=null,this.searchControl=new s.NI(""),this.pagination={length:0,page:0,size:10},this.selectedRow=null,this.dataSource=new w.by([]),this.suplementosDataSource=new w.by([])}ngOnInit(){this.loadRepresentantes(),this.loadSuplementos(),this.setupFilter()}loadRepresentantes(){this.isLoading=!0,this.representanteService.getRepresentantes().subscribe({next:t=>{this.dataSource.data=t,this.pagination.length=t.length,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.selectedContratoId&&this.applyContratoFilter(),this.isLoading=!1},error:t=>{console.error("Error al cargar los representantes",t),this.showMessage("Error al cargar los representantes","error"),this.isLoading=!1}})}setupFilter(){this.searchControl.valueChanges.pipe((0,N.b)(300),(0,p.x)()).subscribe(t=>{this.applyFilter(t)})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.selectedContratoId&&this.applyContratoFilter()}loadContratos(){this.contratoService.getContratos().subscribe({next:t=>{this.contratos=t},error:t=>{console.error("Error al cargar los contratos",t),this.showMessage("Error al cargar los contratos","error")}})}loadSuplementos(){this.isSuplementosLoading=!0,this.suplementoService.getSuplementos().subscribe({next:t=>{this.suplementos=t,this.suplementosDataSource.data=t,this.suplementosDataSource.paginator=this.paginator,this.suplementosDataSource.sort=this.sort,this.isSuplementosLoading=!1},error:t=>{console.error("Error al cargar los suplementos",t),this.showMessage("Error al cargar los suplementos","error"),this.isSuplementosLoading=!1}})}toggleSuplementos(){this.showSuplementos=!this.showSuplementos,this.showSuplementos&&0===this.suplementos.length&&this.loadSuplementos()}toggleDetails(t){if(this.selectedRow&&this.selectedRow.id===t)this.selectedRow=null;else{const r=this.dataSource.data.find(i=>i.id===t);this.selectedRow=r||null}}openAddDialog(){this.dialog.open(ge,{width:"600px",data:null}).afterClosed().subscribe(r=>{"saved"===r&&this.loadRepresentantes()})}showMessage(t,r="success"){this.snackBar.open(t,"Cerrar",{duration:5e3,panelClass:"success"===r?"success-snackbar":"error-snackbar",horizontalPosition:"right",verticalPosition:"top"})}deleteRepresentante(t){confirm("\xbfEst\xe1 seguro de eliminar este representante?")&&(this.isLoading=!0,this.representanteService.deleteRepresentante(t).subscribe({next:()=>{this.loadRepresentantes(),this.showMessage("Representante eliminado correctamente"),this.isLoading=!1},error:r=>{console.error("Error al eliminar el representante",r),this.showMessage("Error al eliminar el representante","error"),this.isLoading=!1}}))}deleteSelected(){if(confirm(`\xbfEst\xe1 seguro de eliminar los ${this.selection.size} representantes seleccionados?`)){this.isLoading=!0;const t=Array.from(this.selection).map(r=>this.representanteService.deleteRepresentante(r).toPromise());Promise.all(t).then(()=>{this.selection.clear(),this.loadRepresentantes(),this.showMessage(`${this.selection.size} representantes eliminados correctamente`),this.isLoading=!1}).catch(r=>{console.error("Error al eliminar los representantes",r),this.showMessage("Error al eliminar los representantes","error"),this.isLoading=!1})}}applyContratoFilter(){if(this.selectedContratoId){const t=[...this.dataSource.data];this.dataSource.data=t.filter(r=>r.contrato_id===this.selectedContratoId)}else this.loadRepresentantes()}onContratoChange(){this.applyContratoFilter()}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(_),e.Y36(fe.d),e.Y36(_e.y),e.Y36(R.uw),e.Y36(K.ux))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-representante-list"]],viewQuery:function(r,i){if(1&r&&(e.Gf(c.YE,5),e.Gf(T.NW,5)),2&r){let l;e.iGM(l=e.CRH())&&(i.sort=l.first),e.iGM(l=e.CRH())&&(i.paginator=l.first)}},standalone:!0,features:[e.jDz],decls:28,vars:11,consts:[[1,"flex","flex-col","min-h-screen","p-6","w-full"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden","mb-6","w-full"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","flex-col","sm:flex-row","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","mt-4","sm:mt-0","w-55","text-lg",3,"color","click"],[3,"svgIcon"],[1,"ml-2","hidden","sm:inline"],[1,"ml-2","sm:hidden"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden"],[4,"ngIf","ngIfElse"],["rowDetailsTemplate",""],["noRepresentantes",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"hidden","lg:block","w-full"],[1,"w-full"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5",2,"grid-template-columns","1fr 150px 200px 180px 1fr 200px 200px 100px"],["matTooltipPosition","above",1,"truncate",3,"matTooltip"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"lg:hidden"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b",2,"grid-template-columns","1fr 150px 200px 180px 1fr 200px 200px 100px"],[1,"px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"flex","items-center","justify-center"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"grid"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","mb-4","mx-4","shadow-sm"],[1,"p-4","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-500","dark:text-gray-400"],["mat-icon-button","",1,"ml-4","flex-shrink-0",3,"click"],[1,"p-4","space-y-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"text-xs","font-medium","text-gray-500","dark:text-gray-400","uppercase","tracking-wide"],[1,"mt-1","text-sm","text-gray-900","dark:text-white"],[1,"border-t","border-gray-200","dark:border-gray-700"],[1,"shadow-lg","overflow-hidden","bg-white","dark:bg-gray-800"],[1,"flex","border-b"],[1,"responsive-form","flex","flex-col","w-full","max-w-full","mx-auto","box-border",2,"width","100%","max-width","500px","padding","0 16px","box-sizing","border-box",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-1/3","sm:pl-8"],["matInput","","formControlName","nombre"],["matInput","","formControlName","apellidos"],["matInput","","formControlName","telefono"],["matInput","","formControlName","email"],["matInput","","formControlName","cargo"],["formControlName","entidad"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","border-t","px-4","sm:px-8","py-4"],[1,"hidden","lg:block","flex-1"],[1,"flex","flex-col","sm:flex-row","items-center","gap-3","w-full","sm:w-auto","lg:w-auto"],["mat-stroked-button","",1,"w-full","sm:w-auto","lg:w-auto","px-6",3,"color","click"],[3,"value"],[1,"p-8","sm:p-16","border-b","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(r,i){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5),e.YNc(6,xe,2,1,"div",6),e.TgZ(7,"div",7)(8,"div",8)(9,"h2",9),e._uU(10," Representantes "),e.qZA()()(),e.TgZ(11,"div",10)(12,"mat-form-field",11),e._UZ(13,"mat-icon",12)(14,"input",13),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){return i.openAddDialog()}),e._UZ(16,"mat-icon",15),e.TgZ(17,"span",16),e._uU(18,"Agregar Representante"),e.qZA(),e.TgZ(19,"span",17),e._uU(20,"Agregar"),e.qZA()()()(),e.TgZ(21,"div",18)(22,"div",19),e.YNc(23,ye,31,20,"ng-container",20)(24,Ue,40,4,"ng-template",null,21,e.W1O)(26,ke,2,0,"ng-template",null,22,e.W1O),e.qZA()()()()()),2&r){const l=e.MAs(27);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:users"),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(6),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",i.searchControl)("autocomplete","off")("placeholder","Buscar representantes"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(7),e.Q6J("ngIf",(null==i.dataSource||null==i.dataSource.data?null:i.dataSource.data.length)>0)("ngIfElse",l)}},dependencies:[g.ez,g.mk,g.sg,g.O5,g.tP,w.p0,c.JX,c.YE,T.TU,T.NW,U.c,U.Nt,b.KE,b.hX,b.qo,b.lN,o.ot,o.lW,o.RK,q.Ps,q.Hw,y.Cv,y.pW,J.AV,J.gM,R.Is,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.oH,s.sg,s.u,k.LD,k.gD,C.ey,S.Tx,M.t,K.ZX,se.p9],styles:[".inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 150px 200px 180px 1fr 200px 200px 100px;gap:1rem;width:100%;box-sizing:border-box}.inventory-grid.z-10[_ngcontent-%COMP%]{position:sticky;top:0;background:white;z-index:20;box-shadow:0 2px 5px -2px #0000001a;overflow:visible}.dark[_ngcontent-%COMP%]   .inventory-grid.z-10[_ngcontent-%COMP%]{background:#1E293B}.inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{position:sticky;right:0;background:white;z-index:10;box-shadow:-2px 0 5px -2px #0000001a}.dark[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{background:#1E293B}.sticky-end[_ngcontent-%COMP%]{position:sticky;right:0;background:white;z-index:11;box-shadow:-2px 0 5px -2px #0000001a}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]{background:#1E293B}.dark[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#e0e0e0}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{background:#1E293B!important;color:#fff!important;border-color:#1e293b!important}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff!important}.inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]{display:block;width:100%;overflow-x:auto}@media (max-width: 768px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:25px 70px 110px 90px 90px 80px 80px 80px 80px 80px 35px}}"]})}return n})()}];let Ee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(Re),h.Bz]})}return n})()}}]);