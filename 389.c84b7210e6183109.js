"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[389],{9389:(E,c,r)=>{r.r(c),r.d(c,{TrabajadoresModule:()=>m});var u=r(6814),d=r(1896),t=r(2682),a=r(9212);const n=[{path:"",loadComponent:()=>r.e(426).then(r.bind(r,5426)).then(i=>i.TrabajadoresComponent)}];let m=(()=>{class i{static#o=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=a.oAB({type:i});static#r=this.\u0275inj=a.cJS({providers:[t.r],imports:[u.ez,d.Bz.forChild(n)]})}return i})()},2682:(E,c,r)=>{r.d(c,{r:()=>i});var u=r(9862),d=r(9397),t=r(6306),a=r(2096),n=r(2022),m=r(9212);let i=(()=>{class p{constructor(o){this.http=o}getTrabajadores(){return this.http.get(`${n.P.TRABAJADORES}`).pipe((0,d.b)(o=>console.log("Trabajadores obtenidos:",o)),(0,t.K)(o=>(console.error("Error al obtener trabajadores:",o),(0,a.of)(this.getMockTrabajadores()))))}searchTrabajadores(o){if(!o.trim())return this.getTrabajadores();const e=(new u.LE).set("search",o);return this.http.get(`${n.P.TRABAJADORES}`,{params:e}).pipe((0,t.K)(s=>(console.error("Error en b\xfasqueda de trabajadores:",s),(0,a.of)(this.getMockTrabajadores().filter(l=>l.nombre.toLowerCase().includes(o.toLowerCase())||l.apellido.toLowerCase().includes(o.toLowerCase())||l.email.toLowerCase().includes(o.toLowerCase()))))))}getTrabajadorById(o){return this.http.get(`${n.P.TRABAJADORES}/${o}`).pipe((0,t.K)(e=>{console.error("Error al obtener trabajador por ID:",e);const s=this.getMockTrabajadores().find(l=>l.id===o);return(0,a.of)(s||{})}))}createTrabajador(o){const e={nombre:o.nombre,apellido:o.apellido,usuario:o.usuario||o.email,contrasena:o.contrasena||"temporal123",cargo:o.cargo,departamento_id:o.departamento_id,email:o.email,telefono:o.telefono||"",telefono_movil:o.telefono_movil||"",rol:o.rol};return this.http.post(`${n.P.TRABAJADORES}`,e).pipe((0,d.b)(s=>console.log("Trabajador creado:",s)),(0,t.K)(s=>{console.error("Error al crear trabajador:",s);const l={...e,id:Date.now(),departamentoId:e.departamento_id,fecha_creacion:new Date,activo:!0};return(0,a.of)(l)}))}updateTrabajador(o,e){const s={nombre:e.nombre,apellido:e.apellido,usuario:e.usuario||e.email,cargo:e.cargo,departamento_id:e.departamento_id,email:e.email,telefono:e.telefono||"",telefono_movil:e.telefono_movil||"",rol:e.rol};return this.http.put(`${n.P.TRABAJADORES}/${o}`,s).pipe((0,d.b)(l=>console.log("Trabajador actualizado:",l)),(0,t.K)(l=>(console.error("Error al actualizar trabajador:",l),(0,a.of)({...s,id:o,departamentoId:s.departamento_id}))))}deleteTrabajador(o){return this.http.delete(`${n.P.TRABAJADORES}/${o}`).pipe((0,d.b)(()=>console.log("Trabajador eliminado:",o)),(0,t.K)(e=>(console.error("Error al eliminar trabajador:",e),(0,a.of)())))}getDepartamentos(){return this.http.get(`${n.P.DEPARTAMENTOS}`).pipe((0,t.K)(o=>(console.error("Error al obtener departamentos:",o),(0,a.of)(this.getMockDepartamentos()))))}exportToExcel(){return this.http.get(`${n.P.TRABAJADORES_EXPORT_EXCEL}`,{responseType:"blob"}).pipe((0,t.K)(o=>(console.error("Error al exportar a Excel:",o),(0,a.of)(new Blob))))}exportToPdf(){return this.http.get(`${n.P.TRABAJADORES_EXPORT_PDF}`,{responseType:"blob"}).pipe((0,t.K)(o=>(console.error("Error al exportar a PDF:",o),(0,a.of)(new Blob))))}getMockTrabajadores(){return[{id:1,nombre:"Juan",apellido:"P\xe9rez",usuario:"juan.perez",cargo:"Desarrollador Senior",departamento_id:2,departamentoId:2,email:"juan.perez@empresa.com",telefono:"123-456-7890",telefono_movil:"098-765-4321",rol:"user",activo:!0},{id:2,nombre:"Mar\xeda",apellido:"Gonz\xe1lez",usuario:"maria.gonzalez",cargo:"Gerente de RRHH",departamento_id:1,departamentoId:1,email:"maria.gonzalez@empresa.com",telefono:"123-456-7891",rol:"admin",activo:!0},{id:3,nombre:"Carlos",apellido:"Rodr\xedguez",usuario:"carlos.rodriguez",cargo:"Analista Financiero",departamento_id:3,departamentoId:3,email:"carlos.rodriguez@empresa.com",telefono:"123-456-7892",rol:"user",activo:!0}]}getMockDepartamentos(){return[{id:1,nombre:"Recursos Humanos"},{id:2,nombre:"Tecnolog\xeda"},{id:3,nombre:"Finanzas"},{id:4,nombre:"Operaciones"},{id:5,nombre:"Marketing"},{id:6,nombre:"Ventas"}]}static#o=this.\u0275fac=function(e){return new(e||p)(m.LFG(u.eN))};static#e=this.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);