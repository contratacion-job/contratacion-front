"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[292],{8660:(z,M,a)=>{a.d(M,{d:()=>Y});var k=a(6814),u=a(6223),b=a(4170),A=a(4516),l=a(2296),S=a(8525),c=a(7700),x=a(617),p=a(2596),T=a(2246),o=a(9212),f=a(3680);function E(e,y){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," El nombre es requerido "),o.qZA())}function C(e,y){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," El c\xf3digo es requerido "),o.qZA())}function _(e,y){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," Los tel\xe9fonos son requeridos "),o.qZA())}function v(e,y){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," El domicilio es requerido "),o.qZA())}function w(e,y){if(1&e&&(o.TgZ(0,"mat-option",22),o._uU(1),o.qZA()),2&e){const g=y.$implicit;o.Q6J("value",g),o.xp6(1),o.hij(" ",g.nombre_municipio," ")}}function Z(e,y){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," El municipio es requerido "),o.qZA())}function U(e,y){if(1&e&&(o.TgZ(0,"mat-option",22),o._uU(1),o.qZA()),2&e){const g=y.$implicit;o.Q6J("value",g),o.xp6(1),o.hij(" ",g.nombre_ministerio," ")}}function q(e,y){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," El ministerio es requerido "),o.qZA())}function F(e,y){if(1&e){const g=o.EpF();o.TgZ(0,"div",23)(1,"div",24)(2,"h4",25),o._uU(3),o.qZA(),o.TgZ(4,"button",26),o.NdJ("click",function(){const P=o.CHM(g).index,I=o.oxw();return o.KtG(I.removeRepresentante(P))}),o.TgZ(5,"mat-icon"),o._uU(6,"delete"),o.qZA()()(),o.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),o._uU(10,"Nombre"),o.qZA(),o._UZ(11,"input",5),o.TgZ(12,"mat-error"),o._uU(13,"El nombre es requerido"),o.qZA()(),o.TgZ(14,"mat-form-field",4)(15,"mat-label"),o._uU(16,"Cargo"),o.qZA(),o._UZ(17,"input",27),o.TgZ(18,"mat-error"),o._uU(19,"El cargo es requerido"),o.qZA()(),o.TgZ(20,"mat-form-field",4)(21,"mat-label"),o._uU(22,"Tel\xe9fono"),o.qZA(),o._UZ(23,"input",28),o.TgZ(24,"mat-error"),o._uU(25,"El tel\xe9fono es requerido"),o.qZA()(),o.TgZ(26,"mat-form-field",4)(27,"mat-label"),o._uU(28,"Email"),o.qZA(),o._UZ(29,"input",29),o.TgZ(30,"mat-error"),o._uU(31,"Ingrese un email v\xe1lido"),o.qZA()()()()}if(2&e){const g=y.index;o.Q6J("formGroupName",g),o.xp6(3),o.hij("Representante ",g+1,"")}}let Y=(()=>{class e{get representantesArray(){return this.proveedorForm.get("representantes")}constructor(g,N,h,P){this.fb=g,this.dialog=N,this.dialogRef=h,this.data=P,this.ministerios=T.Cj,this.municipios=T.k0,this.proveedorForm=this.fb.group({nombre:["",[u.kI.required]],codigo:["",[u.kI.required]],telefonos:["",[u.kI.required]],domicilio:["",[u.kI.required]],municipio:[null,[u.kI.required]],ministerio:[null,[u.kI.required]],tipo:["",[u.kI.required]],categoria:[""],representantes:this.fb.array([])})}ngOnInit(){0===this.representantesArray.length&&this.addRepresentante()}createRepresentante(g){return this.fb.group({id:[g?.id||""],nombre:[g?.nombre||"",u.kI.required],cargo:[g?.cargo||"",u.kI.required],telefono:[g?.telefono||"",u.kI.required],email:[g?.email||"",[u.kI.required,u.kI.email]]})}addRepresentante(g){this.representantesArray.push(this.createRepresentante(g))}removeRepresentante(g){this.representantesArray.removeAt(g)}onCancel(){this.dialogRef.close()}onSubmit(){if(this.proveedorForm.valid){const g={...this.proveedorForm.value,id:Math.floor(1e3*Math.random())};this.dialogRef.close(g)}}static#e=this.\u0275fac=function(N){return new(N||e)(o.Y36(u.qu),o.Y36(c.uw),o.Y36(c.so),o.Y36(c.WI))};static#t=this.\u0275cmp=o.Xpm({type:e,selectors:[["app-proveedor-form"]],standalone:!0,features:[o.jDz],decls:53,vars:11,consts:[[1,"flex","flex-col","p-6","md:p-8","gap-4"],[1,"text-3xl","font-bold","mb-4"],[1,"flex","flex-col","gap-4",3,"formGroup","ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","codigo","required",""],["matInput","","formControlName","telefonos","required",""],["matInput","","formControlName","domicilio","required",""],["formControlName","municipio","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","ministerio","required",""],[1,"col-span-full","mt-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-lg","font-medium"],["mat-icon-button","","color","primary","type","button","matTooltip","Agregar representante",3,"click"],["formArrayName","representantes",1,"space-y-4"],["class","p-4 border rounded-lg",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","justify-end","gap-2","mt-4"],["type","button","mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],[3,"value"],[1,"p-4","border","rounded-lg",3,"formGroupName"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-md","font-medium"],["mat-icon-button","","color","warn","type","button","matTooltip","Eliminar",3,"click"],["matInput","","formControlName","cargo","required",""],["matInput","","formControlName","telefono","required",""],["matInput","","type","email","formControlName","email","required",""]],template:function(N,h){if(1&N&&(o.TgZ(0,"div",0)(1,"h2",1),o._uU(2,"Nuevo Proveedor"),o.qZA(),o.TgZ(3,"form",2),o.NdJ("ngSubmit",function(){return h.onSubmit()}),o.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o._uU(7,"Nombre"),o.qZA(),o._UZ(8,"input",5),o.YNc(9,E,2,0,"mat-error",6),o.qZA(),o.TgZ(10,"mat-form-field",4)(11,"mat-label"),o._uU(12,"C\xf3digo"),o.qZA(),o._UZ(13,"input",7),o.YNc(14,C,2,0,"mat-error",6),o.qZA()(),o.TgZ(15,"div",3)(16,"mat-form-field",4)(17,"mat-label"),o._uU(18,"Tel\xe9fonos"),o.qZA(),o._UZ(19,"input",8),o.YNc(20,_,2,0,"mat-error",6),o.qZA(),o.TgZ(21,"mat-form-field",4)(22,"mat-label"),o._uU(23,"Domicilio"),o.qZA(),o._UZ(24,"input",9),o.YNc(25,v,2,0,"mat-error",6),o.qZA()(),o.TgZ(26,"div",3)(27,"mat-form-field",4)(28,"mat-label"),o._uU(29,"Municipio"),o.qZA(),o.TgZ(30,"mat-select",10),o.YNc(31,w,2,2,"mat-option",11),o.qZA(),o.YNc(32,Z,2,0,"mat-error",6),o.qZA(),o.TgZ(33,"mat-form-field",4)(34,"mat-label"),o._uU(35,"Ministerio"),o.qZA(),o.TgZ(36,"mat-select",12),o.YNc(37,U,2,2,"mat-option",11),o.qZA(),o.YNc(38,q,2,0,"mat-error",6),o.qZA()(),o.TgZ(39,"div",13)(40,"div",14)(41,"h3",15),o._uU(42,"Representantes"),o.qZA(),o.TgZ(43,"button",16),o.NdJ("click",function(){return h.addRepresentante()}),o.TgZ(44,"mat-icon"),o._uU(45,"add_circle"),o.qZA()()(),o.TgZ(46,"div",17),o.YNc(47,F,32,2,"div",18),o.qZA()(),o.TgZ(48,"div",19)(49,"button",20),o.NdJ("click",function(){return h.onCancel()}),o._uU(50,"Cancelar"),o.qZA(),o.TgZ(51,"button",21),o._uU(52,"Guardar"),o.qZA()()()()),2&N){let P,I,J,L,Q,O;o.xp6(3),o.Q6J("formGroup",h.proveedorForm),o.xp6(6),o.Q6J("ngIf",null==(P=h.proveedorForm.get("nombre"))?null:P.hasError("required")),o.xp6(5),o.Q6J("ngIf",null==(I=h.proveedorForm.get("codigo"))?null:I.hasError("required")),o.xp6(6),o.Q6J("ngIf",null==(J=h.proveedorForm.get("telefonos"))?null:J.hasError("required")),o.xp6(5),o.Q6J("ngIf",null==(L=h.proveedorForm.get("domicilio"))?null:L.hasError("required")),o.xp6(6),o.Q6J("ngForOf",h.municipios),o.xp6(1),o.Q6J("ngIf",null==(Q=h.proveedorForm.get("municipio"))?null:Q.hasError("required")),o.xp6(5),o.Q6J("ngForOf",h.ministerios),o.xp6(1),o.Q6J("ngIf",null==(O=h.proveedorForm.get("ministerio"))?null:O.hasError("required")),o.xp6(9),o.Q6J("ngForOf",h.representantesArray.controls),o.xp6(4),o.Q6J("disabled",!h.proveedorForm.valid)}},dependencies:[k.ez,k.sg,k.O5,u.UX,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,u.x0,u.CE,b.lN,b.KE,b.hX,b.TO,A.c,A.Nt,l.ot,l.lW,l.RK,S.LD,S.gD,f.ey,x.Ps,x.Hw,p.AV,p.gM]})}return e})()},7292:(z,M,a)=>{a.r(M),a.d(M,{ProveedoresRoutingModule:()=>Je});var k=a(1896),u=a(3566),b=a(1476),A=a(5313),l=a(6223),S=a(3620),c=a(3997),x=a(9773),p=a(8645),T=a(9315),o=a(6814),f=a(2296),E=a(6007),C=a(617),_=a(4170),v=a(4516),w=a(8525),Z=a(7988),U=a(6385),q=a(7700),F=a(2596),Y=a(8660),e=a(9212),y=a(3018),g=a(7174),N=a(2022),h=a(9862);let P=(()=>{class r{constructor(t){this.http=t,this.baseUrl=N.P.REPRESENTANTES}getRepresentantes(){return console.log("Fetching representantes list from backend"),this.http.get(this.baseUrl)}getRepresentanteById(t){return console.log(`Fetching representante with id ${t} from backend`),this.http.get(`${this.baseUrl}/${t}`)}createRepresentante(t){return console.log("Creating representante:",t),this.http.post(this.baseUrl,t)}updateRepresentante(t,i){return console.log(`Updating representante with id ${t}:`,i),this.http.put(`${this.baseUrl}/${t}`,i)}deleteRepresentante(t){return console.log(`Deleting representante with id ${t}`),this.http.delete(`${this.baseUrl}/${t}`)}static#e=this.\u0275fac=function(i){return new(i||r)(e.LFG(h.eN))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var I=a(1892),J=a(3680);function L(r,m){1&r&&(e.TgZ(0,"div",26),e._UZ(1,"mat-progress-bar",27),e.qZA()),2&r&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function Q(r,m){1&r&&e.GkF(0)}const O=r=>({$implicit:r});function W(r,m){if(1&r&&(e.TgZ(0,"div",41),e.YNc(1,Q,1,0,"ng-container",42),e.qZA()),2&r){const t=e.oxw().$implicit;e.oxw(2);const i=e.MAs(39);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,O,t))}}function V(r,m){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",36)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",31),e._uU(5),e.qZA(),e.TgZ(6,"div",31),e._uU(7),e.qZA(),e.TgZ(8,"div",31),e._uU(9),e.qZA(),e.TgZ(10,"div",31),e._uU(11),e.qZA(),e.TgZ(12,"div",31),e._uU(13),e.qZA(),e.TgZ(14,"div",31),e._uU(15),e.qZA(),e.TgZ(16,"div",31),e._uU(17),e.qZA(),e.TgZ(18,"div",31),e._uU(19),e.qZA(),e.TgZ(20,"div",37)(21,"button",38),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.toggleDetails(s.id))}),e._UZ(22,"mat-icon",39),e.qZA()()(),e.YNc(23,W,2,4,"div",40),e.BQk()}if(2&r){const t=m.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("matTooltip",t.nombre),e.xp6(1),e.hij(" ",t.nombre||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",t.codigo),e.xp6(1),e.hij(" ",t.codigo||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",t.estado),e.xp6(1),e.hij(" ",t.estado||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",i.getRepresentantesNames(t)),e.xp6(1),e.hij(" ",i.getRepresentantesNames(t)," "),e.xp6(1),e.Q6J("matTooltip",t.telefonos),e.xp6(1),e.hij(" ",t.telefonos||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",t.prefijo_provincia),e.xp6(1),e.hij(" ",t.prefijo_provincia||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",t.provincia),e.xp6(1),e.hij(" ",t.provincia||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",i.getMunicipioName(t.municipio)),e.xp6(1),e.hij(" ",i.getMunicipioName(t.municipio)," "),e.xp6(1),e.Q6J("matTooltip",i.getMinisterioName(t.ministerio)),e.xp6(1),e.hij(" ",i.getMinisterioName(t.ministerio)," "),e.xp6(3),e.Q6J("svgIcon",(null==i.selectedRow?null:i.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(1),e.Q6J("ngIf",(null==i.selectedRow?null:i.selectedRow.id)===t.id)}}function H(r,m){if(1&r&&(e.TgZ(0,"p",55)(1,"span",56),e._uU(2,"Representante:"),e.qZA(),e._uU(3),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.representante," ")}}function X(r,m){1&r&&e.GkF(0)}function ee(r,m){if(1&r&&(e.ynx(0),e.TgZ(1,"div",57),e.YNc(2,X,1,0,"ng-container",42),e.qZA(),e.BQk()),2&r){const t=e.oxw().$implicit;e.oxw(2);const i=e.MAs(39);e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,O,t))}}function te(r,m){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",44)(3,"div",45)(4,"div",7)(5,"h3",46),e._uU(6),e.qZA(),e.TgZ(7,"p",47),e._uU(8),e.qZA(),e.YNc(9,H,4,1,"p",48),e.qZA(),e.TgZ(10,"button",49),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.toggleDetails(s.id))}),e._UZ(11,"mat-icon",15),e.qZA()()(),e.TgZ(12,"div",50)(13,"div",51)(14,"div")(15,"label",52),e._uU(16,"Tel\xe9fonos"),e.qZA(),e.TgZ(17,"p",53),e._uU(18),e.qZA()(),e.TgZ(19,"div")(20,"label",52),e._uU(21,"Municipio"),e.qZA(),e.TgZ(22,"p",53),e._uU(23),e.qZA()(),e.TgZ(24,"div")(25,"label",52),e._uU(26,"Ministerio"),e.qZA(),e.TgZ(27,"p",53),e._uU(28),e.qZA()()()(),e.YNc(29,ee,3,4,"ng-container",54),e.qZA(),e.BQk()}if(2&r){const t=m.$implicit,i=e.oxw(2);e.xp6(6),e.hij(" ",t.nombre||"N/A"," "),e.xp6(2),e.hij(" ",t.codigo||"N/A"," "),e.xp6(1),e.Q6J("ngIf",t.representante),e.xp6(2),e.Q6J("svgIcon",(null==i.selectedRow?null:i.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(7),e.Oqu(t.telefonos||"N/A"),e.xp6(5),e.Oqu(i.getMunicipioName(t.municipio)),e.xp6(5),e.Oqu(i.getMinisterioName(t.ministerio)),e.xp6(1),e.Q6J("ngIf",(null==i.selectedRow?null:i.selectedRow.id)===t.id)}}const oe=r=>({"pointer-events-none":r}),ie=()=>[5,10,25,100];function ne(r,m){if(1&r&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",31)(5,"span"),e._uU(6,"Nombre"),e.qZA()(),e.TgZ(7,"div",31)(8,"span"),e._uU(9,"C\xf3digo"),e.qZA()(),e.TgZ(10,"div",31)(11,"span"),e._uU(12,"Estado"),e.qZA()(),e.TgZ(13,"div",31)(14,"span"),e._uU(15,"Representantes"),e.qZA()(),e.TgZ(16,"div",31)(17,"span"),e._uU(18,"Tel\xe9fonos"),e.qZA()(),e.TgZ(19,"div",31)(20,"span"),e._uU(21,"Prefijo Provincia"),e.qZA()(),e.TgZ(22,"div",31)(23,"span"),e._uU(24,"Provincia"),e.qZA()(),e.TgZ(25,"div",31)(26,"span"),e._uU(27,"Municipio"),e.qZA()(),e.TgZ(28,"div",31)(29,"span"),e._uU(30,"Ministerio"),e.qZA()(),e.TgZ(31,"div",32)(32,"span"),e._uU(33,"Detalles"),e.qZA()()(),e.YNc(34,V,24,20,"ng-container",33),e.qZA()(),e.TgZ(35,"div",34),e.YNc(36,te,30,8,"ng-container",33),e.qZA(),e._UZ(37,"mat-paginator",35),e.BQk()),2&r){const t=e.oxw();e.xp6(4),e.Q6J("matTooltip","Nombre completo"),e.xp6(3),e.Q6J("matTooltip","C\xf3digo completo"),e.xp6(3),e.Q6J("matTooltip","Estado completo"),e.xp6(3),e.Q6J("matTooltip","Representantes completos"),e.xp6(3),e.Q6J("matTooltip","Tel\xe9fonos completos"),e.xp6(3),e.Q6J("matTooltip","Prefijo Provincia completo"),e.xp6(3),e.Q6J("matTooltip","Provincia completa"),e.xp6(3),e.Q6J("matTooltip","Municipio completo"),e.xp6(3),e.Q6J("matTooltip","Ministerio completo"),e.xp6(6),e.Q6J("ngForOf",t.dataSource.data)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngForOf",t.dataSource.data)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("ngClass",e.VKq(19,oe,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(21,ie))("showFirstLastButtons",!0)}}function re(r,m){if(1&r&&(e.TgZ(0,"mat-option",76),e._uU(1),e.qZA()),2&r){const t=m.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_municipio," ")}}function ae(r,m){if(1&r&&(e.TgZ(0,"mat-option",76),e._uU(1),e.qZA()),2&r){const t=m.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_ministerio," ")}}function se(r,m){if(1&r){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"form",60)(3,"div",61)(4,"div",62)(5,"div",63)(6,"mat-form-field",64)(7,"mat-label"),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",65),e.qZA(),e.TgZ(10,"mat-form-field",64)(11,"mat-label"),e._uU(12,"C\xf3digo"),e.qZA(),e._UZ(13,"input",66),e.qZA(),e.TgZ(14,"mat-form-field",64)(15,"mat-label"),e._uU(16,"Tel\xe9fonos"),e.qZA(),e._UZ(17,"input",67),e.qZA(),e.TgZ(18,"mat-form-field",64)(19,"mat-label"),e._uU(20,"Representante"),e.qZA(),e._UZ(21,"input",68),e.qZA()(),e.TgZ(22,"div",63)(23,"mat-form-field",64)(24,"mat-label"),e._uU(25,"Municipio"),e.qZA(),e.TgZ(26,"mat-select",69),e.YNc(27,re,2,2,"mat-option",70),e.qZA()()(),e.TgZ(28,"div",63)(29,"mat-form-field",64)(30,"mat-label"),e._uU(31,"Ministerio"),e.qZA(),e.TgZ(32,"mat-select",71),e.YNc(33,ae,2,2,"mat-option",70),e.qZA()()()()(),e.TgZ(34,"div",72),e._UZ(35,"div",73),e.TgZ(36,"div",74)(37,"button",75),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateSelectedRecord())}),e._uU(38," Actualizar "),e.qZA(),e.TgZ(39,"button",75),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteSelectedRecord())}),e._uU(40," Eliminar "),e.qZA()()()()()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedRowForm),e.xp6(25),e.Q6J("ngForOf",t.mockMunicipio),e.xp6(6),e.Q6J("ngForOf",t.mockMinisterio),e.xp6(4),e.Q6J("color","primary"),e.xp6(2),e.Q6J("color","warn")}}function le(r,m){1&r&&(e.TgZ(0,"div",77),e._uU(1,"\xa1No hay proveedores!"),e.qZA())}let ce=(()=>{class r{getRepresentantesNames(t){return t.representantes&&Array.isArray(t.representantes)?t.representantes.map(i=>`${i.nombre} ${i.apellido}`).join(", "):"Sin representantes"}constructor(t,i,n,s,d,R){this.dialog=t,this.proveedorService=i,this.CatalogService=n,this.representanteService=s,this.cdr=d,this.exportService=R,this.data=[],this.ministerios=[],this.municipios=[],this.mockMinisterio=[],this.mockMunicipio=[],this.columns=[{key:"nombre",label:"Nombre",editable:!0},{key:"codigo",label:"C\xf3digo",editable:!0},{key:"estado",label:"Estado",editable:!1},{key:"representantes",label:"Representantes",editable:!1},{key:"telefonos",label:"Tel\xe9fonos",editable:!0},{key:"prefijo_provincia",label:"Prefijo Provincia",editable:!1},{key:"provincia",label:"Provincia",editable:!1},{key:"municipio",label:"Municipio",nestedKey:"nombre_municipio",editable:!1,selectOptions:[]},{key:"ministerio",label:"Ministerio",nestedKey:"nombre_ministerio",editable:!1,selectOptions:[]},{key:"createdAt",label:"Creado",editable:!1},{key:"updatedAt",label:"Actualizado",editable:!1}],this.title="Proveedores",this.addButtonText="Agregar Proveedor",this.displayedColumns=[],this.searchInputControl=new l.NI(""),this.selectedRow=null,this.isLoading=!1,this.pagination={length:0,page:0,size:10},this._unsubscribeAll=new p.x,this.proveedoresConRepresentantes=[],this.dataSource=new A.by([]),this.selectedRowForm=new l.cw({})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.cdr.detectChanges()}ngOnInit(){this.displayedColumns=this.columns.map(t=>t.key).concat("details"),(0,T.D)({ministerios:this.CatalogService.getMinisterios(),municipios:this.CatalogService.getMunicipios()}).subscribe({next:t=>{this.ministerios=t.ministerios?.data||[],this.columns.find(n=>"ministerio"===n.key).selectOptions=this.ministerios,this.mockMinisterio=this.ministerios;let i=[];if(t.municipios?.data){let n=1;for(const[s,d]of Object.entries(t.municipios.data))Array.isArray(d)&&d.forEach(R=>{i.push({id:n++,provincia_id:Number(s),nombre_municipio:R})})}this.municipios=i,this.columns.find(n=>"municipio"===n.key).selectOptions=this.municipios,this.mockMunicipio=this.municipios,this.loadProveedores(),this.cdr.markForCheck()},error:t=>{console.error("Error loading catalogs:",t),this.loadProveedores()}}),this.proveedorService.getDashboardproveedor(),this.searchInputControl.valueChanges.pipe((0,S.b)(300),(0,c.x)(),(0,x.R)(this._unsubscribeAll)).subscribe(t=>{this.closeDetails(),this.dataSource.filter=t?.trim().toLowerCase()||"",this.cdr.detectChanges(),this.dataSource._updateChangeSubscription()}),this.dataSource.filterPredicate=(t,i)=>[t.nombre||"",t.codigo||"",t.representante||"",t.telefonos||"",t.domicilio||"",this.getMunicipioName(t.municipio),this.getMinisterioName(t.ministerio)].join(" ").toLowerCase().includes(i)}getMunicipioName(t){return t?"string"==typeof t?t:t.nombre_municipio||"N/A":"N/A"}getMinisterioName(t){if(!t)return"N/A";if("string"==typeof t){const i=this.ministerios.find(n=>n.sigla===t||n.nombre===t);return i?i.nombre:t}return t.nombre||"N/A"}closeDetails(){this.selectedRow=null,this.cdr.detectChanges()}loadProveedores(){this.isLoading=!0,this.proveedorService.getProveedores().subscribe({next:t=>{console.log("Proveedores received from service:",t),this.data=t,this.dataSource.data=this.data,this.pagination.length=this.data.length,this.sort&&(this.dataSource.sort=this.sort),this.paginator&&(this.dataSource.paginator=this.paginator),this.dataSource._updateChangeSubscription(),this.isLoading=!1,this.cdr.markForCheck()},error:t=>{console.error("Error loading proveedores:",t),this.isLoading=!1,this.cdr.markForCheck()}})}trackByFn(t,i){return i.id}getNestedValue(t,i,n){return n&&t[i]?t[i][n]:t[i]||""}toggleDetails(t){this.selectedRow=this.selectedRow?.id===t?null:this.data.find(i=>i.id===t),this.selectedRowForm=new l.cw({nombre:new l.NI(this.selectedRow?.nombre),codigo:new l.NI(this.selectedRow?.codigo),telefonos:new l.NI(this.selectedRow?.telefonos),domicilio:new l.NI(this.selectedRow?.domicilio),municipio:new l.NI(this.selectedRow?.municipio),ministerio:new l.NI(this.selectedRow?.ministerio),representante:new l.NI(this.selectedRow?.representante)}),this.cdr.markForCheck()}createRecord(){this.addNewProveedor()}addNewProveedor(){const t=window.innerWidth<=768;this.dialog.open(Y.d,{width:t?"90vw":"750px",maxWidth:t?"100vw":"90vw",height:t?"100vh":"90vh",maxHeight:"100vh",panelClass:"full-screen-dialog",disableClose:!1,autoFocus:!1,hasBackdrop:!t,position:t?{top:"0"}:{}}).afterClosed().subscribe(n=>{n&&this.proveedorService.createProveedor(n).subscribe({next:s=>{this.loadProveedores()},error:s=>{console.error("Error creating proveedor:",s)}})})}updateSelectedRecord(){if(this.selectedRow){const t={...this.selectedRow,...this.selectedRowForm.value};this.proveedorService.updateProveedor(this.selectedRow.id,t).subscribe({next:()=>{this.loadProveedores(),this.selectedRow=null},error:i=>{console.error("Error updating proveedor:",i)}})}}deleteSelectedRecord(){this.selectedRow&&this.proveedorService.deleteProveedor(this.selectedRow.id).subscribe({next:()=>{this.loadProveedores(),this.selectedRow=null},error:t=>{console.error("Error deleting proveedor:",t)}})}exportToCSV(){if(!this.dataSource.filteredData||0===this.dataSource.filteredData.length)return;const i=this.dataSource.filteredData.map(n=>({nombre:n.nombre||"",codigo:n.codigo||"",estado:n.estado||"",representantes:this.getRepresentantesNames(n),telefonos:n.telefonos||"",prefijo_provincia:n.prefijo_provincia||"",provincia:n.provincia||"",municipio:"string"==typeof n.municipio?n.municipio:n.municipio?.nombre_municipio||"",ministerio:"string"==typeof n.ministerio?n.ministerio:n.ministerio?.nombre_ministerio||"",createdAt:n.createdAt||"",updatedAt:n.updatedAt||""}));this.exportService.exportToExcel(i,[{key:"nombre",label:"Nombre"},{key:"codigo",label:"C\xf3digo"},{key:"estado",label:"Estado"},{key:"representantes",label:"Representantes"},{key:"telefonos",label:"Tel\xe9fonos"},{key:"prefijo_provincia",label:"Prefijo Provincia"},{key:"provincia",label:"Provincia"},{key:"municipio",label:"Municipio"},{key:"ministerio",label:"Ministerio"},{key:"createdAt",label:"Creado"},{key:"updatedAt",label:"Actualizado"}],"proveedores_export.csv")}exportToPDF(){if(!this.dataSource.filteredData||0===this.dataSource.filteredData.length)return void alert("No hay datos para exportar");const i=this.dataSource.filteredData.map(n=>({nombre:this.truncateText(n.nombre||"",25),codigo:n.codigo||"",telefonos:this.truncateText(n.telefonos||"",20),domicilio:this.truncateText(n.domicilio||"",30),municipio:"string"==typeof n.municipio?n.municipio:n.municipio?.nombre_municipio||"",ministerio:"string"==typeof n.ministerio?n.ministerio:n.ministerio?.nombre_ministerio||""}));this.exportService.exportToPDF(i,[{key:"nombre",label:"Nombre"},{key:"codigo",label:"C\xf3digo"},{key:"telefonos",label:"Tel\xe9fonos"},{key:"domicilio",label:"Domicilio"},{key:"municipio",label:"Municipio"},{key:"ministerio",label:"Ministerio"}],"Reporte de Proveedores","assets/images/logo/logo.jpg")}truncateText(t,i){return t?t.length<=i?t:t.substring(0,i)+"...":""}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(q.uw),e.Y36(y.z),e.Y36(g.a),e.Y36(P),e.Y36(e.sBO),e.Y36(I.T))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-proveedor-list"]],viewQuery:function(i,n){if(1&i&&(e.Gf(u.YE,5),e.Gf(b.NW,5)),2&i){let s;e.iGM(s=e.CRH())&&(n.sort=s.first),e.iGM(s=e.CRH())&&(n.paginator=s.first)}},standalone:!0,features:[e.jDz],decls:42,vars:14,consts:[[1,"flex","flex-col","min-h-screen","p-6","w-full"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden","mb-6","w-full"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","flex-col","sm:flex-row","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","mt-4","sm:mt-0","w-50","text-lg",3,"color","click"],[3,"svgIcon"],[1,"ml-2","hidden","sm:inline"],[1,"ml-2","sm:hidden"],["mat-icon-button","","matTooltip","Exportar tabla","aria-label","Exportar tabla",1,"ml-4","mt-4","sm:mt-0",3,"matMenuTriggerFor","color"],["exportMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden"],[4,"ngIf","ngIfElse"],["rowDetailsTemplate",""],["noProveedores",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"hidden","lg:block","w-full","overflow-x-auto"],[1,"w-full","min-w-max"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],["matTooltipPosition","above",1,"truncate",3,"matTooltip"],[1,"sticky","right-0","bg-gray-50","dark:bg-black","dark:bg-opacity-5","z-20","flex","items-center","justify-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"lg:hidden"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"sticky","right-0","bg-gray-50","dark:bg-black","dark:bg-opacity-90","z-30","flex","items-center","justify-center"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],["class","grid",4,"ngIf"],[1,"grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","mb-4","mx-4","shadow-sm"],[1,"p-4","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-500","dark:text-gray-400"],["class","text-sm text-gray-700 dark:text-gray-300 mt-1",4,"ngIf"],["mat-icon-button","",1,"ml-4","flex-shrink-0",3,"click"],[1,"p-4","space-y-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"text-xs","font-medium","text-gray-500","dark:text-gray-400","uppercase","tracking-wide"],[1,"mt-1","text-sm","text-gray-900","dark:text-white"],[4,"ngIf"],[1,"text-sm","text-gray-700","dark:text-gray-300","mt-1"],[1,"font-medium"],[1,"border-t","border-gray-200","dark:border-gray-700"],[1,"shadow-lg","overflow-hidden","bg-white","dark:bg-gray-800"],[1,"flex","border-b"],[1,"responsive-form","flex","flex-col","w-full","max-w-full","mx-auto","box-border",2,"width","100%","max-width","500px","padding","0 16px","box-sizing","border-box",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-1/3","sm:pl-8"],[1,"w-full"],["matInput","","formControlName","nombre"],["matInput","","formControlName","codigo"],["matInput","","formControlName","telefonos"],["matInput","","formControlName","representante"],["formControlName","municipio"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ministerio"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","border-t","px-4","sm:px-8","py-4"],[1,"hidden","lg:block","flex-1"],[1,"flex","flex-col","sm:flex-row","items-center","gap-3","w-full","sm:w-auto","lg:w-auto"],["mat-stroked-button","",1,"w-full","sm:w-auto","lg:w-auto","px-6",3,"color","click"],[3,"value"],[1,"p-8","sm:p-16","border-b","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5),e.YNc(6,L,2,1,"div",6),e.TgZ(7,"div",7)(8,"div",8)(9,"h2",9),e._uU(10," Proveedores "),e.qZA()()(),e.TgZ(11,"div",10)(12,"mat-form-field",11),e._UZ(13,"mat-icon",12)(14,"input",13),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){return n.addNewProveedor()}),e._UZ(16,"mat-icon",15),e.TgZ(17,"span",16),e._uU(18,"Agregar Proveedor"),e.qZA(),e.TgZ(19,"span",17),e._uU(20,"Agregar"),e.qZA()(),e.TgZ(21,"button",18),e._UZ(22,"mat-icon",15),e.qZA(),e.TgZ(23,"mat-menu",null,19)(25,"button",20),e.NdJ("click",function(){return n.exportToCSV()}),e.TgZ(26,"mat-icon"),e._uU(27,"description"),e.qZA(),e.TgZ(28,"span"),e._uU(29,"Exportar a CSV"),e.qZA()(),e.TgZ(30,"button",20),e.NdJ("click",function(){return n.exportToPDF()}),e.TgZ(31,"mat-icon"),e._uU(32,"picture_as_pdf"),e.qZA(),e.TgZ(33,"span"),e._uU(34,"Exportar a PDF"),e.qZA()()()()(),e.TgZ(35,"div",21)(36,"div",22),e.YNc(37,ne,38,22,"ng-container",23)(38,se,41,5,"ng-template",null,24,e.W1O)(40,le,2,0,"ng-template",null,25,e.W1O),e.qZA()()()()()),2&i){const s=e.MAs(24),d=e.MAs(41);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:check-circle"),e.xp6(3),e.Q6J("ngIf",n.isLoading),e.xp6(6),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar proveedores"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("matMenuTriggerFor",s)("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(15),e.Q6J("ngIf",(null==n.dataSource||null==n.dataSource.data?null:n.dataSource.data.length)>0)("ngIfElse",d)}},dependencies:[o.ez,o.mk,o.sg,o.O5,o.tP,f.ot,f.lW,f.RK,E.Cv,E.pW,u.JX,u.YE,A.p0,C.Ps,C.Hw,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.oH,l.sg,l.u,b.TU,b.NW,_.lN,_.KE,_.hX,_.qo,v.c,v.Nt,w.LD,w.gD,J.ey,Z.Tx,Z.VK,Z.OP,Z.p6,F.AV,F.gM,U.t,q.Is],styles:[".inventory-grid{display:grid;grid-template-columns:1fr 120px 120px 150px 180px 180px 180px 180px 180px 180px 180px 180px 80px;gap:1rem;width:100%;box-sizing:border-box}.inventory-grid.z-3{position:sticky;top:0;background:white;z-index:20;box-shadow:0 2px 5px -2px #0000001a;overflow:visible}.dark .inventory-grid.z-3{background:#1E293B}.inventory-grid>div:last-child{position:sticky;right:0;background:white;z-index:10;box-shadow:-2px 0 5px -2px #0000001a}.dark .inventory-grid>div:last-child{background:#1E293B}.sticky-end{position:sticky;right:0;background:white;z-index:11;box-shadow:-2px 0 5px -2px #0000001a}.dark .sticky-end{background:#1E293B}.dark .inventory-grid>div{color:#e0e0e0}.dark .sticky-end .mat-stroked-button{background:#1E293B!important;color:#fff!important;border-color:#1e293b!important}.dark .sticky-end .mat-stroked-button .mat-icon{color:#fff!important}.inventory-grid>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host{display:block;width:100%;overflow-x:auto}@media (max-width: 768px){.inventory-grid{grid-template-columns:25px 70px 110px 90px 90px 80px 80px 80px 80px 80px 35px}}\n"],encapsulation:2,changeDetection:0})}return r})();var B=a(2939),G=a(5986);function de(r,m){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"El nombre es obligatorio"),e.qZA())}function me(r,m){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Los apellidos son obligatorios"),e.qZA())}function pe(r,m){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"El email es obligatorio"),e.qZA())}function ue(r,m){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Email inv\xe1lido"),e.qZA())}function ge(r,m){if(1&r&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&r){const t=m.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_entidad," ")}}function _e(r,m){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"La entidad es obligatoria"),e.qZA())}let fe=(()=>{class r{constructor(t,i,n,s){this.fb=t,this.representanteService=i,this.dialogRef=n,this.data=s,this.entidades=[]}ngOnInit(){this.form=this.fb.group({nombre:["",l.kI.required],apellidos:["",l.kI.required],telefono:[""],email:["",[l.kI.required,l.kI.email]],cargo:[""],entidad:[null,l.kI.required]}),this.loadEntidades(),this.data&&this.form.patchValue(this.data)}loadEntidades(){this.entidades=[]}save(){if(this.form.valid){const t=this.form.value;this.data&&this.data.id?this.representanteService.updateRepresentante(this.data.id,t).subscribe({next:()=>{this.dialogRef.close("saved")},error:i=>{console.error("Error updating representante",i)}}):this.representanteService.createRepresentante(t).subscribe({next:()=>{this.dialogRef.close("saved")},error:i=>{console.error("Error creating representante",i)}})}}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(l.qu),e.Y36(P),e.Y36(q.so),e.Y36(q.WI))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-representante-form"]],standalone:!0,features:[e.jDz],decls:36,vars:8,consts:[[3,"formGroup","ngSubmit"],["appearance","fill",1,"w-full"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","apellidos","required",""],["matInput","","formControlName","telefono"],["matInput","","formControlName","email","required",""],["matInput","","formControlName","cargo"],["formControlName","entidad","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end","space-x-4","mt-4"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(i,n){if(1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(1,"mat-form-field",1)(2,"mat-label"),e._uU(3,"Nombre"),e.qZA(),e._UZ(4,"input",2),e.YNc(5,de,2,0,"mat-error",3),e.qZA(),e.TgZ(6,"mat-form-field",1)(7,"mat-label"),e._uU(8,"Apellidos"),e.qZA(),e._UZ(9,"input",4),e.YNc(10,me,2,0,"mat-error",3),e.qZA(),e.TgZ(11,"mat-form-field",1)(12,"mat-label"),e._uU(13,"Tel\xe9fono"),e.qZA(),e._UZ(14,"input",5),e.qZA(),e.TgZ(15,"mat-form-field",1)(16,"mat-label"),e._uU(17,"Email"),e.qZA(),e._UZ(18,"input",6),e.YNc(19,pe,2,0,"mat-error",3)(20,ue,2,0,"mat-error",3),e.qZA(),e.TgZ(21,"mat-form-field",1)(22,"mat-label"),e._uU(23,"Cargo"),e.qZA(),e._UZ(24,"input",7),e.qZA(),e.TgZ(25,"mat-form-field",1)(26,"mat-label"),e._uU(27,"Entidad"),e.qZA(),e.TgZ(28,"mat-select",8),e.YNc(29,ge,2,2,"mat-option",9),e.qZA(),e.YNc(30,_e,2,0,"mat-error",3),e.qZA(),e.TgZ(31,"div",10)(32,"button",11),e.NdJ("click",function(){return n.cancel()}),e._uU(33,"Cancelar"),e.qZA(),e.TgZ(34,"button",12),e._uU(35,"Guardar"),e.qZA()()()),2&i){let s,d,R,D,j;e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("ngIf",null==(s=n.form.get("nombre"))?null:s.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(d=n.form.get("apellidos"))?null:d.hasError("required")),e.xp6(9),e.Q6J("ngIf",null==(R=n.form.get("email"))?null:R.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(D=n.form.get("email"))?null:D.hasError("email")),e.xp6(9),e.Q6J("ngForOf",n.entidades),e.xp6(1),e.Q6J("ngIf",null==(j=n.form.get("entidad"))?null:j.hasError("required")),e.xp6(4),e.Q6J("disabled",n.form.invalid)}},dependencies:[o.ez,o.sg,o.O5,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,_.lN,_.KE,_.hX,_.TO,v.c,v.Nt,f.ot,f.lW,w.LD,w.gD,J.ey]})}return r})();var he=a(5170),be=a(6819);const ve=["sort"],xe=["paginator"],Te=["columnMenu"];function Ze(r,m){1&r&&(e.TgZ(0,"div",35),e._UZ(1,"mat-progress-bar",36),e.qZA()),2&r&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function Ce(r,m){if(1&r){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(n){return n.stopPropagation()}),e.TgZ(1,"mat-checkbox",38),e.NdJ("change",function(){const s=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.toggleColumn(s.key))})("click",function(n){return n.stopPropagation()}),e._uU(2),e.qZA()()}if(2&r){const t=m.$implicit;e.xp6(1),e.Q6J("checked",t.visible)("color","primary"),e.xp6(1),e.hij(" ",t.label," ")}}function ye(r,m){if(1&r&&(e.TgZ(0,"div",49)(1,"span"),e._uU(2),e.qZA()()),2&r){const t=m.$implicit;e.Q6J("matTooltip",t.tooltip),e.xp6(2),e.Oqu(t.label)}}function ke(r,m){if(1&r&&(e.TgZ(0,"div",57),e._uU(1),e.qZA()),2&r){const t=m.$implicit,i=e.oxw().$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.getColumnValue(i,t.key)),e.xp6(1),e.hij(" ",n.getColumnValue(i,t.key)||"N/A"," ")}}function Ae(r,m){1&r&&e.GkF(0)}const K=r=>({$implicit:r});function we(r,m){if(1&r&&(e.TgZ(0,"div",58)(1,"div",59),e.YNc(2,Ae,1,0,"ng-container",60),e.qZA()()),2&r){const t=e.oxw().$implicit;e.oxw(2);const i=e.MAs(55);e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,K,t))}}const $=(r,m,t)=>({"bg-green-500":r,"bg-red-500":m,"bg-gray-400":t});function Pe(r,m){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",50)(2,"div",43),e._UZ(3,"span",51),e.qZA(),e.YNc(4,ke,2,2,"div",52),e.TgZ(5,"div",53)(6,"button",54),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.toggleDetails(s.id))}),e._UZ(7,"mat-icon",55),e.qZA(),e.TgZ(8,"button",54),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.deleteRepresentante(s.id))}),e._UZ(9,"mat-icon",55),e.qZA()()(),e.YNc(10,we,3,4,"div",56),e.BQk()}if(2&r){const t=m.$implicit,i=e.oxw(2);e.xp6(1),e.Udp("grid-template-columns","auto "+i.getGridColumns()),e.xp6(2),e.Q6J("ngClass",e.kEZ(12,$,"activo"===t.estado,"inactivo"===t.estado,!t.estado))("matTooltip",t.estado||"Sin estado"),e.xp6(1),e.Q6J("ngForOf",i.getVisibleColumns()),e.xp6(2),e.Q6J("color","primary")("matTooltip","Ver detalles"),e.xp6(1),e.Q6J("svgIcon",(null==i.selectedRow?null:i.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(1),e.Q6J("color","warn")("matTooltip","Eliminar"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(1),e.Q6J("ngIf",(null==i.selectedRow?null:i.selectedRow.id)===t.id)}}function Ue(r,m){1&r&&e.GkF(0)}function Re(r,m){if(1&r&&(e.TgZ(0,"div",71),e.YNc(1,Ue,1,0,"ng-container",60),e.qZA()),2&r){const t=e.oxw().$implicit;e.oxw(2);const i=e.MAs(55);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,K,t))}}function Ee(r,m){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",61)(2,"div",62)(3,"div",63),e._UZ(4,"span",64),e.TgZ(5,"h3",65),e._uU(6),e.qZA()()(),e.TgZ(7,"div",66)(8,"div")(9,"span",67),e._uU(10,"Cargo:"),e.qZA(),e._uU(11),e.qZA(),e.TgZ(12,"div")(13,"span",67),e._uU(14,"Tel\xe9fono:"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"div")(17,"span",67),e._uU(18,"Email:"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"div")(21,"span",67),e._uU(22,"Proveedor:"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"div")(25,"span",67),e._uU(26,"Ministerio:"),e.qZA(),e._uU(27),e.qZA()(),e.TgZ(28,"div",68)(29,"button",69),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.toggleDetails(s.id))}),e._UZ(30,"mat-icon",15),e._uU(31," Detalles "),e.qZA(),e.TgZ(32,"button",69),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.deleteRepresentante(s.id))}),e._UZ(33,"mat-icon",15),e._uU(34," Eliminar "),e.qZA()(),e.YNc(35,Re,2,4,"div",70),e.qZA(),e.BQk()}if(2&r){const t=m.$implicit,i=e.oxw(2);e.xp6(4),e.Q6J("ngClass",e.kEZ(13,$,"activo"===t.estado,"inactivo"===t.estado,!t.estado)),e.xp6(2),e.AsE(" ",t.nombre," ",t.apellido," "),e.xp6(5),e.hij(" ",t.cargo||"--",""),e.xp6(4),e.hij(" ",t.telefono||"--",""),e.xp6(4),e.hij(" ",t.email||"--",""),e.xp6(4),e.hij(" ",(null==t.Proveedor?null:t.Proveedor.nombre)||"--",""),e.xp6(4),e.hij(" ",(null==t.Proveedor?null:t.Proveedor.ministerio)||"--",""),e.xp6(2),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon",(null==i.selectedRow?null:i.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("color","warn"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(2),e.Q6J("ngIf",(null==i.selectedRow?null:i.selectedRow.id)===t.id)}}const qe=r=>({"pointer-events-none":r}),Ne=()=>[5,10,25,100];function Me(r,m){if(1&r&&(e.ynx(0),e.TgZ(1,"div",39)(2,"div",40)(3,"div",41)(4,"div",42)(5,"div",43),e._UZ(6,"span"),e.qZA(),e.YNc(7,ye,3,2,"div",44),e.TgZ(8,"div",45)(9,"span"),e._uU(10,"Acciones"),e.qZA()()(),e.YNc(11,Pe,11,16,"ng-container",46),e.qZA()()(),e.TgZ(12,"div",47),e.YNc(13,Ee,36,17,"ng-container",46),e.qZA(),e._UZ(14,"mat-paginator",48),e.BQk()),2&r){const t=e.oxw();e.xp6(4),e.Udp("grid-template-columns","auto "+t.getGridColumns()),e.xp6(3),e.Q6J("ngForOf",t.getVisibleColumns()),e.xp6(4),e.Q6J("ngForOf",t.dataSource.data)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngForOf",t.dataSource.data)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("ngClass",e.VKq(13,qe,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(15,Ne))("showFirstLastButtons",!0)}}function Se(r,m){1&r&&(e.TgZ(0,"div",72),e._uU(1,"\xa1No hay representantes!"),e.qZA())}function Ie(r,m){if(1&r){const t=e.EpF();e.TgZ(0,"div",73)(1,"form",74)(2,"div",75)(3,"mat-form-field",76)(4,"mat-label"),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",77),e.qZA(),e.TgZ(7,"mat-form-field",76)(8,"mat-label"),e._uU(9,"Apellido"),e.qZA(),e._UZ(10,"input",78),e.qZA(),e.TgZ(11,"mat-form-field",76)(12,"mat-label"),e._uU(13,"Cargo"),e.qZA(),e._UZ(14,"input",79),e.qZA(),e.TgZ(15,"mat-form-field",76)(16,"mat-label"),e._uU(17,"Tel\xe9fono"),e.qZA(),e._UZ(18,"input",80),e.qZA(),e.TgZ(19,"mat-form-field",76)(20,"mat-label"),e._uU(21,"Email"),e.qZA(),e._UZ(22,"input",81),e.qZA(),e.TgZ(23,"mat-form-field",76)(24,"mat-label"),e._uU(25,"Estado"),e.qZA(),e.TgZ(26,"mat-select",82)(27,"mat-option",83),e._uU(28,"Activo"),e.qZA(),e.TgZ(29,"mat-option",84),e._uU(30,"Inactivo"),e.qZA()()()(),e.TgZ(31,"div",85)(32,"button",86),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectedRow=null)}),e._uU(33," Cancelar "),e.qZA(),e.TgZ(34,"button",87),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateSelectedRecord())}),e._uU(35," Guardar Cambios "),e.qZA(),e.TgZ(36,"button",88),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteSelectedRecord())}),e._uU(37," Eliminar "),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.selectedRowForm),e.xp6(33),e.Q6J("color","primary")("disabled",t.selectedRowForm.invalid),e.xp6(2),e.Q6J("color","warn")}}const Fe=[{path:"lista",component:ce},{path:"representantes",component:(()=>{class r{getColumnValue(t,i){switch(i){case"nombre":return t.nombre||"";case"apellido":return t.apellido||"";case"cargo":return t.cargo||"";case"telefono":return t.telefono||"";case"email":return t.email||"";case"estado":return t.estado||"";case"proveedor_nombre":return t.Proveedor?.nombre||"";case"proveedor_codigo":return t.Proveedor?.codigo||"";case"tipo_empresa":return t.Proveedor?.tipo_empresa||"";case"ministerio":return t.Proveedor?.ministerio||"";case"provincia":return t.Proveedor?.provincia||"";case"municipio":return t.Proveedor?.municipio||"";case"numero_documento":return t.numero_documento||"";case"tipo_documento":return t.tipo_documento||"";default:return""}}constructor(t,i,n,s,d,R,D,j,Oe){this.representanteService=t,this.proveedorService=i,this.contratoService=n,this.suplementoService=s,this.dialog=d,this.snackBar=R,this.fb=D,this.exportService=j,this.cdr=Oe,this.dataSource=new A.by,this.suplementosDataSource=new A.by,this.columnSettings=[{key:"nombre",label:"Nombre",visible:!0,tooltip:"Nombre completo del representante"},{key:"apellido",label:"Apellido",visible:!0,tooltip:"Apellido completo del representante"},{key:"cargo",label:"Cargo",visible:!0,tooltip:"Cargo del representante"},{key:"telefono",label:"Tel\xe9fono",visible:!0,tooltip:"Tel\xe9fono del representante"},{key:"email",label:"Email",visible:!0,tooltip:"Email del representante"},{key:"estado",label:"Estado",visible:!0,tooltip:"Estado del representante"},{key:"proveedor_nombre",label:"Proveedor",visible:!0,tooltip:"Nombre del proveedor"},{key:"proveedor_codigo",label:"C\xf3digo Proveedor",visible:!1,tooltip:"C\xf3digo del proveedor"},{key:"tipo_empresa",label:"Tipo Empresa",visible:!1,tooltip:"Tipo de empresa"},{key:"ministerio",label:"Ministerio",visible:!0,tooltip:"Ministerio del proveedor"},{key:"provincia",label:"Provincia",visible:!1,tooltip:"Provincia del proveedor"},{key:"municipio",label:"Municipio",visible:!1,tooltip:"Municipio del proveedor"},{key:"numero_documento",label:"N\xfamero Documento",visible:!1,tooltip:"N\xfamero de documento"},{key:"tipo_documento",label:"Tipo Documento",visible:!1,tooltip:"Tipo de documento"}],this.displayedColumns=["proveedor_nombre","proveedor_codigo","nombre","apellido","cargo","telefono","email","estado","tipo_empresa","ministerio","provincia","municipio","numero_documento","acciones"],this.displayedSuplementosColumns=["no_suplemento","fecha_firmado","valor_cup","valor_usd","estado","acciones"],this.selection=new Set,this.suplementoSelection=new Set,this.isLoading=!1,this.isSuplementosLoading=!1,this.contratos=[],this.suplementos=[],this.showSuplementos=!1,this.selectedContratoId=null,this.searchControl=new l.NI(""),this.pagination={length:0,page:0,size:10},this.selectedRow=null,this.initSelectedRowForm()}initSelectedRowForm(){this.selectedRowForm=this.fb.group({nombre:[""],apellido:[""],cargo:[""],telefono:[""],email:[""],estado:[""]})}toggleColumn(t){const i=this.columnSettings.find(n=>n.key===t);i&&(i.visible=!i.visible,this.cdr.markForCheck())}updateSelectedRecord(){}deleteSelectedRecord(){}openComunaDialog(){this.snackBar.open("Comuna dialog opened","Cerrar",{duration:3e3,panelClass:"success-snackbar",horizontalPosition:"right",verticalPosition:"top"})}getGridColumns(){return this.columnSettings.filter(n=>n.visible),`${this.columnSettings.filter(n=>n.visible).map(()=>"minmax(150px, 1fr)").join(" ")} minmax(100px, 100px)`}getVisibleColumns(){return this.columnSettings.filter(t=>t.visible)}closeColumnMenu(){this.columnMenuTrigger&&this.columnMenuTrigger.closeMenu()}loadRepresentantes(){this.isLoading=!0,this.representanteService.getRepresentantes().subscribe({next:t=>{const i=Array.isArray(t)?t:t.data||[];this.proveedorService.getProveedores().subscribe({next:n=>{i.forEach(s=>{const d=n.find(R=>R.id===s.proveedor_id);s.Proveedor=d?{id:d.id,nombre:d.nombre||"",codigo:d.codigo||"",tipo_empresa:"",ministerio:"string"==typeof d.ministerio?d.ministerio:d.ministerio?.nombre_ministerio||"",provincia:d.provincia||"",municipio:"string"==typeof d.municipio?d.municipio:d.municipio?.nombre_municipio||"",telefonos:d.telefonos||"",prefijo_provincia:d.prefijo_provincia||"",estado:d.estado||"",representante_legal_id:d.representante_legal_id,createdAt:d.createdAt||"",updatedAt:d.updatedAt||""}:null}),this.dataSource.data=i,this.pagination.length=i.length,this.paginator&&(this.dataSource.paginator=this.paginator),this.sort&&(this.dataSource.sort=this.sort),this.selectedContratoId&&this.applyContratoFilter(),this.isLoading=!1},error:n=>{this.showMessage("Error al cargar los proveedores","error"),this.isLoading=!1}})},error:t=>{this.showMessage("Error al cargar los representantes","error"),this.isLoading=!1}})}ngAfterViewInit(){this.dataSource.data.length>0&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort),this.dataSource.connect().subscribe(()=>{this.paginator&&this.sort&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}ngOnInit(){this.setupFilter(),this.loadRepresentantes(),this.loadSuplementos(),this.dataSource.filterPredicate=(t,i)=>[t.Proveedor?.nombre||"",t.Proveedor?.codigo||"",t.nombre||"",t.apellido||"",t.cargo||"",t.telefono||"",t.email||"",t.estado||"",t.Proveedor?.tipo_empresa||"",t.Proveedor?.ministerio||"",t.Proveedor?.provincia||"",t.Proveedor?.municipio||"",t.numero_documento||"",t.tipo_documento||""].join(" ").toLowerCase().includes(i)}setupFilter(){this.searchControl.valueChanges.pipe((0,S.b)(300),(0,c.x)()).subscribe(t=>{this.applyFilter(t)})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.selectedContratoId&&this.applyContratoFilter()}showMessage(t,i="success"){this.snackBar.open(t,"Cerrar",{duration:5e3,panelClass:"success"===i?"success-snackbar":"error-snackbar",horizontalPosition:"right",verticalPosition:"top"})}applyContratoFilter(){if(this.selectedContratoId){const t=[...this.dataSource.data];this.dataSource.data=t.filter(i=>i.contrato_id===this.selectedContratoId)}else this.loadRepresentantes()}loadSuplementos(){this.isSuplementosLoading=!0,this.suplementoService.getSuplementos().subscribe({next:t=>{this.suplementos=t,this.suplementosDataSource.data=t,this.suplementosDataSource.paginator=this.paginator,this.suplementosDataSource.sort=this.sort,this.isSuplementosLoading=!1},error:t=>{this.showMessage("Error al cargar los suplementos","error"),this.isSuplementosLoading=!1}})}openAddDialog(){this.dialog.open(fe,{width:"600px",data:null}).afterClosed().subscribe(i=>{"saved"===i&&this.loadRepresentantes()})}exportToPDF(){const i=this.dataSource.filteredData.map(n=>({nombre:n.nombre||"",apellido:n.apellido||"",cargo:n.cargo||"",telefono:n.telefono||"",email:n.email||"",estado:n.estado||"",proveedor_nombre:n.Proveedor?.nombre||"",proveedor_codigo:n.Proveedor?.codigo||"",tipo_empresa:n.Proveedor?.tipo_empresa||"",ministerio:n.Proveedor?.ministerio||"",provincia:n.Proveedor?.provincia||"",municipio:n.Proveedor?.municipio||"",numero_documento:n.numero_documento||"",tipo_documento:n.tipo_documento||""}));this.exportService.exportToPDF(i,[{key:"nombre",label:"Nombre"},{key:"apellido",label:"Apellido"},{key:"cargo",label:"Cargo"},{key:"telefono",label:"Tel\xe9fono"},{key:"email",label:"Email"},{key:"estado",label:"Estado"},{key:"proveedor_nombre",label:"Proveedor"},{key:"proveedor_codigo",label:"C\xf3digo Proveedor"},{key:"tipo_empresa",label:"Tipo Empresa"},{key:"ministerio",label:"Ministerio"},{key:"provincia",label:"Provincia"},{key:"municipio",label:"Municipio"},{key:"numero_documento",label:"N\xfamero Documento"},{key:"tipo_documento",label:"Tipo Documento"}],"Reporte de Representantes","assets/images/logo/logo.jpg")}print(){window.print()}exportToCSV(){const i=this.dataSource.filteredData.map(n=>({nombre:n.nombre||"",apellido:n.apellido||"",cargo:n.cargo||"",telefono:n.telefono||"",email:n.email||"",estado:n.estado||"",proveedor_nombre:n.Proveedor?.nombre||"",proveedor_codigo:n.Proveedor?.codigo||"",tipo_empresa:n.Proveedor?.tipo_empresa||"",ministerio:n.Proveedor?.ministerio||"",provincia:n.Proveedor?.provincia||"",municipio:n.Proveedor?.municipio||"",numero_documento:n.numero_documento||"",tipo_documento:n.tipo_documento||""}));this.exportService.exportToExcel(i,[{key:"nombre",label:"Nombre"},{key:"apellido",label:"Apellido"},{key:"cargo",label:"Cargo"},{key:"telefono",label:"Tel\xe9fono"},{key:"email",label:"Email"},{key:"estado",label:"Estado"},{key:"proveedor_nombre",label:"Proveedor"},{key:"proveedor_codigo",label:"C\xf3digo Proveedor"},{key:"tipo_empresa",label:"Tipo Empresa"},{key:"ministerio",label:"Ministerio"},{key:"provincia",label:"Provincia"},{key:"municipio",label:"Municipio"},{key:"numero_documento",label:"N\xfamero Documento"},{key:"tipo_documento",label:"Tipo Documento"}],"representantes_export.csv")}toggleDetails(t){if(this.selectedRow?.id===t)this.selectedRow=null;else{const i=this.dataSource.data.find(n=>n.id===t);i&&(this.selectedRow=i,this.selectedRowForm.patchValue({nombre:i.nombre||"",apellido:i.apellido||"",cargo:i.cargo||"",telefono:i.telefono||"",email:i.email||"",estado:i.estado||""}))}}deleteRepresentante(t){confirm("\xbfEst\xe1 seguro que desea eliminar este representante?")&&this.representanteService.deleteRepresentante(t).subscribe({next:()=>{this.showMessage("Representante eliminado exitosamente","success"),this.loadRepresentantes(),this.selectedRow?.id===t&&(this.selectedRow=null)},error:i=>{console.error("Error deleting representante:",i),this.showMessage("Error al eliminar el representante","error")}})}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(P),e.Y36(y.z),e.Y36(he.d),e.Y36(be.y),e.Y36(q.uw),e.Y36(B.ux),e.Y36(l.qu),e.Y36(I.T),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-representante-list"]],viewQuery:function(i,n){if(1&i&&(e.Gf(ve,5),e.Gf(xe,5),e.Gf(Te,5,Z.p6)),2&i){let s;e.iGM(s=e.CRH())&&(n.sort=s.first),e.iGM(s=e.CRH())&&(n.paginator=s.first),e.iGM(s=e.CRH())&&(n.columnMenuTrigger=s.first)}},standalone:!0,features:[e.jDz],decls:56,vars:18,consts:[[1,"flex","flex-col","min-h-screen","p-6","w-full"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden","mb-6","w-full"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","flex-col","sm:flex-row","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","mt-4","sm:mt-0","w-55","text-lg",3,"color","click"],[3,"svgIcon"],[1,"ml-2","hidden","sm:inline"],[1,"ml-2","sm:hidden"],["mat-icon-button","","matTooltip","Configuracion de las columnas",1,"ml-2","mt-4","sm:mt-0",3,"matMenuTriggerFor"],["mat-icon-button","","matTooltip","Exportar tabla","aria-label","Exportar tabla",1,"ml-4","mt-4","sm:mt-0",3,"matMenuTriggerFor","color"],["exportMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button","","color","primary","matTooltip","Imprimir","aria-label","Imprimir",1,"ml-2","mt-4","sm:mt-0",3,"click"],[1,"column-menu",3,"hasBackdrop"],["columnMenu","matMenu"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","border-b"],[1,"p-2",3,"click"],["class","flex items-center py-1 px-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",3,"click",4,"ngFor","ngForOf"],[1,"px-4","py-2","border-t"],["mat-stroked-button","","color","primary",1,"w-full",3,"click"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden"],[4,"ngIf","ngIfElse"],["noRepresentantes",""],["rowDetailsTemplate",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"flex","items-center","py-1","px-2","hover:bg-gray-100","dark:hover:bg-gray-700","rounded",3,"click"],[3,"checked","color","change","click"],[1,"hidden","lg:block","w-full"],[1,"relative","overflow-x-auto","overflow-y-hidden","max-w-full"],[1,"min-w-max"],[1,"sticky","top-0","z-20","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","border-b"],[1,"flex","items-center","justify-center"],["class","truncate flex items-center","matTooltipPosition","above",3,"matTooltip",4,"ngFor","ngForOf"],[1,"sticky","right-0","bg-gray-50","dark:bg-black","dark:bg-opacity-5","z-30","flex","items-center","justify-center","border-l"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"lg:hidden"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],["matTooltipPosition","above",1,"truncate","flex","items-center",3,"matTooltip"],[1,"grid","items-center","gap-4","py-3","px-6","md:px-8","border-b","hover:bg-gray-50","dark:hover:bg-gray-800","transition-colors","duration-200"],[1,"w-3","h-3","rounded-full","inline-block",3,"ngClass","matTooltip"],["class","truncate","matTooltipPosition","above",3,"matTooltip",4,"ngFor","ngForOf"],[1,"sticky","right-0","bg-white","dark:bg-gray-900","z-30","flex","items-center","justify-center","gap-2","border-l","pl-4"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"color","matTooltip","click"],[1,"icon-size-5",3,"svgIcon"],["class","w-full bg-gray-50 dark:bg-gray-800 border-b",4,"ngIf"],["matTooltipPosition","above",1,"truncate",3,"matTooltip"],[1,"w-full","bg-gray-50","dark:bg-gray-800","border-b"],[1,"p-6"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700","p-4","mb-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-3"],[1,"w-3","h-3","rounded-full","inline-block",3,"ngClass"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","gap-2","text-sm"],[1,"font-medium"],[1,"flex","justify-end","mt-4","gap-2"],["mat-stroked-button","",3,"color","click"],["class","mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],[1,"mt-4","pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"p-8","sm:p-16","border-b","text-4xl","font-semibold","tracking-tight","text-center"],[1,"max-w-4xl","mx-auto"],[1,"space-y-6",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","nombre","placeholder","Nombre del representante"],["matInput","","formControlName","apellido","placeholder","Apellido del representante"],["matInput","","formControlName","cargo","placeholder","Cargo del representante"],["matInput","","formControlName","telefono","placeholder","Tel\xe9fono del representante"],["matInput","","formControlName","email","type","email","placeholder","Email del representante"],["formControlName","estado"],["value","activo"],["value","inactivo"],[1,"flex","justify-end","gap-4","pt-4","border-t","border-gray-200","dark:border-gray-700"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","type","button",3,"color","disabled","click"],["mat-stroked-button","","type","button",3,"color","click"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5),e.YNc(6,Ze,2,1,"div",6),e.TgZ(7,"div",7)(8,"div",8)(9,"h2",9),e._uU(10,"Representantes"),e.qZA()()(),e.TgZ(11,"div",10)(12,"mat-form-field",11),e._UZ(13,"mat-icon",12)(14,"input",13),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){return n.openAddDialog()}),e._UZ(16,"mat-icon",15),e.TgZ(17,"span",16),e._uU(18,"Agregar Representante"),e.qZA(),e.TgZ(19,"span",17),e._uU(20,"Agregar"),e.qZA()(),e.TgZ(21,"button",18),e._UZ(22,"mat-icon",15),e.qZA(),e.TgZ(23,"button",19),e._UZ(24,"mat-icon",15),e.qZA(),e.TgZ(25,"mat-menu",null,20)(27,"button",21),e.NdJ("click",function(){return n.exportToCSV()}),e.TgZ(28,"mat-icon"),e._uU(29,"description"),e.qZA(),e.TgZ(30,"span"),e._uU(31,"Exportar a CSV"),e.qZA()(),e.TgZ(32,"button",21),e.NdJ("click",function(){return n.exportToPDF()}),e.TgZ(33,"mat-icon"),e._uU(34,"picture_as_pdf"),e.qZA(),e.TgZ(35,"span"),e._uU(36,"Exportar a PDF"),e.qZA()()(),e.TgZ(37,"button",22),e.NdJ("click",function(){return n.print()}),e.TgZ(38,"mat-icon"),e._uU(39,"print"),e.qZA()()()(),e.TgZ(40,"mat-menu",23,24)(42,"div",25),e._uU(43," Mostrar Columnas "),e.qZA(),e.TgZ(44,"div",26),e.NdJ("click",function(d){return d.stopPropagation()}),e.YNc(45,Ce,3,3,"div",27),e.qZA(),e.TgZ(46,"div",28)(47,"button",29),e.NdJ("click",function(){return n.closeColumnMenu()}),e._uU(48," Cerrar "),e.qZA()()(),e.TgZ(49,"div",30)(50,"div",31),e.YNc(51,Me,15,16,"ng-container",32)(52,Se,2,0,"ng-template",null,33,e.W1O),e.qZA()()()()(),e.YNc(54,Ie,38,4,"ng-template",null,34,e.W1O)),2&i){const s=e.MAs(26),d=e.MAs(41),R=e.MAs(53);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:users"),e.xp6(3),e.Q6J("ngIf",n.isLoading),e.xp6(6),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",n.searchControl)("autocomplete","off")("placeholder","Buscar representantes"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("matMenuTriggerFor",d),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:view-columns"),e.xp6(1),e.Q6J("matMenuTriggerFor",s)("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(16),e.Q6J("hasBackdrop",!1),e.xp6(5),e.Q6J("ngForOf",n.columnSettings),e.xp6(6),e.Q6J("ngIf",(null==n.dataSource||null==n.dataSource.data?null:n.dataSource.data.length)>0)("ngIfElse",R)}},dependencies:[o.ez,o.mk,o.sg,o.O5,o.tP,A.p0,u.JX,b.TU,b.NW,v.c,v.Nt,_.KE,_.hX,_.qo,_.lN,f.ot,f.lW,f.RK,C.Ps,C.Hw,E.Cv,E.pW,F.AV,F.gM,q.Is,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.oH,l.sg,l.u,w.LD,w.gD,J.ey,Z.Tx,Z.VK,Z.OP,Z.p6,U.t,B.ZX,G.p9,G.oG],styles:[".inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 150px 200px 180px 1fr 200px 200px 100px;gap:1rem;width:100%;box-sizing:border-box}.inventory-grid.z-10[_ngcontent-%COMP%]{position:sticky;top:0;background:white;z-index:20;box-shadow:0 2px 5px -2px #0000001a;overflow:visible}.dark[_ngcontent-%COMP%]   .inventory-grid.z-10[_ngcontent-%COMP%]{background:#1E293B}.inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{position:sticky;right:0;background:white;z-index:10;box-shadow:-2px 0 5px -2px #0000001a}.dark[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{background:#1E293B}.sticky-end[_ngcontent-%COMP%]{position:sticky;right:0;background:white;z-index:11;box-shadow:-2px 0 5px -2px #0000001a}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]{background:#1E293B}.dark[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#e0e0e0}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{background:#1E293B!important;color:#fff!important;border-color:#1e293b!important}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff!important}.inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]{display:block;width:100%;overflow-x:auto}@media (max-width: 768px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:25px 70px 110px 90px 90px 80px 80px 80px 80px 80px 35px}}"]})}return r})()}];let Je=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[k.Bz.forChild(Fe),k.Bz]})}return r})()},7174:(z,M,a)=>{a.d(M,{a:()=>S});var k=a(9397),u=a(553),b=a(2022),A=a(9212),l=a(9862);let S=(()=>{class c{constructor(p){this.http=p,this.baseUrl=u.N.apiUrl}getMinisterios(){return console.log("Calling getMinisterios"),this.http.get(b.P.CATALOGOS.MINISTERIOS).pipe((0,k.b)({next:p=>console.log("getMinisterios response:",p),error:p=>console.error("getMinisterios error:",p)}))}getProvincias(){return console.log("Calling getProvincias"),this.http.get(b.P.CATALOGOS.PROVINCIAS).pipe((0,k.b)({next:p=>console.log("getProvincias response:",p),error:p=>console.error("getProvincias error:",p)}))}getMunicipios(){return console.log("Calling getMunicipios"),this.http.get(b.P.CATALOGOS.MUNICIPIOS).pipe((0,k.b)({next:p=>console.log("getMunicipios response:",p),error:p=>console.error("getMunicipios error:",p)}))}getTiposEmpresa(){return console.log("Calling getTiposEmpresa"),this.http.get(b.P.CATALOGOS.TIPOS_EMPRESA).pipe((0,k.b)({next:p=>console.log("getTiposEmpresa response:",p),error:p=>console.error("getTiposEmpresa error:",p)}))}static#e=this.\u0275fac=function(T){return new(T||c)(A.LFG(l.eN))};static#t=this.\u0275prov=A.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},1892:(z,M,a)=>{a.d(M,{T:()=>A});var k=a(1388),u=a(5520),b=a(9212);let A=(()=>{class l{constructor(){}exportToPDF(c,x,p,T){if(!c||0===c.length)return void alert("No hay datos para exportar");const o=new k.ZP({orientation:"landscape",unit:"mm",format:"a4"});if(T){const f=new Image;f.src=T,f.onload=()=>{o.addImage(f,"JPEG",14,10,30,15),this.addPDFContent(o,c,x,p)},f.onerror=()=>{this.addPDFContent(o,c,x,p)}}else this.addPDFContent(o,c,x,p)}addPDFContent(c,x,p,T){c.setFontSize(16),c.setTextColor(40,40,40),c.text(T,50,20),c.setFontSize(10),c.setTextColor(100,100,100),c.text(`Fecha de generaci\xf3n: ${(new Date).toLocaleDateString("es-ES")}`,14,30),c.text(`Total de registros: ${x.length}`,14,35);const o=p.map(C=>C.label),f=x.map(C=>p.map(_=>this.formatValue(C[_.key])));(0,u.ZP)(c,{head:[o],body:f,startY:45,theme:"striped",styles:{fontSize:8,cellPadding:3,overflow:"linebreak",halign:"left"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255],fontStyle:"bold",fontSize:9},margin:{top:45,left:14,right:14,bottom:20},didDrawPage:C=>{const _=c.getNumberOfPages(),v=c.internal.pageSize,w=v.height||v.getHeight();c.setFontSize(8),c.setTextColor(100,100,100),c.text(`P\xe1gina ${C.pageNumber} de ${_}`,14,w-10);const Z="Sistema Contratacion",U=c.getTextWidth(Z),q=v.width||v.getWidth();c.text(Z,q-14-U,w-10)}});const E=`${T.toLowerCase().replace(/\s+/g,"_")}_export_${(new Date).toISOString().split("T")[0]}.pdf`;c.save(E)}exportToExcel(c,x,p){if(!c||0===c.length)return void alert("No hay datos para exportar");const T=[],o=x.map(v=>v.label);T.push(o.join(",")),c.forEach(v=>{const w=x.map(Z=>{const U=this.formatValue(v[Z.key]);return"string"==typeof U&&(U.includes(",")||U.includes('"'))?`"${U.replace(/"/g,'""')}"`:U});T.push(w.join(","))});const f=T.join("\n"),E=new Blob([f],{type:"text/csv;charset=utf-8;"}),C=window.URL.createObjectURL(E),_=document.createElement("a");_.href=C,_.download=p.endsWith(".csv")?p:`${p}.csv`,_.click(),window.URL.revokeObjectURL(C)}formatValue(c){return null==c?"":c instanceof Date?c.toLocaleDateString("es-ES"):"number"==typeof c?c.toLocaleString("es-ES"):c.toString()}static#e=this.\u0275fac=function(x){return new(x||l)};static#t=this.\u0275prov=b.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()}}]);