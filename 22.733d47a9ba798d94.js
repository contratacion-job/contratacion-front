"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[22],{2022:(io,D,m)=>{m.r(D),m.d(D,{SuplementosRoutingModule:()=>no});var F=m(1896),_=m(3566),v=m(1476),s=m(5313),r=m(6223),J=m(9773),y=m(3620),d=m(6814),g=m(2296),U=m(6007),Z=m(617),u=m(4170),x=m(4516),C=m(8525),W=m(7988),K=m(6385),A=m(2596),q=m(7700),X=m(7668),b=m(2246),N=m(8645),h=m(8034),j=m(3680),e=m(9212);function ee(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de contrato es requerido "),e.qZA())}function te(o,a){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.vigencia," ",t.tipo_vigencia," ")}}function oe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La vigencia es requerida "),e.qZA())}function ne(o,a){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function ie(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El proveedor es requerido "),e.qZA())}function ae(o,a){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre_tipo_contrato," ")}}function re(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El tipo de contrato es requerido "),e.qZA())}function ce(o,a){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre_departamento," ")}}function le(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El departamento es requerido "),e.qZA())}function me(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de contrato es requerido "),e.qZA())}function se(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha de entrada es requerida "),e.qZA())}function de(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha de firma es requerida "),e.qZA())}function ue(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha de vencimiento es requerida "),e.qZA())}function pe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor en CUP es requerido "),e.qZA())}function _e(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor debe ser mayor o igual a 0 "),e.qZA())}let fe=(()=>{class o{constructor(t,n,i){this.fb=t,this.dialogRef=n,this.data=i,this.proveedores=b.UB,this.contratos=b.Io,this.isEditMode=!1,this.departamentos=[],this.tiposContrato=[],this.vigencias=[],this.suplementoForm=this.fb.group({id:[""],vigencia_id:["",r.kI.required],proveedor_id:["",r.kI.required],tipo_contrato_id:["",r.kI.required],no_contrato_id:["",r.kI.required],departamento_id:["",r.kI.required],no_contrato_contratacion:["",r.kI.required],fecha_entrada:["",r.kI.required],fecha_firmado:["",r.kI.required],valor_cup:[0,[r.kI.required,r.kI.min(0)]],monto_vencimiento_cup:[0],monto_vencimiento_cl:[0],valor_usd:[0],monto_vencimiento_usd:[0],fecha_vencido:["",r.kI.required],observaciones:[""]})}ngOnInit(){if(this.vigencias=b.yY,this.tiposContrato=b.j2,this.departamentos=b.iy,"edit"===this.data?.action&&this.data.suplemento){this.isEditMode=!0;const t=this.data.suplemento;this.suplementoForm.patchValue({...t,fecha_entrada:t.fecha_entrada?new Date(t.fecha_entrada):null,fecha_firmado:t.fecha_firmado?new Date(t.fecha_firmado):null,fecha_vencido:t.fecha_vencido?new Date(t.fecha_vencido):null,vigencia_id:t.vigencia?.id,proveedor_id:t.proveedor?.id,tipo_contrato_id:t.tipo_contrato?.id,departamento_id:t.departamento?.id})}}onSubmit(){this.suplementoForm.invalid||this.dialogRef.close(this.suplementoForm.value)}onCancel(){this.dialogRef.close()}get f(){return this.suplementoForm.controls}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(r.qu),e.Y36(q.so),e.Y36(q.WI))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-suplemento-detail"]],standalone:!0,features:[e.jDz],decls:110,vars:25,consts:[[1,"p-6"],[1,"text-2xl","font-bold","mb-6"],[1,"space-y-4",3,"formGroup","ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matInput","","formControlName","no_contrato_contratacion","type","number","required",""],[4,"ngIf"],["formControlName","vigencia_id","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","proveedor_id","required",""],["formControlName","tipo_contrato_id","required",""],["formControlName","departamento_id","required",""],["matInput","","formControlName","no_contrato_id","type","number","required",""],["matInput","","formControlName","fecha_entrada","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["entradaPicker",""],["matInput","","formControlName","fecha_firmado","required","",3,"matDatepicker"],["firmaPicker",""],["matInput","","formControlName","fecha_vencido","required","",3,"matDatepicker"],["vencimientoPicker",""],["matInput","","type","number","step","0.01","min","0","formControlName","valor_cup","required",""],["matSuffix",""],["matInput","","type","number","step","0.01","min","0","formControlName","monto_vencimiento_cup"],["matInput","","type","number","step","0.01","min","0","formControlName","valor_usd"],["matInput","","type","number","step","0.01","min","0","formControlName","monto_vencimiento_usd"],["matInput","","type","number","step","0.01","min","0","formControlName","monto_vencimiento_cl"],["matInput","","formControlName","observaciones","rows","3"],[1,"flex","justify-end","gap-2","mt-6"],["type","button","mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],[3,"value"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"No. Contrato de Contrataci\xf3n"),e.qZA(),e._UZ(8,"input",5),e.YNc(9,ee,2,0,"mat-error",6),e.qZA(),e.TgZ(10,"mat-form-field",4)(11,"mat-label"),e._uU(12,"Vigencia"),e.qZA(),e.TgZ(13,"mat-select",7),e.YNc(14,te,2,3,"mat-option",8),e.qZA(),e.YNc(15,oe,2,0,"mat-error",6),e.qZA(),e.TgZ(16,"mat-form-field",4)(17,"mat-label"),e._uU(18,"Proveedor"),e.qZA(),e.TgZ(19,"mat-select",9),e.YNc(20,ne,2,2,"mat-option",8),e.qZA(),e.YNc(21,ie,2,0,"mat-error",6),e.qZA(),e.TgZ(22,"mat-form-field",4)(23,"mat-label"),e._uU(24,"Tipo de Contrato"),e.qZA(),e.TgZ(25,"mat-select",10),e.YNc(26,ae,2,2,"mat-option",8),e.qZA(),e.YNc(27,re,2,0,"mat-error",6),e.qZA(),e.TgZ(28,"mat-form-field",4)(29,"mat-label"),e._uU(30,"Departamento"),e.qZA(),e.TgZ(31,"mat-select",11),e.YNc(32,ce,2,2,"mat-option",8),e.qZA(),e.YNc(33,le,2,0,"mat-error",6),e.qZA(),e.TgZ(34,"mat-form-field",4)(35,"mat-label"),e._uU(36,"N\xfamero de Contrato"),e.qZA(),e._UZ(37,"input",12),e.YNc(38,me,2,0,"mat-error",6),e.qZA(),e.TgZ(39,"mat-form-field",4)(40,"mat-label"),e._uU(41,"Fecha de Entrada"),e.qZA(),e._UZ(42,"input",13),e.TgZ(43,"mat-datepicker-toggle",14)(44,"mat-icon",15),e._uU(45,"calendar_today"),e.qZA()(),e._UZ(46,"mat-datepicker",null,16),e.YNc(48,se,2,0,"mat-error",6),e.qZA(),e.TgZ(49,"mat-form-field",4)(50,"mat-label"),e._uU(51,"Fecha de Firma"),e.qZA(),e._UZ(52,"input",17),e.TgZ(53,"mat-datepicker-toggle",14)(54,"mat-icon",15),e._uU(55,"calendar_today"),e.qZA()(),e._UZ(56,"mat-datepicker",null,18),e.YNc(58,de,2,0,"mat-error",6),e.qZA(),e.TgZ(59,"mat-form-field",4)(60,"mat-label"),e._uU(61,"Fecha de Vencimiento"),e.qZA(),e._UZ(62,"input",19),e.TgZ(63,"mat-datepicker-toggle",14)(64,"mat-icon",15),e._uU(65,"calendar_today"),e.qZA()(),e._UZ(66,"mat-datepicker",null,20),e.YNc(68,ue,2,0,"mat-error",6),e.qZA(),e.TgZ(69,"mat-form-field",4)(70,"mat-label"),e._uU(71,"Valor (CUP)"),e.qZA(),e._UZ(72,"input",21),e.TgZ(73,"span",22),e._uU(74,"CUP"),e.qZA(),e.YNc(75,pe,2,0,"mat-error",6)(76,_e,2,0,"mat-error",6),e.qZA(),e.TgZ(77,"mat-form-field",4)(78,"mat-label"),e._uU(79,"Monto de Vencimiento (CUP)"),e.qZA(),e._UZ(80,"input",23),e.TgZ(81,"span",22),e._uU(82,"CUP"),e.qZA()(),e.TgZ(83,"mat-form-field",4)(84,"mat-label"),e._uU(85,"Valor (USD)"),e.qZA(),e._UZ(86,"input",24),e.TgZ(87,"span",22),e._uU(88,"USD"),e.qZA()(),e.TgZ(89,"mat-form-field",4)(90,"mat-label"),e._uU(91,"Monto de Vencimiento (USD)"),e.qZA(),e._UZ(92,"input",25),e.TgZ(93,"span",22),e._uU(94,"USD"),e.qZA()(),e.TgZ(95,"mat-form-field",4)(96,"mat-label"),e._uU(97,"Monto de Vencimiento (CL)"),e.qZA(),e._UZ(98,"input",26),e.TgZ(99,"span",22),e._uU(100,"CL"),e.qZA()()(),e.TgZ(101,"mat-form-field",4)(102,"mat-label"),e._uU(103,"Observaciones"),e.qZA(),e._UZ(104,"textarea",27),e.qZA(),e.TgZ(105,"div",28)(106,"button",29),e.NdJ("click",function(){return i.onCancel()}),e._uU(107," Cancelar "),e.qZA(),e.TgZ(108,"button",30),e._uU(109),e.qZA()()()()),2&n){const c=e.MAs(47),l=e.MAs(57),f=e.MAs(67);e.xp6(2),e.hij(" ",i.isEditMode?"Editar Suplemento":"Nuevo Suplemento"," "),e.xp6(1),e.Q6J("formGroup",i.suplementoForm),e.xp6(6),e.Q6J("ngIf",i.f.no_contrato_contratacion.hasError("required")),e.xp6(5),e.Q6J("ngForOf",i.vigencias),e.xp6(1),e.Q6J("ngIf",i.f.vigencia_id.hasError("required")),e.xp6(5),e.Q6J("ngForOf",i.proveedores),e.xp6(1),e.Q6J("ngIf",i.f.proveedor_id.hasError("required")),e.xp6(5),e.Q6J("ngForOf",i.tiposContrato),e.xp6(1),e.Q6J("ngIf",i.f.tipo_contrato_id.hasError("required")),e.xp6(5),e.Q6J("ngForOf",i.departamentos),e.xp6(1),e.Q6J("ngIf",i.f.departamento_id.hasError("required")),e.xp6(5),e.Q6J("ngIf",i.f.no_contrato_id.hasError("required")),e.xp6(4),e.Q6J("matDatepicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(5),e.Q6J("ngIf",i.f.fecha_entrada.hasError("required")),e.xp6(4),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(5),e.Q6J("ngIf",i.f.fecha_firmado.hasError("required")),e.xp6(4),e.Q6J("matDatepicker",f),e.xp6(1),e.Q6J("for",f),e.xp6(5),e.Q6J("ngIf",i.f.fecha_vencido.hasError("required")),e.xp6(7),e.Q6J("ngIf",i.f.valor_cup.hasError("required")),e.xp6(1),e.Q6J("ngIf",i.f.valor_cup.hasError("min")),e.xp6(32),e.Q6J("disabled",i.suplementoForm.invalid),e.xp6(1),e.hij(" ",i.isEditMode?"Actualizar":"Guardar"," ")}},dependencies:[d.ez,d.sg,d.O5,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.qQ,r.sg,r.u,u.lN,u.KE,u.hX,u.TO,u.R9,x.c,x.Nt,g.ot,g.lW,C.LD,C.gD,j.ey,h.FA,h.Mq,h.hl,h.nW,h.Q0,j.XK,Z.Ps,Z.Hw]})}return o})();var Q=m(8850);function ge(o,a){1&o&&(e.TgZ(0,"div",28),e._UZ(1,"mat-progress-bar",29),e.qZA()),2&o&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function he(o,a){if(1&o&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombre)}}function ve(o,a){if(1&o&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombre_tipo_contrato)}}function xe(o,a){if(1&o&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombre_departamento)}}function Ze(o,a){if(1&o&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.vigencia)}}function be(o,a){1&o&&e.GkF(0)}const Te=o=>({$implicit:o});function Ce(o,a){if(1&o&&(e.TgZ(0,"div",62),e.YNc(1,be,1,0,"ng-container",63),e.qZA()),2&o){const t=e.oxw().$implicit;e.oxw(2);const n=e.MAs(63);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Te,t))}}function Ae(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",55)(2,"div",56),e._uU(3),e.qZA(),e.TgZ(4,"div",57),e._uU(5),e.qZA(),e.TgZ(6,"div",57),e._uU(7),e.qZA(),e.TgZ(8,"div",57),e._uU(9),e.qZA(),e.TgZ(10,"div",56),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"div",56),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"div",56),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"div",56),e._uU(20),e.ALo(21,"date"),e.qZA(),e.TgZ(22,"div",56),e._uU(23),e.qZA(),e.TgZ(24,"div",56),e._uU(25),e.ALo(26,"date"),e.qZA(),e.TgZ(27,"div",57),e._uU(28),e.qZA(),e.TgZ(29,"div",58)(30,"button",59),e.NdJ("click",function(i){const l=e.CHM(t).$implicit,f=e.oxw(2);return i.stopPropagation(),e.KtG(f.toggleDetails(l.id))}),e._UZ(31,"mat-icon",60),e.qZA()()(),e.YNc(32,Ce,2,4,"div",61),e.BQk()}if(2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.no_contrato_contratacion||"N/A"),e.xp6(1),e.Q6J("matTooltip",t.proveedor.nombre),e.xp6(1),e.hij(" ",t.proveedor.nombre," "),e.xp6(1),e.Q6J("matTooltip",null==t.tipo_contrato?null:t.tipo_contrato.nombre_tipo_contrato),e.xp6(1),e.hij(" ",null==t.tipo_contrato?null:t.tipo_contrato.nombre_tipo_contrato," "),e.xp6(1),e.Q6J("matTooltip",null==t.departamento?null:t.departamento.nombre_departamento),e.xp6(1),e.hij(" ",null==t.departamento?null:t.departamento.nombre_departamento," "),e.xp6(2),e.hij(" ",e.gM2(12,17,t.valor_cup,"CUP","symbol","1.0-0")," "),e.xp6(3),e.hij(" ",e.gM2(15,22,t.valor_usd,"USD","symbol","1.0-0")," "),e.xp6(3),e.hij(" ",e.xi3(18,27,t.fecha_entrada,"d/M/yy")," "),e.xp6(3),e.hij(" ",e.xi3(21,30,t.fecha_firmado,"d/M/yy")," "),e.xp6(3),e.hij(" ",t.vigencia.vigencia," "),e.xp6(2),e.hij(" ",e.xi3(26,33,t.fecha_vencido,"d/M/yy")," "),e.xp6(2),e.Q6J("matTooltip",t.observaciones),e.xp6(1),e.hij(" ",t.observaciones," "),e.xp6(3),e.Q6J("svgIcon",(null==n.selectedSuplemento?null:n.selectedSuplemento.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(1),e.Q6J("ngIf",(null==n.selectedSuplemento?null:n.selectedSuplemento.id)===t.id)}}const qe=()=>[5,10,25,100];function Se(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31)(3,"div",32),e._uU(4,"No. Contrato"),e.qZA(),e.TgZ(5,"div",32),e._uU(6,"Proveedor"),e.qZA(),e.TgZ(7,"div",32),e._uU(8,"Tipo de Contrato"),e.qZA(),e.TgZ(9,"div",32),e._uU(10,"Departamento"),e.qZA(),e.TgZ(11,"div",32),e._uU(12,"Valor (CUP)"),e.qZA(),e.TgZ(13,"div",32),e._uU(14,"Valor (USD)"),e.qZA(),e.TgZ(15,"div",32),e._uU(16,"Fecha Entrada"),e.qZA(),e.TgZ(17,"div",32),e._uU(18,"Fecha Firmado"),e.qZA(),e.TgZ(19,"div",32),e._uU(20,"Vigencia"),e.qZA(),e.TgZ(21,"div",32),e._uU(22,"Fecha Vencido"),e.qZA(),e.TgZ(23,"div",32),e._uU(24,"Observaciones"),e.qZA(),e.TgZ(25,"div",33),e._uU(26,"Detalles"),e.qZA()(),e.TgZ(27,"div",34)(28,"div")(29,"mat-form-field",35),e._UZ(30,"input",36),e.qZA()(),e.TgZ(31,"div")(32,"mat-form-field",35)(33,"mat-select",37)(34,"mat-option",38),e._uU(35,"Todos"),e.qZA(),e.YNc(36,he,2,2,"mat-option",39),e.qZA()()(),e.TgZ(37,"div")(38,"mat-form-field",35)(39,"mat-select",40)(40,"mat-option",38),e._uU(41,"Todos"),e.qZA(),e.YNc(42,ve,2,2,"mat-option",39),e.qZA()()(),e.TgZ(43,"div")(44,"mat-form-field",35)(45,"mat-select",41)(46,"mat-option",38),e._uU(47,"Todos"),e.qZA(),e.YNc(48,xe,2,2,"mat-option",39),e.qZA()()(),e.TgZ(49,"div")(50,"mat-form-field",35),e._UZ(51,"input",42),e.qZA()(),e.TgZ(52,"div")(53,"mat-form-field",35),e._UZ(54,"input",43),e.qZA()(),e.TgZ(55,"div")(56,"mat-form-field",35),e._UZ(57,"input",44),e.qZA()(),e.TgZ(58,"div")(59,"mat-form-field",35),e._UZ(60,"input",45),e.qZA()(),e.TgZ(61,"div")(62,"mat-form-field",35)(63,"mat-select",46)(64,"mat-option",38),e._uU(65,"Todos"),e.qZA(),e.YNc(66,Ze,2,2,"mat-option",39),e.qZA()()(),e.TgZ(67,"div")(68,"mat-form-field",35),e._UZ(69,"input",47),e.qZA()(),e.TgZ(70,"div",48)(71,"button",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.applyFilters())}),e.TgZ(72,"mat-icon",50),e._uU(73,"search"),e.qZA()(),e.TgZ(74,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearFilters())}),e.TgZ(75,"mat-icon",50),e._uU(76,"clear"),e.qZA()()()(),e.YNc(77,Ae,33,36,"ng-container",52),e.qZA(),e._UZ(78,"mat-paginator",53),e.BQk()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("mat-sort-header","no_contrato_contratacion"),e.xp6(2),e.Q6J("mat-sort-header","proveedor"),e.xp6(2),e.Q6J("mat-sort-header","tipo_contrato"),e.xp6(2),e.Q6J("mat-sort-header","departamento"),e.xp6(2),e.Q6J("mat-sort-header","valor_cup"),e.xp6(2),e.Q6J("mat-sort-header","valor_usd"),e.xp6(2),e.Q6J("mat-sort-header","fecha_entrada"),e.xp6(2),e.Q6J("mat-sort-header","fecha_firmado"),e.xp6(2),e.Q6J("mat-sort-header","vigencia"),e.xp6(2),e.Q6J("mat-sort-header","fecha_vencido"),e.xp6(2),e.Q6J("mat-sort-header","observaciones"),e.xp6(4),e.Q6J("formGroup",t.filterForm),e.xp6(9),e.Q6J("ngForOf",t.proveedores),e.xp6(6),e.Q6J("ngForOf",t.tiposContrato),e.xp6(6),e.Q6J("ngForOf",t.departamentos),e.xp6(18),e.Q6J("ngForOf",t.vigencias),e.xp6(11),e.Q6J("ngForOf",t.dataSource.filteredData)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(23,qe))("showFirstLastButtons",!0)}}function je(o,a){if(1&o&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre," ")}}function Ue(o,a){if(1&o&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_tipo_contrato," ")}}function we(o,a){if(1&o&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_departamento," ")}}function ye(o,a){if(1&o&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.vigencia," ")}}function Ee(o,a){if(1&o&&(e.TgZ(0,"div",64)(1,"div",65)(2,"form",66)(3,"div",67)(4,"div",68)(5,"mat-form-field",69)(6,"mat-label"),e._uU(7,"No. Contrato"),e.qZA(),e._UZ(8,"input",70),e.qZA(),e.TgZ(9,"mat-form-field",69)(10,"mat-label"),e._uU(11,"Proveedor"),e.qZA(),e.TgZ(12,"mat-select",71),e.YNc(13,je,2,2,"mat-option",39),e.qZA()(),e.TgZ(14,"mat-form-field",69)(15,"mat-label"),e._uU(16,"Tipo de Contrato"),e.qZA(),e.TgZ(17,"mat-select",72),e.YNc(18,Ue,2,2,"mat-option",39),e.qZA()(),e.TgZ(19,"mat-form-field",69)(20,"mat-label"),e._uU(21,"Departamento"),e.qZA(),e.TgZ(22,"mat-select",73),e.YNc(23,we,2,2,"mat-option",39),e.qZA()()(),e.TgZ(24,"div",68)(25,"mat-form-field",69)(26,"mat-label"),e._uU(27,"Fecha Entrada"),e.qZA(),e._UZ(28,"input",74),e.qZA(),e.TgZ(29,"mat-form-field",69)(30,"mat-label"),e._uU(31,"Fecha Firmado"),e.qZA(),e._UZ(32,"input",75),e.qZA(),e.TgZ(33,"mat-form-field",69)(34,"mat-label"),e._uU(35,"Valor (CUP)"),e.qZA(),e.TgZ(36,"span",76),e._uU(37,"CUP"),e.qZA(),e._UZ(38,"input",77),e.qZA(),e.TgZ(39,"mat-form-field",69)(40,"mat-label"),e._uU(41,"Valor (USD)"),e.qZA(),e.TgZ(42,"span",76),e._uU(43,"$"),e.qZA(),e._UZ(44,"input",78),e.qZA()(),e.TgZ(45,"div",68)(46,"mat-form-field",69)(47,"mat-label"),e._uU(48,"Vigencia"),e.qZA(),e.TgZ(49,"mat-select",79),e.YNc(50,ye,2,2,"mat-option",39),e.qZA()(),e.TgZ(51,"mat-form-field",69)(52,"mat-label"),e._uU(53,"Fecha Vencido"),e.qZA(),e._UZ(54,"input",80),e.qZA(),e.TgZ(55,"mat-form-field",69)(56,"mat-label"),e._uU(57,"Observaciones"),e.qZA(),e._UZ(58,"textarea",81),e.qZA()()(),e.TgZ(59,"div",82)(60,"button",83),e._uU(61," Actualizar "),e.qZA(),e.TgZ(62,"button",83),e._uU(63," Eliminar "),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedSuplementoForm),e.xp6(11),e.Q6J("ngForOf",t.proveedores),e.xp6(5),e.Q6J("ngForOf",t.tiposContrato),e.xp6(5),e.Q6J("ngForOf",t.departamentos),e.xp6(27),e.Q6J("ngForOf",t.vigencias),e.xp6(10),e.Q6J("color","primary"),e.xp6(2),e.Q6J("color","warn")}}function ke(o,a){1&o&&(e.TgZ(0,"div",84),e._uU(1," \xa1No hay suplementos! "),e.qZA())}let Ie=(()=>{class o{constructor(t,n,i,c){this.cdr=t,this.fb=n,this._matDialog=i,this.suplementoService=c,this.data=[],this.proveedores=[],this.tiposContrato=[],this.vigencias=[],this.departamentos=[],this._unsubscribeAll=new N.x,this.columns=[{key:"no_contrato_contratacion",label:"No. Contrato",sortable:!0},{key:"proveedor",label:"Proveedor",sortable:!0},{key:"tipo_contrato",label:"Tipo de Contrato",sortable:!0},{key:"departamento",label:"Departamento",sortable:!0},{key:"valor_cup",label:"Valor (CUP)",sortable:!0},{key:"valor_usd",label:"Valor (USD)",sortable:!0},{key:"fecha_entrada",label:"Fecha Entrada",sortable:!0},{key:"fecha_firmado",label:"Fecha Firmado",sortable:!0},{key:"vigencia",label:"Vigencia",sortable:!0},{key:"fecha_vencido",label:"Fecha Vencido",sortable:!0}],this.isLoading=!1,this.searchInputControl=new r.p4,this.dataSource=new s.by([]),this.displayedColumns=["no_contrato_contratacion","proveedor","tipo_contrato","departamento","valor_cup","valor_usd","fecha_entrada","fecha_firmado","vigencia","fecha_vencido","details"],this.selectedSuplemento=null,this.errorMessage="",this.pagination={length:0,page:0,size:10},this.dataSource=new s.by([]),this.initSelectedSuplementoForm(),this.filterForm=this.fb.group({vigencia_id:[""],proveedor_id:[""],tipo_contrato_id:[""],departamento_id:[""],fecha_entrada_filter:[""],fecha_firmado_filter:[""],valor_cup_filter:[""],valor_usd_filter:[""]})}openAddSuplementoDialog(){this._matDialog.open(fe,{width:"800px",maxWidth:"90vw",maxHeight:"90vh",disableClose:!0,data:{action:"new",suplemento:null}}).afterClosed().subscribe(n=>{n&&this.loadSuplementos()})}openEditSuplementoDialog(t){this._matDialog.open(X.h,{width:"800px",maxWidth:"90vw",maxHeight:"90vh",disableClose:!0,data:{action:"edit",suplemento:t}}).afterClosed().subscribe(i=>{i&&this.loadSuplementos()})}deleteSuplemento(t){confirm(`\xbfEst\xe1 seguro de eliminar el suplemento #${t.id}?`)&&(console.log("Deleting suplemento:",t.id),this.loadSuplementos())}ngOnInit(){this.proveedores=b.UB,this.tiposContrato=b.j2,this.vigencias=b.G7,this.departamentos=b.iy,this.loadSuplementos(),this.dataSource.sortingDataAccessor=(t,n)=>{switch(n){case"proveedor":return t.proveedor?.nombre;case"tipo_contrato":return t.tipo_contrato?.nombre_tipo_contrato;case"departamento":return t.departamento?.nombre_departamento;case"vigencia":return t.vigencia?.vigencia;case"valor_cup":return t.valor_cup||0;case"valor_usd":return t.valor_usd||0;case"fecha_entrada":return t.fecha_entrada||"";case"fecha_firmado":return t.fecha_firmado||"";default:return t[n]}},this.dataSource.filterPredicate=(t,n)=>{if(!n)return!0;const i=n.toLowerCase().trim();return[t.no_contrato_contratacion?.toString()||"",t.proveedor?.nombre?.toLowerCase()||"",t.tipo_contrato?.nombre_tipo_contrato?.toLowerCase()||"",t.departamento?.nombre_departamento?.toLowerCase()||"",t.valor_cup?.toString()||"",t.valor_usd?.toString()||"",t.fecha_entrada||"",t.fecha_firmado||"",void 0!==t.vigencia?.vigencia?t.vigencia.vigencia.toString():"",t.observaciones?.toLowerCase()||""].join(" ").includes(i)},this.searchInputControl.valueChanges.pipe((0,J.R)(this._unsubscribeAll),(0,y.b)(300)).subscribe(t=>{this.closeDetails(),this.dataSource.filter=t?t.trim().toLowerCase():"",this.cdr.detectChanges()}),this.filterForm.valueChanges.pipe((0,J.R)(this._unsubscribeAll),(0,y.b)(300)).subscribe(()=>{this.applyFilters()})}loadSuplementos(){this.isLoading=!0,this.errorMessage="",this.suplementoService.getSuplementos().subscribe({next:t=>{this.dataSource.data=t,this.pagination.length=t.length,this.isLoading=!1,this.cdr.markForCheck()},error:t=>{this.errorMessage="Error al cargar suplementos. Por favor, int\xe9ntelo de nuevo.",this.isLoading=!1,this.cdr.markForCheck()}})}initSelectedSuplementoForm(){this.selectedSuplementoForm=this.fb.group({no_contrato_contratacion:["",r.kI.required],proveedor:[null,r.kI.required],tipo_contrato:[null,r.kI.required],departamento:[null,r.kI.required],fecha_entrada:["",r.kI.required],fecha_firmado:["",r.kI.required],valor_cup:[0,[r.kI.required,r.kI.min(0)]],valor_usd:[0,[r.kI.min(0)]],vigencia:[null,r.kI.required],observaciones:[""],fecha_vencido:[""]})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.paginator&&(this.paginator.pageSize=10,this.paginator.pageSizeOptions=[5,10,25,50]),this.dataSource.sort=this.sort,this.sort&&(this.sort.active="no_contrato_contratacion",this.sort.direction="asc"),this.cdr.detectChanges()}trackByFn(t,n){return n.id}toggleDetails(t){this.selectedSuplemento?.id===t?this.selectedSuplemento=null:(this.selectedSuplemento=this.dataSource.data.find(n=>n.id===t)||null,this.selectedSuplemento&&(this.selectedSuplementoForm||this.initSelectedSuplementoForm(),this.selectedSuplementoForm.patchValue({no_contrato_contratacion:this.selectedSuplemento.no_contrato_contratacion||"",proveedor:this.selectedSuplemento.proveedor||null,tipo_contrato:this.selectedSuplemento.tipo_contrato||null,departamento:this.selectedSuplemento.departamento||null,fecha_entrada:this.selectedSuplemento.fecha_entrada||"",valor_cup:this.selectedSuplemento.valor_cup||0,valor_usd:this.selectedSuplemento.valor_usd||0,fecha_firmado:this.selectedSuplemento.fecha_firmado||"",vigencia:this.selectedSuplemento.vigencia||null,observaciones:this.selectedSuplemento.observaciones||"",fecha_vencido:this.selectedSuplemento.fecha_vencido||""}))),this.cdr.detectChanges()}applyFilters(){const t=this.filterForm.value;this.dataSource.filterPredicate=(n,i)=>!(t.proveedor_id&&n.proveedor?.id!==t.proveedor_id||t.tipo_contrato_id&&n.tipo_contrato?.id!==t.tipo_contrato_id||t.departamento_id&&n.departamento?.id!==t.departamento_id||t.vigencia_id&&n.vigencia?.id!==t.vigencia_id||t.valor_cup_filter&&n.valor_cup<t.valor_cup_filter||t.valor_usd_filter&&n.valor_usd<t.valor_usd_filter||t.fecha_entrada_filter&&new Date(n.fecha_entrada)<new Date(t.fecha_entrada_filter)||t.fecha_firmado_filter&&new Date(n.fecha_firmado)<new Date(t.fecha_firmado_filter)),this.dataSource.filter=JSON.stringify(t),this.cdr.detectChanges()}clearFilters(){this.filterForm.reset(),this.dataSource.filter="",this.cdr.detectChanges()}exportToCSV(){const t=this.dataSource.filteredData||this.dataSource.data;if(!t||0===t.length)return;const n=[];n.push(["No. Contrato","Proveedor","Tipo de Contrato","Departamento","Valor (CUP)","Valor (USD)","Fecha Entrada","Fecha Firmado","Vigencia","Fecha Vencido","Observaciones"].join(",")),t.forEach(p=>{const k=[p.no_contrato_contratacion,p.proveedor?.nombre||"",p.tipo_contrato?.nombre_tipo_contrato||"",p.departamento?.nombre_departamento||"",p.valor_cup,p.valor_usd,p.fecha_entrada,p.fecha_firmado,p.vigencia?.vigencia,p.fecha_vencido,p.observaciones||""].map(S=>"string"==typeof S&&(S.includes(",")||S.includes('"'))?`"${S.replace(/"/g,'""')}"`:S);n.push(k.join(","))});const c=n.join("\n"),l=new Blob([c],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(l),T=document.createElement("a");T.href=f,T.download="suplementos_export.csv",T.click(),window.URL.revokeObjectURL(f)}closeDetails(){this.selectedSuplemento=null}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(e.sBO),e.Y36(r.qu),e.Y36(q.uw),e.Y36(Q.y))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-suplemento-list"]],viewQuery:function(n,i){if(1&n&&(e.Gf(_.YE,5),e.Gf(v.NW,5)),2&n){let c;e.iGM(c=e.CRH())&&(i.sort=c.first),e.iGM(c=e.CRH())&&(i.paginator=c.first)}},standalone:!0,features:[e.jDz],decls:66,vars:26,consts:[[1,"flex","flex-col","min-h-screen","p-6","w-full"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden","mb-6","w-full"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4","mb-6"],[1,"text-2xl","font-semibold"],[1,"flex","flex-col","sm:flex-row","gap-3","w-full","sm:w-auto"],[1,"flex","flex-row","flex-wrap","mt-4","-mx-6"],[1,"flex","flex-col","mx-6","my-3"],[1,"text-sm","font-medium","leading-none","text-secondary"],[1,"mt-2","font-medium","text-3xl","leading-none"],[1,"flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","flex-col","sm:flex-row","shrink-0","items-center","justify-between","py-4","px-6","md:px-8","border-b"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","items-center","gap-4","mt-4","sm:mt-0"],["mat-raised-button","","color","primary",1,"w-full","sm:w-auto",3,"click"],["mat-icon-button","","matTooltip","Exportar tabla a CSV","aria-label","Exportar tabla a CSV",3,"color","click"],[3,"svgIcon"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-x-auto"],[4,"ngIf","ngIfElse"],["rowDetailsTemplate",""],["noSuplementos",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"flex","flex-col","h-full","overflow-y-auto"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5",2,"grid-template-columns","repeat(11, minmax(100px, 1fr)) 100px"],[3,"mat-sort-header"],[1,"sticky-end"],[1,"inventory-grid","grid","gap-4","py-3","px-6","md:px-8","border-b","bg-gray-50","dark:bg-gray-800",2,"grid-template-columns","repeat(11, minmax(100px, 1fr)) 100px",3,"formGroup"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","No. Contrato","formControlName","no_contrato_contratacion_filter"],["formControlName","proveedor_id","placeholder","Proveedor"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","tipo_contrato_id","placeholder","Tipo de Contrato"],["formControlName","departamento_id","placeholder","Departamento"],["matInput","","type","number","placeholder","Valor CUP","formControlName","valor_cup_filter"],["matInput","","type","number","placeholder","Valor USD","formControlName","valor_usd_filter"],["matInput","","type","date","formControlName","fecha_entrada_filter"],["matInput","","type","date","formControlName","fecha_firmado_filter"],["formControlName","vigencia_id","placeholder","Vigencia"],["matInput","","placeholder","Observaciones","formControlName","observaciones_filter"],[1,"flex","gap-1","sticky-end"],["mat-icon-button","","color","primary","type","button","matTooltip","Aplicar filtros",1,"!w-8","!h-8","!min-w-8",3,"click"],[1,"!text-sm"],["mat-icon-button","","color","warn","type","button","matTooltip","Limpiar filtros",1,"!w-8","!h-8","!min-w-8",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[3,"value"],[1,"inventory-grid","grid","gap-4","py-3","px-6","md:px-8","border-b","items-center","text-m","hover:bg-gray-50","dark:hover:bg-gray-800",2,"grid-template-columns","repeat(11, minmax(100px, 1fr)) 100px"],[1,"truncate"],["matTooltipPosition","above",1,"truncate",3,"matTooltip"],[1,"flex","items-center","justify-end","gap-2","sticky-end"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6","whitespace-nowrap",3,"click"],[1,"icon-size-5",3,"svgIcon"],["class","grid",4,"ngIf"],[1,"grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"responsive-form","flex","flex-col","w-full","mx-auto","p-8",3,"formGroup"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-1/3","sm:pl-8"],[1,"w-full"],["matInput","","formControlName","no_contrato_contratacion"],["formControlName","proveedor"],["formControlName","tipo_contrato"],["formControlName","departamento"],["matInput","","type","date","formControlName","fecha_entrada"],["matInput","","type","date","formControlName","fecha_firmado"],["matPrefix",""],["matInput","","type","number","formControlName","valor_cup"],["matInput","","type","number","formControlName","valor_usd"],["formControlName","vigencia"],["matInput","","type","date","formControlName","fecha_vencido"],["matInput","","formControlName","observaciones"],[1,"flex","flex-col","sm:flex-row","items-center","justify-end","w-full","border-t","px-4","py-4","gap-3"],["mat-stroked-button","",1,"w-full","sm:w-auto","px-6",3,"color"],[1,"p-8","sm:p-16","border-b","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h2",5),e._uU(6,"Lista de Suplementos"),e.qZA(),e._UZ(7,"div",6),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"div",9),e._uU(11," Monto Inicial CUP "),e.qZA(),e.TgZ(12,"div",10),e._uU(13),e.ALo(14,"currency"),e.qZA()(),e.TgZ(15,"div",8)(16,"div",9),e._uU(17," Total Ejecutado CUP "),e.qZA(),e.TgZ(18,"div",10),e._uU(19),e.ALo(20,"currency"),e.qZA()(),e.TgZ(21,"div",8)(22,"div",9),e._uU(23," Monto Restante CUP "),e.qZA(),e.TgZ(24,"div",10),e._uU(25),e.ALo(26,"currency"),e.qZA()(),e.TgZ(27,"div",8)(28,"div",9),e._uU(29," Monto Inicial USD "),e.qZA(),e.TgZ(30,"div",10),e._uU(31),e.qZA()(),e.TgZ(32,"div",8)(33,"div",9),e._uU(34," Total Ejecutado USD "),e.qZA(),e.TgZ(35,"div",10),e._uU(36),e.qZA()(),e.TgZ(37,"div",8)(38,"div",9),e._uU(39," Monto Restante USD "),e.qZA(),e.TgZ(40,"div",10),e._uU(41),e.qZA()()()(),e.TgZ(42,"div",11)(43,"div",12),e.YNc(44,ge,2,1,"div",13),e.TgZ(45,"div",14),e._uU(46,"Suplementos"),e.qZA()(),e.TgZ(47,"div",15)(48,"mat-form-field",16),e._UZ(49,"mat-icon",17)(50,"input",18),e.qZA(),e.TgZ(51,"div",19)(52,"button",20),e.NdJ("click",function(){return i.openAddSuplementoDialog()}),e.TgZ(53,"mat-icon"),e._uU(54,"add"),e.qZA(),e.TgZ(55,"span"),e._uU(56,"Agregar Suplemento"),e.qZA()(),e.TgZ(57,"button",21),e.NdJ("click",function(){return i.exportToCSV()}),e._UZ(58,"mat-icon",22),e.qZA()()(),e.TgZ(59,"div",23)(60,"div",24),e.YNc(61,Se,79,24,"ng-container",25)(62,Ee,64,7,"ng-template",null,26,e.W1O)(64,ke,2,0,"ng-template",null,27,e.W1O),e.qZA()()()()),2&n){const c=e.MAs(65);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:check-circle"),e.xp6(10),e.hij(" ",e.xi3(14,17,0,"CUP")," "),e.xp6(6),e.hij(" ",e.xi3(20,20,0,"CUP")," "),e.xp6(6),e.hij(" ",e.xi3(26,23,0,"CUP")," "),e.xp6(6),e.hij(" ",0," "),e.xp6(5),e.hij(" ",0," "),e.xp6(5),e.hij(" ",0," "),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(4),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar suplementos"),e.xp6(7),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(3),e.Q6J("ngIf",i.dataSource.data.length>0)("ngIfElse",c)}},dependencies:[d.ez,d.sg,d.O5,d.tP,d.H9,d.uU,g.ot,g.lW,g.RK,U.Cv,U.pW,_.JX,_.YE,_.nU,s.p0,Z.Ps,Z.Hw,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.oH,r.sg,r.u,v.TU,v.NW,u.lN,u.KE,u.hX,u.qo,x.c,x.Nt,C.LD,C.gD,j.ey,W.Tx,A.AV,A.gM,K.t,q.Is],encapsulation:2,changeDetection:0})}return o})();var L=m(2939);function De(o,a){if(1&o&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.no_contrato_contratacion," - ",null==t.proveedor?null:t.proveedor.nombre," ")}}function Fe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El suplemento es requerido "),e.qZA())}function Je(o,a){if(1&o&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function Ne(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El proveedor es requerido "),e.qZA())}function Qe(o,a){if(1&o&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.no_contrato_contratacion," - ",t.objeto," ")}}function Le(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El contrato es requerido "),e.qZA())}function Me(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha de ejecuci\xf3n es requerida "),e.qZA())}function Ye(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo en CUP es requerido "),e.qZA())}function Pe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo no puede ser negativo "),e.qZA())}function ze(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo en CL es requerido "),e.qZA())}function Ve(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo no puede ser negativo "),e.qZA())}function Oe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n del trabajo es requerida "),e.qZA())}function Re(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n no puede exceder los 500 caracteres "),e.qZA())}let M=(()=>{class o{constructor(t,n,i){this._formBuilder=t,this._dialogRef=n,this.data=i,this.isEditMode=!1,this.suplementos=[],this.proveedores=b.UB,this.contratos=b.Io,this.isEditMode="edit"===i.action,this.ejecucionForm=this._formBuilder.group({id:[null],no_suplemento_id:[null,r.kI.required],proveedor_id:[null,r.kI.required],no_contrato_id:[null,r.kI.required],trabajo_ejecutado:["",[r.kI.required,r.kI.maxLength(500)]],costo_cup:[0,[r.kI.required,r.kI.min(0)]],costo_cl:[0,[r.kI.required,r.kI.min(0)]],fecha_ejecucion:[new Date,r.kI.required]})}ngOnInit(){this.isEditMode&&this.data.ejecucion&&this.ejecucionForm.patchValue({...this.data.ejecucion,fecha_ejecucion:this.data.ejecucion.fecha_ejecucion?new Date(this.data.ejecucion.fecha_ejecucion):new Date,no_suplemento_id:this.data.ejecucion.no_suplemento_id,proveedor_id:this.data.ejecucion.proveedor?.id,no_contrato_id:this.data.ejecucion.contrato?.id})}onSuplementoChange(t){const n=this.suplementos.find(i=>i.id===t);n&&this.ejecucionForm.patchValue({proveedor_id:n.proveedor?.id,no_contrato_id:n.no_contrato_contratacion})}onSubmit(){if(this.ejecucionForm.invalid)return void this.ejecucionForm.markAllAsTouched();const t=this.ejecucionForm.value,n={...t,id:this.isEditMode&&this.data.ejecucion?.id?this.data.ejecucion.id:void 0,proveedor:this.proveedores.find(i=>i.id===t.proveedor_id),contrato:this.contratos.find(i=>i.id===t.no_contrato_id),suplemento:this.suplementos.find(i=>i.id===t.no_suplemento_id)};this._dialogRef.close(n)}onCancel(){this._dialogRef.close()}compareWithId(t,n){return t&&n?t.id===n.id:t===n}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(r.qu),e.Y36(q.so),e.Y36(q.WI))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-ejecucion-suplemento-form"]],standalone:!0,features:[e.jDz],decls:62,vars:23,consts:[[1,"p-6"],["mat-dialog-title","",1,"text-xl","font-bold","mb-4"],[1,"space-y-4",3,"formGroup","ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["formControlName","no_suplemento_id","required","",3,"compareWith","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","proveedor_id","required","",3,"compareWith"],["formControlName","no_contrato_id","required","",3,"compareWith"],["matInput","","formControlName","fecha_ejecucion","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","formControlName","costo_cup","min","0","step","0.01","required",""],["matTextPrefix",""],["matInput","","type","number","formControlName","costo_cl","min","0","step","0.01","required",""],["matInput","","formControlName","trabajo_ejecutado","rows","4","placeholder","Describa el trabajo ejecutado...","required",""],["align","end"],[1,"flex","justify-end","gap-3","pt-4"],["mat-button","","type","button",1,"px-6",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"px-6",3,"disabled"],[3,"value"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Suplemento"),e.qZA(),e.TgZ(8,"mat-select",5),e.NdJ("selectionChange",function(l){return i.onSuplementoChange(l.value)}),e.YNc(9,De,2,3,"mat-option",6),e.qZA(),e.YNc(10,Fe,2,0,"mat-error",7),e.qZA(),e.TgZ(11,"mat-form-field",4)(12,"mat-label"),e._uU(13,"Proveedor"),e.qZA(),e.TgZ(14,"mat-select",8),e.YNc(15,Je,2,2,"mat-option",6),e.qZA(),e.YNc(16,Ne,2,0,"mat-error",7),e.qZA(),e.TgZ(17,"mat-form-field",4)(18,"mat-label"),e._uU(19,"Contrato"),e.qZA(),e.TgZ(20,"mat-select",9),e.YNc(21,Qe,2,3,"mat-option",6),e.qZA(),e.YNc(22,Le,2,0,"mat-error",7),e.qZA(),e.TgZ(23,"mat-form-field",4)(24,"mat-label"),e._uU(25,"Fecha de Ejecuci\xf3n"),e.qZA(),e._UZ(26,"input",10),e.TgZ(27,"mat-hint"),e._uU(28,"DD/MM/YYYY"),e.qZA(),e._UZ(29,"mat-datepicker-toggle",11)(30,"mat-datepicker",null,12),e.YNc(32,Me,2,0,"mat-error",7),e.qZA(),e.TgZ(33,"mat-form-field",4)(34,"mat-label"),e._uU(35,"Costo (CUP)"),e.qZA(),e._UZ(36,"input",13),e.TgZ(37,"span",14),e._uU(38,"$\xa0"),e.qZA(),e.YNc(39,Ye,2,0,"mat-error",7)(40,Pe,2,0,"mat-error",7),e.qZA(),e.TgZ(41,"mat-form-field",4)(42,"mat-label"),e._uU(43,"Costo (CL)"),e.qZA(),e._UZ(44,"input",15),e.TgZ(45,"span",14),e._uU(46,"CLP\xa0"),e.qZA(),e.YNc(47,ze,2,0,"mat-error",7)(48,Ve,2,0,"mat-error",7),e.qZA()(),e.TgZ(49,"mat-form-field",4)(50,"mat-label"),e._uU(51,"Trabajo Ejecutado"),e.qZA(),e._UZ(52,"textarea",16),e.TgZ(53,"mat-hint",17),e._uU(54),e.qZA(),e.YNc(55,Oe,2,0,"mat-error",7)(56,Re,2,0,"mat-error",7),e.qZA(),e.TgZ(57,"div",18)(58,"button",19),e.NdJ("click",function(){return i.onCancel()}),e._uU(59," Cancelar "),e.qZA(),e.TgZ(60,"button",20),e._uU(61),e.qZA()()()()),2&n){const c=e.MAs(31);let l,f,T,p,w,k,S,H,I,G,$;e.xp6(2),e.hij(" ",i.isEditMode?"Editar":"Nueva"," Ejecuci\xf3n de Suplemento "),e.xp6(1),e.Q6J("formGroup",i.ejecucionForm),e.xp6(5),e.Q6J("compareWith",i.compareWithId),e.xp6(1),e.Q6J("ngForOf",i.suplementos),e.xp6(1),e.Q6J("ngIf",null==(l=i.ejecucionForm.get("no_suplemento_id"))?null:l.hasError("required")),e.xp6(4),e.Q6J("compareWith",i.compareWithId),e.xp6(1),e.Q6J("ngForOf",i.proveedores),e.xp6(1),e.Q6J("ngIf",null==(f=i.ejecucionForm.get("proveedor_id"))?null:f.hasError("required")),e.xp6(4),e.Q6J("compareWith",i.compareWithId),e.xp6(1),e.Q6J("ngForOf",i.contratos),e.xp6(1),e.Q6J("ngIf",null==(T=i.ejecucionForm.get("no_contrato_id"))?null:T.hasError("required")),e.xp6(4),e.Q6J("matDatepicker",c),e.xp6(3),e.Q6J("for",c),e.xp6(3),e.Q6J("ngIf",null==(p=i.ejecucionForm.get("fecha_ejecucion"))?null:p.hasError("required")),e.xp6(7),e.Q6J("ngIf",null==(w=i.ejecucionForm.get("costo_cup"))?null:w.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(k=i.ejecucionForm.get("costo_cup"))?null:k.hasError("min")),e.xp6(7),e.Q6J("ngIf",null==(S=i.ejecucionForm.get("costo_cl"))?null:S.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(H=i.ejecucionForm.get("costo_cl"))?null:H.hasError("min")),e.xp6(6),e.hij(" ",(null==(I=i.ejecucionForm.get("trabajo_ejecutado"))||null==I.value?null:I.value.length)||0,"/500 "),e.xp6(1),e.Q6J("ngIf",null==(G=i.ejecucionForm.get("trabajo_ejecutado"))?null:G.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==($=i.ejecucionForm.get("trabajo_ejecutado"))?null:$.hasError("maxlength")),e.xp6(4),e.Q6J("disabled",i.ejecucionForm.invalid),e.xp6(1),e.hij(" ",i.isEditMode?"Actualizar":"Guardar"," ")}},dependencies:[d.ez,d.sg,d.O5,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.qQ,r.sg,r.u,u.lN,u.KE,u.hX,u.bx,u.TO,u.qo,u.R9,x.c,x.Nt,g.ot,g.lW,C.LD,C.gD,j.ey,h.FA,h.Mq,h.hl,h.nW,j.XK,Z.Ps]})}return o})();function Be(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Este campo es requerido "),e.qZA())}function He(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Este campo es requerido "),e.qZA())}function Ge(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Este campo es requerido "),e.qZA())}function $e(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor debe ser mayor o igual a 0 "),e.qZA())}function We(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Este campo es requerido "),e.qZA())}function Ke(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor debe ser mayor o igual a 0 "),e.qZA())}function Xe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Este campo es requerido "),e.qZA())}function et(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",45)(1,"div",46)(2,"div",47)(3,"form",48)(4,"div",49)(5,"div",50)(6,"mat-form-field",51)(7,"mat-label"),e._uU(8,"No. Suplemento"),e.qZA(),e._UZ(9,"input",52),e.YNc(10,Be,2,0,"mat-error",53),e.qZA(),e.TgZ(11,"mat-form-field",51)(12,"mat-label"),e._uU(13,"Proveedor"),e.qZA(),e._UZ(14,"input",54),e.qZA(),e.TgZ(15,"mat-form-field",51)(16,"mat-label"),e._uU(17,"No. Contrato"),e.qZA(),e._UZ(18,"input",54),e.qZA(),e.TgZ(19,"mat-form-field",51)(20,"mat-label"),e._uU(21,"Trabajo Ejecutado"),e.qZA(),e._UZ(22,"textarea",55),e.YNc(23,He,2,0,"mat-error",53),e.qZA()(),e.TgZ(24,"div",50)(25,"mat-form-field",51)(26,"mat-label"),e._uU(27,"Costo CUP"),e.qZA(),e._UZ(28,"input",56),e.YNc(29,Ge,2,0,"mat-error",53)(30,$e,2,0,"mat-error",53),e.qZA(),e.TgZ(31,"mat-form-field",51)(32,"mat-label"),e._uU(33,"Costo CL"),e.qZA(),e._UZ(34,"input",57),e.YNc(35,We,2,0,"mat-error",53)(36,Ke,2,0,"mat-error",53),e.qZA(),e.TgZ(37,"mat-form-field",51)(38,"mat-label"),e._uU(39,"Fecha de Ejecuci\xf3n"),e.qZA(),e.TgZ(40,"input",58),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(43);return e.KtG(i.open())}),e.qZA(),e._UZ(41,"mat-datepicker-toggle",59)(42,"mat-datepicker",null,60),e.YNc(44,Xe,2,0,"mat-error",53),e.qZA()()(),e.TgZ(45,"div",61)(46,"button",62),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.onCancelEdit())}),e._uU(47," Cancelar "),e.qZA(),e.TgZ(48,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.onSaveEjecucion())}),e._uU(49," Guardar Cambios "),e.qZA()()()()()()}if(2&o){const t=e.MAs(43),n=e.oxw(3);let i,c,l,f,T,p,w;e.xp6(3),e.Q6J("formGroup",n.selectedEjecucionForm),e.xp6(7),e.Q6J("ngIf",null==(i=n.selectedEjecucionForm.get("no_suplemento_id"))?null:i.hasError("required")),e.xp6(4),e.Q6J("value",(null==n.selectedEjecucion||null==n.selectedEjecucion.proveedor?null:n.selectedEjecucion.proveedor.nombre)||"N/A"),e.xp6(4),e.Q6J("value",(null==n.selectedEjecucion||null==n.selectedEjecucion.contrato?null:n.selectedEjecucion.contrato.no_contrato_contratacion)||"N/A"),e.xp6(5),e.Q6J("ngIf",null==(c=n.selectedEjecucionForm.get("trabajo_ejecutado"))?null:c.hasError("required")),e.xp6(6),e.Q6J("ngIf",null==(l=n.selectedEjecucionForm.get("costo_cup"))?null:l.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(f=n.selectedEjecucionForm.get("costo_cup"))?null:f.hasError("min")),e.xp6(5),e.Q6J("ngIf",null==(T=n.selectedEjecucionForm.get("costo_cl"))?null:T.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(p=n.selectedEjecucionForm.get("costo_cl"))?null:p.hasError("min")),e.xp6(4),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",null==(w=n.selectedEjecucionForm.get("fecha_ejecucion"))?null:w.hasError("required")),e.xp6(4),e.Q6J("disabled",!n.selectedEjecucionForm.valid)}}function tt(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",37)(2,"div",38),e._uU(3),e.qZA(),e.TgZ(4,"div",38),e._uU(5),e.qZA(),e.TgZ(6,"div",38),e._uU(7),e.qZA(),e.TgZ(8,"div",39),e._uU(9),e.qZA(),e.TgZ(10,"div",40),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"div",40),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"div",41)(20,"button",42),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.toggleDetails(c.id))}),e._UZ(21,"mat-icon",43),e.qZA()()(),e.YNc(22,et,50,13,"div",44),e.BQk()}if(2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("matTooltip",t.no_suplemento_id),e.xp6(1),e.Oqu(t.no_suplemento_id||"N/A"),e.xp6(1),e.Q6J("matTooltip",null==t.proveedor?null:t.proveedor.nombre),e.xp6(1),e.Oqu((null==t.proveedor?null:t.proveedor.nombre)||"N/A"),e.xp6(1),e.Q6J("matTooltip",null==t.contrato?null:t.contrato.no_contrato_contratacion),e.xp6(1),e.Oqu((null==t.contrato?null:t.contrato.no_contrato_contratacion)||"N/A"),e.xp6(1),e.Q6J("matTooltip",t.trabajo_ejecutado),e.xp6(1),e.Oqu(t.trabajo_ejecutado||"N/A"),e.xp6(2),e.Oqu(e.xi3(12,13,t.costo_cup,"1.2-2")),e.xp6(3),e.Oqu(e.xi3(15,16,t.costo_cl,"1.2-2")),e.xp6(3),e.Oqu(e.xi3(18,19,t.fecha_ejecucion,"dd/MM/yyyy")),e.xp6(4),e.Q6J("svgIcon",(null==n.selectedEjecucion?null:n.selectedEjecucion.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(1),e.Q6J("ngIf",(null==n.selectedEjecucion?null:n.selectedEjecucion.id)===t.id)}}const ot=()=>[5,10,25,100];function nt(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"div",22)(3,"div",23),e._uU(4,"No. Suplemento"),e.qZA(),e.TgZ(5,"div",23),e._uU(6,"Proveedor"),e.qZA(),e.TgZ(7,"div",23),e._uU(8,"Contrato"),e.qZA(),e.TgZ(9,"div",23),e._uU(10,"Trabajo Ejecutado"),e.qZA(),e.TgZ(11,"div",24),e._uU(12,"Costo (CUP)"),e.qZA(),e.TgZ(13,"div",24),e._uU(14,"Costo (CL)"),e.qZA(),e.TgZ(15,"div",23),e._uU(16,"Fecha de Ejecuci\xf3n"),e.qZA(),e.TgZ(17,"div",25),e._uU(18,"Acciones"),e.qZA()(),e.TgZ(19,"div",26)(20,"div")(21,"mat-form-field",27),e._UZ(22,"input",28),e.qZA()(),e.TgZ(23,"div")(24,"mat-form-field",27),e._UZ(25,"input",29),e.qZA()(),e.TgZ(26,"div")(27,"mat-form-field",27),e._UZ(28,"input",30),e.qZA()(),e.TgZ(29,"div")(30,"mat-form-field",27),e._UZ(31,"input",31),e.qZA()(),e.TgZ(32,"div")(33,"mat-form-field",27),e._UZ(34,"input",32),e.qZA()(),e.TgZ(35,"div")(36,"mat-form-field",27),e._UZ(37,"input",33),e.qZA()(),e.TgZ(38,"div")(39,"mat-form-field",27),e._UZ(40,"input",34),e.qZA()(),e._UZ(41,"div"),e.qZA(),e.YNc(42,tt,23,22,"ng-container",35),e.qZA(),e.TgZ(43,"mat-paginator",36),e.NdJ("page",function(i){e.CHM(t);const c=e.oxw();return e.KtG(c.onPageChange(i))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("mat-sort-header","no_suplemento_id"),e.xp6(2),e.Q6J("mat-sort-header","proveedor"),e.xp6(2),e.Q6J("mat-sort-header","contrato"),e.xp6(2),e.Q6J("mat-sort-header","trabajo_ejecutado"),e.xp6(2),e.Q6J("mat-sort-header","costo_cup"),e.xp6(2),e.Q6J("mat-sort-header","costo_cl"),e.xp6(2),e.Q6J("mat-sort-header","fecha_ejecucion"),e.xp6(4),e.Q6J("formGroup",t.filterForm),e.xp6(23),e.Q6J("ngForOf",t.dataSource.filteredData)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("length",t.resultsLength)("pageIndex",0)("pageSize",10)("pageSizeOptions",e.DdM(15,ot))("showFirstLastButtons",!0)}}function it(o,a){1&o&&(e.TgZ(0,"div",64),e._uU(1," \xa1No hay ejecuciones! "),e.qZA())}const Y={id:1,nombre_departamento:"Contrataci\xf3n",codigo:"DEP-001",descripcion:"Departamento de Contrataci\xf3n"},P={id:1,vigencia:2024,alerta_vigencia:1,tipo_vigencia:"Anual",tipo_alerta_vigencia:"ninguna"},z={id:1,nombre_tipo_contrato:"Servicios",descripcion:"Contrato de servicios"},E={id:1,municipio_id:1,ministerio_id:1,nombre:"Empresa de Prueba",codigo:"PRUEBA001",telefonos:"555-1234",domicilio:"Calle 123",municipio:{id:1,nombre_municipio:"La Habana Vieja",provincia_id:1,provincia:{id:1,nombre_provincia:"La Habana"}},ministerio:{id:1,nombre_ministerio:"MINSAP",descripcion:"Ministerio de Salud P\xfablica"},fechaCreacion:"2024-01-01",representantes:[]},V={id:1,vigencia_id:1,proveedor_id:1,tipo_contrato_id:1,no_contrato:123,fecha_entrada:new Date("2024-01-01"),fecha_firmado:new Date("2024-01-01"),valor_cup:1e4,monto_vencimiento_cup:1e4,monto_vencimiento_cl:100,valor_usd:100,monto_vencimiento_usd:100,observaciones:"Contrato de prueba",no_contrato_contratacion:123,fecha_comite_contratacion:new Date("2024-01-01"),no_comite_contratacion:1,no_acuerdo_comite_contratacion:1,fecha_comite_administracion:new Date("2024-01-01"),no_comite_administracion:1,no_acuerdo_comite_administracion:1,departamento_id:1,fecha_vencido:new Date("2024-12-31"),valor_monto_restante:1e4,entidad:["Entidad 1"],vigencia:P,proveedor:E,tipo_contrato:z,departamento:Y,estado:"activo",fecha_creacion:new Date("2024-01-01"),fecha_actualizacion:new Date("2024-01-01"),usuario_creacion:"system",usuario_actualizacion:"system"},O={id:1,vigencia_id:1,proveedor_id:1,tipo_contrato_id:1,no_contrato_id:1,departamento_id:1,fecha_entrada:new Date("2024-01-01"),fecha_firmado:new Date("2024-01-01"),valor_cup:5e3,monto_vencimiento_cup:5e3,monto_vencimiento_cl:50,valor_usd:50,monto_vencimiento_usd:50,observaciones:"Suplemento de prueba",no_contrato_contratacion:123,fecha_comite_contratacion:new Date("2024-01-01"),no_comite_contratacion:1,no_acuerdo_comite_contratacion:1,fecha_comite_administracion:new Date("2024-01-01"),no_comite_administracion:1,no_acuerdo_comite_administracion:1,fecha_vencido:new Date("2024-12-31"),valor_monto_restante:5e3,vigencia:P,proveedor:E,tipo_contrato:z,departamento:Y,fecha_creacion:new Date("2024-01-01"),fecha_actualizacion:new Date("2024-01-01"),usuario_creacion:"system",usuario_actualizacion:"system",estado:"activo",no_suplemento:1,no_contrato:123},R=[{id:1,no_suplemento_id:1,no_contrato_id:1,proveedor_id:1,trabajo_ejecutado:"Trabajo de prueba",costo_cup:1e3,costo_cl:10,fecha_ejecucion:new Date("2024-01-01"),proveedor:E,contrato:V,suplemento:O,fecha_creacion:new Date("2024-01-01"),fecha_actualizacion:new Date("2024-01-01"),usuario_creacion:"system",usuario_actualizacion:"system",estado:"activo"},{id:2,no_suplemento_id:1,no_contrato_id:1,proveedor_id:1,trabajo_ejecutado:"Trabajo de prueba 2",costo_cup:2e3,costo_cl:20,fecha_ejecucion:new Date("2024-02-01"),proveedor:E,contrato:V,suplemento:O,fecha_creacion:new Date("2024-01-01"),fecha_actualizacion:new Date("2024-01-01"),usuario_creacion:"system",usuario_actualizacion:"system",estado:"activo"}];let ct=(()=>{class o{ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}constructor(t,n,i){this._matDialog=t,this._snackBar=n,this._formBuilder=i,this.ejecuciones=[],this.displayedColumns=["no_suplemento","proveedor","contrato","trabajo_ejecutado","costo_cup","costo_cl","fecha_ejecucion","acciones"],this.selectedEjecucion=null,this.selectedEjecucionForm=this._formBuilder.group({id:[""],no_suplemento_id:["",r.kI.required],proveedor_id:["",r.kI.required],no_contrato_id:["",r.kI.required],trabajo_ejecutado:["",r.kI.required],costo_cup:["",[r.kI.required,r.kI.min(0)]],costo_cl:["",[r.kI.required,r.kI.min(0)]],fecha_ejecucion:["",r.kI.required],proveedor:[null],contrato:[null],suplemento:[null]}),this.isLoadingResults=!0,this.isRateLimitReached=!1,this._unsubscribeAll=new N.x,this.searchInputControl=new r.NI(""),this.dataSource=new s.by([]),this.initFilterForm(),this.loadEjecuciones()}loadEjecuciones(){this.isLoadingResults=!0,setTimeout(()=>{this.dataSource=new s.by(R),this.dataSource.paginator=this._paginator,this.dataSource.sort=this._sort,this.resultsLength=R.length,this.isLoadingResults=!1},500)}initFilterForm(){this.filterForm=this._formBuilder.group({no_suplemento_id_filter:[""],proveedor_filter:[""],contrato_filter:[""],trabajo_ejecutado_filter:[""],costo_cup_filter:[""],costo_cl_filter:[""],fecha_ejecucion_filter:[""],no_contrato_filter:[""],valor_cup_filter:[""],valor_usd_filter:[""],fecha_entrada_filter:[""],fecha_firmado_filter:[""]})}initSelectedEjecucionForm(){}ngAfterViewInit(){this.dataSource&&(this.dataSource.paginator=this._paginator,this.dataSource.sort=this._sort)}openAddEjecucionDialog(){this._matDialog.open(M,{width:"800px",maxWidth:"90vw",maxHeight:"90vh",disableClose:!0,data:{action:"new",ejecucion:null}}).afterClosed().subscribe(n=>{n&&this.showMessage("Ejecuci\xf3n de suplemento guardada exitosamente")})}openEditEjecucionDialog(t){this._matDialog.open(M,{width:"800px",maxWidth:"90vw",maxHeight:"90vh",disableClose:!0,data:{action:"edit",ejecucion:{...t}}}).afterClosed().subscribe(i=>{i&&this.showMessage("Ejecuci\xf3n de suplemento actualizada exitosamente")})}deleteEjecucion(t){confirm(`\xbfEst\xe1 seguro de eliminar la ejecuci\xf3n del suplemento ${t.no_suplemento_id}?`)&&this.showMessage("Ejecuci\xf3n de suplemento eliminada exitosamente")}showMessage(t){this._snackBar.open(t,"Cerrar",{duration:5e3,horizontalPosition:"end",verticalPosition:"top"})}applyFilters(){this.showMessage("Filtros aplicados")}clearFilters(){this.searchInputControl.setValue(""),this.showMessage("Filtros limpiados")}exportToCSV(){this.showMessage("Exportar a CSV no implementado")}onPageChange(t){}toggleDetails(t){if(this.selectedEjecucion?.id===t)this.selectedEjecucion=null;else{const n=this.dataSource.data.find(i=>i.id===t);this.selectedEjecucion=n||null,n&&this.selectedEjecucionForm.patchValue({id:n.id,no_suplemento_id:n.no_suplemento_id,proveedor_id:n.proveedor_id,no_contrato_id:n.no_contrato_id,trabajo_ejecutado:n.trabajo_ejecutado,costo_cup:n.costo_cup,costo_cl:n.costo_cl,fecha_ejecucion:n.fecha_ejecucion?new Date(n.fecha_ejecucion).toISOString().substring(0,10):null,proveedor:n.proveedor,contrato:n.contrato,suplemento:n.suplemento})}}onSaveEjecucion(){if(this.selectedEjecucionForm.invalid)return void this.showMessage("Por favor complete todos los campos requeridos");const t=this.selectedEjecucionForm.getRawValue(),n={...this.selectedEjecucion,...t,fecha_ejecucion:t.fecha_ejecucion?new Date(t.fecha_ejecucion):null,proveedor:this.selectedEjecucion?.proveedor,contrato:this.selectedEjecucion?.contrato,suplemento:this.selectedEjecucion?.suplemento};console.log("Updating ejecucion:",n);const i=this.dataSource.data.findIndex(c=>c.id===n.id);i>-1&&(this.dataSource.data[i]=n,this.dataSource._updateChangeSubscription(),this.showMessage("Ejecuci\xf3n actualizada correctamente"),this.selectedEjecucion=null)}onCancelEdit(){this.selectedEjecucion=null}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(q.uw),e.Y36(L.ux),e.Y36(r.qu))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-ejecucion-suplemento"]],viewQuery:function(n,i){if(1&n&&(e.Gf(v.NW,5),e.Gf(_.YE,5)),2&n){let c;e.iGM(c=e.CRH())&&(i._paginator=c.first),e.iGM(c=e.CRH())&&(i._sort=c.first)}},standalone:!0,features:[e._Bn([h.Mq,d.uU,{provide:j.Ad,useValue:"es-ES"}]),e.jDz],decls:35,vars:8,consts:[[1,"flex","flex-col","min-h-screen","p-6","w-full"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden","mb-6","w-full"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4","mb-6"],[1,"text-2xl","font-semibold"],[1,"flex","flex-col","sm:flex-row","gap-3","w-full","sm:w-auto"],["mat-raised-button","","color","primary",1,"w-full","sm:w-auto",3,"click"],["mat-stroked-button","",1,"w-full","sm:w-auto",3,"click"],["mat-button","",1,"w-full","sm:w-auto",3,"click"],[1,"flex","flex-col","sm:flex-row","shrink-0","items-center","justify-between","py-4","px-6","md:px-8","border-b"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","autocomplete","off","placeholder","Buscar ejecuciones",3,"formControl"],[1,"flex","items-center","gap-4","mt-4","sm:mt-0"],["mat-icon-button","","matTooltip","Exportar tabla a CSV","aria-label","Exportar tabla a CSV",3,"color","click"],[3,"svgIcon"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-x-auto"],[4,"ngIf","ngIfElse"],["noEjecuciones",""],[1,"flex","flex-col","h-full","overflow-y-auto"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5",2,"grid-template-columns","repeat(11, minmax(100px, 1fr)) 100px"],[3,"mat-sort-header"],[1,"text-right",3,"mat-sort-header"],[1,"sticky-end"],[1,"inventory-grid","grid","gap-4","py-3","px-6","md:px-8","border-b","bg-gray-50","dark:bg-gray-800",2,"grid-template-columns","repeat(11, minmax(100px, 1fr)) 100px",3,"formGroup"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","No. Suplemento","formControlName","no_suplemento_id_filter"],["matInput","","placeholder","Proveedor","formControlName","proveedor_filter"],["matInput","","placeholder","Contrato","formControlName","contrato_filter"],["matInput","","placeholder","Trabajo Ejecutado","formControlName","trabajo_ejecutado_filter"],["matInput","","type","number","placeholder","Costo CUP","formControlName","costo_cup_filter"],["matInput","","type","number","placeholder","Costo CL","formControlName","costo_cl_filter"],["matInput","","type","date","placeholder","Fecha Ejecuci\xf3n","formControlName","fecha_ejecucion_filter"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"inventory-grid","grid","gap-4","py-3","px-6","md:px-8","border-b","items-center","text-m","hover:bg-gray-50","dark:hover:bg-gray-800",2,"grid-template-columns","repeat(7, minmax(100px, 1fr)) 80px"],[1,"truncate",3,"matTooltip"],[1,"truncate","max-w-xs",3,"matTooltip"],[1,"text-right"],[1,"flex","items-center","justify-end","gap-2","sticky-end"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6","whitespace-nowrap",3,"click"],[1,"icon-size-5",3,"svgIcon"],["class","grid",4,"ngIf"],[1,"grid"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"responsive-form","flex","flex-col","w-full","mx-auto","p-8",3,"formGroup"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-1/2","sm:pl-8"],[1,"w-full"],["matInput","","formControlName","no_suplemento_id","type","number"],[4,"ngIf"],["matInput","","readonly","",3,"value"],["matInput","","formControlName","trabajo_ejecutado","rows","3"],["matInput","","type","number","step","0.01","min","0","formControlName","costo_cup"],["matInput","","type","number","step","0.01","min","0","formControlName","costo_cl"],["matInput","","formControlName","fecha_ejecucion","readonly","",3,"matDatepicker","click"],["matSuffix","",3,"for"],["picker",""],[1,"flex","justify-end","gap-4","mt-8"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"p-8","sm:p-16","border-b","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h2",5),e._uU(6,"Ejecuci\xf3n de Suplementos"),e.qZA(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return i.openAddEjecucionDialog()}),e.TgZ(9,"mat-icon"),e._uU(10,"add"),e.qZA(),e.TgZ(11,"span"),e._uU(12,"Agregar Ejecuci\xf3n"),e.qZA()(),e.TgZ(13,"button",8),e.NdJ("click",function(){return i.applyFilters()}),e.TgZ(14,"mat-icon"),e._uU(15,"filter_alt"),e.qZA(),e.TgZ(16,"span"),e._uU(17,"Aplicar Filtros"),e.qZA()(),e.TgZ(18,"button",9),e.NdJ("click",function(){return i.clearFilters()}),e.TgZ(19,"mat-icon"),e._uU(20,"clear_all"),e.qZA(),e.TgZ(21,"span"),e._uU(22,"Limpiar"),e.qZA()()()(),e.TgZ(23,"div",10)(24,"mat-form-field",11),e._UZ(25,"mat-icon",12)(26,"input",13),e.qZA(),e.TgZ(27,"div",14)(28,"button",15),e.NdJ("click",function(){return i.exportToCSV()}),e._UZ(29,"mat-icon",16),e.qZA()()(),e.TgZ(30,"div",17)(31,"div",18),e.YNc(32,nt,44,16,"ng-container",19)(33,it,2,0,"ng-template",null,20,e.W1O),e.qZA()()()()),2&n){const c=e.MAs(34);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:check-circle"),e.xp6(21),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",i.searchInputControl),e.xp6(2),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(3),e.Q6J("ngIf",i.dataSource.data.length>0)("ngIfElse",c)}},dependencies:[d.ez,d.sg,d.O5,d.JJ,d.uU,s.p0,v.TU,v.NW,_.JX,_.YE,_.nU,Z.Ps,Z.Hw,g.ot,g.lW,g.RK,A.AV,A.gM,q.Is,L.ZX,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.oH,r.sg,r.u,C.LD,u.KE,u.hX,u.TO,u.qo,u.R9,x.c,x.Nt,u.lN,h.FA,h.Mq,h.hl,h.nW,j.XK,r.u5],encapsulation:2})}return o})();var B=m(5195),lt=m(2096);const mt=[{id:1,proveedor_id:1,no_contrato_id:101,no_suplemento_id:201,costo_cup:5e3,costo_cl:0,trabajo_ejecutado:"Trabajo de mantenimiento",fecha_ejecucion:new Date("2023-12-01"),proveedor:{id:1,municipio_id:1,ministerio_id:1,nombre:"Proveedor A",codigo:"P001",telefonos:"12345678",domicilio:"Calle 1",municipio:null,ministerio:null,fechaCreacion:"2023-01-01"},contrato:{id:101,vigencia_id:1,proveedor_id:1,tipo_contrato_id:1,no_contrato:1001,fecha_entrada:new Date("2023-01-01"),fecha_firmado:new Date("2023-01-10"),valor_cup:1e5,monto_vencimiento_cup:0,monto_vencimiento_cl:0,valor_usd:0,monto_vencimiento_usd:0,observaciones:"",no_contrato_contratacion:1001,fecha_comite_contratacion:new Date("2023-01-05"),no_comite_contratacion:1,no_acuerdo_comite_contratacion:1,fecha_comite_administracion:new Date("2023-01-07"),no_comite_administracion:1,no_acuerdo_comite_administracion:1,departamento_id:1,fecha_vencido:new Date("2023-11-30"),valor_monto_restante:0,entidad:[],vigencia:null,proveedor:null,tipo_contrato:null,departamento:null,estado:"Vencido"},suplemento:{id:201,estado:"Vencido",vigencia_id:1,proveedor_id:1,tipo_contrato_id:1,no_contrato_id:101,departamento_id:1,fecha_entrada:new Date("2023-01-15"),fecha_firmado:new Date("2023-01-20"),valor_cup:2e4,monto_vencimiento_cup:0,monto_vencimiento_cl:0,valor_usd:0,monto_vencimiento_usd:0,observaciones:"",no_contrato_contratacion:1001,fecha_comite_contratacion:new Date("2023-01-18"),no_comite_contratacion:1,no_acuerdo_comite_contratacion:1,fecha_comite_administracion:new Date("2023-01-19"),no_comite_administracion:1,no_acuerdo_comite_administracion:1,fecha_vencido:new Date("2023-11-30"),valor_monto_restante:0,vigencia:null,proveedor:null,tipo_contrato:null,departamento:null}},{id:2,proveedor_id:2,no_contrato_id:102,no_suplemento_id:202,costo_cup:3e3,costo_cl:0,trabajo_ejecutado:"Reparaci\xf3n de equipo",fecha_ejecucion:new Date("2023-11-15"),proveedor:{id:2,municipio_id:2,ministerio_id:2,nombre:"Proveedor B",codigo:"P002",telefonos:"87654321",domicilio:"Calle 2",municipio:null,ministerio:null,fechaCreacion:"2023-02-01"},contrato:{id:102,vigencia_id:2,proveedor_id:2,tipo_contrato_id:2,no_contrato:1002,fecha_entrada:new Date("2023-02-01"),fecha_firmado:new Date("2023-02-10"),valor_cup:8e4,monto_vencimiento_cup:0,monto_vencimiento_cl:0,valor_usd:0,monto_vencimiento_usd:0,observaciones:"",no_contrato_contratacion:1002,fecha_comite_contratacion:new Date("2023-02-05"),no_comite_contratacion:2,no_acuerdo_comite_contratacion:2,fecha_comite_administracion:new Date("2023-02-07"),no_comite_administracion:2,no_acuerdo_comite_administracion:2,departamento_id:2,fecha_vencido:new Date("2023-10-31"),valor_monto_restante:0,entidad:[],vigencia:null,proveedor:null,tipo_contrato:null,departamento:null,estado:"Vencido"},suplemento:{id:202,estado:"Vencido",vigencia_id:2,proveedor_id:2,tipo_contrato_id:2,no_contrato_id:102,departamento_id:2,fecha_entrada:new Date("2023-02-15"),fecha_firmado:new Date("2023-02-20"),valor_cup:15e3,monto_vencimiento_cup:0,monto_vencimiento_cl:0,valor_usd:0,monto_vencimiento_usd:0,observaciones:"",no_contrato_contratacion:1002,fecha_comite_contratacion:new Date("2023-02-18"),no_comite_contratacion:2,no_acuerdo_comite_contratacion:2,fecha_comite_administracion:new Date("2023-02-19"),no_comite_administracion:2,no_acuerdo_comite_administracion:2,fecha_vencido:new Date("2023-10-31"),valor_monto_restante:0,vigencia:null,proveedor:null,tipo_contrato:null,departamento:null}}];let st=(()=>{class o{constructor(){this.ejecuciones=[],this.ejecuciones=mt}getExpiredEjecuciones(t,n){const i=this.ejecuciones.filter(p=>"Vencido"===p.estado),c=t*n,f=i.slice(c,c+n);return(0,lt.of)({data:f,total:i.length})}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function dt(o,a){1&o&&(e.TgZ(0,"div",12),e._UZ(1,"mat-progress-bar",13),e.qZA())}function ut(o,a){if(1&o&&(e.TgZ(0,"div",14)(1,"div",15),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.errorMessage)}}function pt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," No. Suplemento "),e.qZA())}function _t(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",35),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.no_suplemento_id," ")}}function ft(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Proveedor "),e.qZA())}function gt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",36),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",(null==t.proveedor?null:t.proveedor.nombre)||"N/A"," ")}}function ht(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," No. Contrato "),e.qZA())}function vt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",36),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",(null==t.contrato?null:t.contrato.no_contrato)||"N/A"," ")}}function xt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Trabajo Ejecutado "),e.qZA())}function Zt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",36),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.trabajo_ejecutado," ")}}function bt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Costo CUP "),e.qZA())}function Tt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",37),e._uU(2),e.ALo(3,"currency"),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",e.gM2(3,1,t.costo_cup,"CUP","symbol","1.2-2")," ")}}function Ct(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Fecha Ejecuci\xf3n "),e.qZA())}function At(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",38),e._uU(2),e.ALo(3,"date"),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,t.fecha_ejecucion,"dd/MM/yyyy")," ")}}function qt(o,a){1&o&&(e.TgZ(0,"th",39),e._uU(1," Acciones "),e.qZA())}function St(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",34)(1,"div",40)(2,"button",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.restoreEjecucion(c.id))}),e._UZ(3,"mat-icon",42),e.qZA(),e.TgZ(4,"button",43),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteEjecucion(c.id))}),e._UZ(5,"mat-icon",44),e.qZA()()()}2&o&&(e.xp6(3),e.Q6J("svgIcon","heroicons_outline:arrow-path"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function jt(o,a){1&o&&e._UZ(0,"tr",45)}function Ut(o,a){1&o&&e._UZ(0,"tr",46)}function wt(o,a){1&o&&(e.TgZ(0,"div",47),e._uU(1," No hay ejecuciones vencidas "),e.qZA())}const yt=o=>({"pointer-events-none":o}),Et=()=>[5,10,25,100];function kt(o,a){if(1&o&&(e.TgZ(0,"div",16)(1,"table",17,18),e.ynx(3,19),e.YNc(4,pt,2,0,"th",20)(5,_t,3,1,"td",21),e.BQk(),e.ynx(6,22),e.YNc(7,ft,2,0,"th",20)(8,gt,3,1,"td",21),e.BQk(),e.ynx(9,23),e.YNc(10,ht,2,0,"th",20)(11,vt,3,1,"td",21),e.BQk(),e.ynx(12,24),e.YNc(13,xt,2,0,"th",20)(14,Zt,3,1,"td",21),e.BQk(),e.ynx(15,25),e.YNc(16,bt,2,0,"th",20)(17,Tt,4,6,"td",21),e.BQk(),e.ynx(18,26),e.YNc(19,Ct,2,0,"th",20)(20,At,4,4,"td",21),e.BQk(),e.ynx(21,27),e.YNc(22,qt,2,0,"th",28)(23,St,6,2,"td",21),e.BQk(),e.YNc(24,jt,1,0,"tr",29)(25,Ut,1,0,"tr",30),e.qZA(),e.YNc(26,wt,2,0,"div",31),e._UZ(27,"mat-paginator",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource)("trackByFn",t.trackByFn),e.xp6(23),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",0===t.dataSource.data.length&&!t.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(12,yt,t.isLoading))("length",t.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",e.DdM(14,Et))("showFirstLastButtons",!0)}}let It=(()=>{class o{constructor(t,n){this.ejecucionSuplementoService=t,this.cdr=n,this.displayedColumns=["no_suplemento_id","proveedor","contrato","trabajo_ejecutado","costo_cup","fecha_ejecucion","acciones"],this.isLoading=!1,this.errorMessage="",this.searchInputControl=new r.NI,this.selectedEjecucion=null,this.dataSource=new s.by([])}ngOnInit(){this.loadExpiredEjecuciones(),this.setupSearch()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.cdr.markForCheck()}setupSearch(){this.dataSource.filterPredicate=(t,n)=>{if(!n)return!0;const i=n.toLowerCase().split(" ").filter(l=>l.length>0),c=[t.no_suplemento_id?.toString()||"",t.proveedor?.nombre||"",t.contrato?.no_contrato?.toString()||"",t.trabajo_ejecutado||"",t.costo_cup?.toString()||""].join(" ").toLowerCase();return i.every(l=>c.includes(l))},this.searchInputControl.valueChanges.pipe((0,y.b)(300)).subscribe(t=>{this.dataSource.filter=t?.trim().toLowerCase()||""})}loadExpiredEjecuciones(){this.isLoading=!0,this.errorMessage="",console.log("Cargando ejecuciones vencidas...");const t=[{id:1,no_suplemento_id:1,proveedor_id:1,no_contrato_id:1,trabajo_ejecutado:"Instalaci\xf3n de equipos de red",costo_cup:15e3,costo_cl:0,fecha_ejecucion:new Date("2024-01-15"),estado:"Vencido",proveedor:{id:1,nombre:"Tecnolog\xeda Avanzada S.A.",codigo:"TECH001"},contrato:{id:1,no_contrato:1001,objeto_contrato:"Servicios de TI"},suplemento:{id:1,no_suplemento:"SUP-001"}},{id:2,no_suplemento_id:2,proveedor_id:2,no_contrato_id:2,trabajo_ejecutado:"Mantenimiento de servidores",costo_cup:25e3,costo_cl:0,fecha_ejecucion:new Date("2024-02-20"),estado:"Vencido",proveedor:{id:2,nombre:"Sistemas Integrales Ltd.",codigo:"SIS002"},contrato:{id:2,no_contrato:1002,objeto_contrato:"Mantenimiento de infraestructura"},suplemento:{id:2,no_suplemento:"SUP-002"}},{id:3,no_suplemento_id:3,proveedor_id:1,no_contrato_id:1,trabajo_ejecutado:"Configuraci\xf3n de firewall",costo_cup:8500,costo_cl:0,fecha_ejecucion:new Date("2024-03-10"),estado:"Vencido",proveedor:{id:1,nombre:"Tecnolog\xeda Avanzada S.A.",codigo:"TECH001"},contrato:{id:1,no_contrato:1001,objeto_contrato:"Servicios de TI"},suplemento:{id:3,no_suplemento:"SUP-003"}}];this.ejecucionSuplementoService.getExpiredEjecuciones(0,10).subscribe({next:n=>{console.log("Respuesta del servicio:",n);let i=[];n&&n.data&&Array.isArray(n.data)&&n.data.length>0?(i=n.data,console.log("Usando datos del servicio")):Array.isArray(n)&&n.length>0?(i=n,console.log("Usando respuesta directa del servicio")):(console.warn("Servicio no devolvi\xf3 datos v\xe1lidos, usando datos mock"),i=t),console.log("Datos finales para la tabla:",i),this.dataSource.data=i,this.isLoading=!1,this.cdr.markForCheck()},error:n=>{console.error("Error del servicio, usando datos mock:",n),this.dataSource.data=t,this.errorMessage="",this.isLoading=!1,this.cdr.markForCheck()}})}trackByFn(t,n){return n.id||t}selectEjecucion(t){this.selectedEjecucion=this.selectedEjecucion?.id===t.id?null:t}isSelected(t){return this.selectedEjecucion?.id===t.id}restoreEjecucion(t){console.log("Restaurar ejecuci\xf3n con id:",t)}deleteEjecucion(t){console.log("Eliminar ejecuci\xf3n con id:",t)}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(st),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-expired"]],viewQuery:function(n,i){if(1&n&&(e.Gf(_.YE,5),e.Gf(v.NW,5)),2&n){let c;e.iGM(c=e.CRH())&&(i.sort=c.first),e.iGM(c=e.CRH())&&(i.paginator=c.first)}},standalone:!0,features:[e.jDz],decls:13,vars:7,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],["class","flex justify-center p-8",4,"ngIf"],["class","p-8 text-center",4,"ngIf"],["class","overflow-x-auto mx-6",4,"ngIf"],[1,"flex","justify-center","p-8"],["mode","indeterminate"],[1,"p-8","text-center"],[1,"text-red-600","text-lg"],[1,"overflow-x-auto","mx-6"],["mat-table","","matSort","",1,"w-full","bg-transparent",3,"dataSource","trackByFn"],["recentTransactionsTable",""],["matColumnDef","no_suplemento_id"],["class","bg-gray-50 dark:bg-black dark:bg-opacity-5","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","pr-6","mat-cell","",4,"matCellDef"],["matColumnDef","proveedor"],["matColumnDef","contrato"],["matColumnDef","trabajo_ejecutado"],["matColumnDef","costo_cup"],["matColumnDef","fecha_ejecucion"],["matColumnDef","acciones"],["class","bg-gray-50 dark:bg-black dark:bg-opacity-5","mat-header-cell","",4,"matHeaderCellDef"],["class","shadow-none","mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["class","p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center",4,"ngIf"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-header-cell","","mat-sort-header","",1,"bg-gray-50","dark:bg-black","dark:bg-opacity-5"],["mat-cell","",1,"pr-6"],[1,"text-md","font-medium","text-secondary"],[1,"text-md","font-medium"],[1,"text-md","font-medium","text-green-600"],[1,"text-md","font-medium","text-red-600"],["mat-header-cell","",1,"bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"flex","items-center","gap-2"],["mat-stroked-button","","matTooltip","Restaurar",1,"min-h-7","min-w-10","h-7","px-2","leading-6",3,"click"],[1,"icon-size-4",3,"svgIcon"],["mat-stroked-button","","matTooltip","Eliminar permanentemente",1,"min-h-7","min-w-10","h-7","px-2","leading-6",3,"click"],[1,"icon-size-4","text-red-600",3,"svgIcon"],["mat-header-row","",1,"shadow-none"],["mat-row","",1,"order-row","h-16"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Ejecuciones de Suplementos Vencidas"),e.qZA(),e.TgZ(4,"div",3)(5,"mat-form-field",4),e._UZ(6,"mat-icon",5)(7,"input",6),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8),e.YNc(10,dt,2,0,"div",9)(11,ut,3,1,"div",10)(12,kt,28,15,"div",11),e.qZA()()()),2&n&&(e.xp6(6),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar ejecuciones..."),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",i.errorMessage&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading))},dependencies:[d.ez,d.mk,d.O5,d.H9,d.uU,g.ot,g.lW,U.Cv,U.pW,_.JX,_.YE,_.nU,s.p0,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,Z.Ps,Z.Hw,r.UX,r.Fj,r.JJ,r.oH,v.TU,v.NW,u.lN,u.KE,u.qo,x.c,x.Nt,C.LD,A.AV,A.gM,B.QW],styles:[".expired-component .mat-mdc-table .mat-mdc-header-row{height:56px}.expired-component .mat-mdc-table .mat-mdc-row{height:72px}.expired-component .mat-mdc-table .mat-mdc-row:hover{--tw-bg-opacity: 1;background-color:rgb(248 250 252 / var(--tw-bg-opacity))}:is(.dark .expired-component .mat-mdc-table .mat-mdc-row:hover){background-color:var(--fuse-bg-hover)}.expired-component .mat-mdc-table .mat-mdc-cell,.expired-component .mat-mdc-table .mat-mdc-header-cell{border-bottom:1px solid;--tw-border-opacity: 1;border-color:rgb(226 232 240 / var(--tw-border-opacity))}:is(.dark .expired-component .mat-mdc-table .mat-mdc-cell),:is(.dark .expired-component .mat-mdc-table .mat-mdc-header-cell){--tw-border-opacity: 1;border-color:rgb(51 65 85 / var(--tw-border-opacity))}.expired-component .order-row{cursor:pointer;transition:background-color .15s cubic-bezier(.25,.8,.25,1)}.expired-component .search-input .mat-mdc-form-field-subscript-wrapper{display:none}@media (max-width: 768px){.expired-component .mat-mdc-table .mat-mdc-cell,.expired-component .mat-mdc-table .mat-mdc-header-cell{padding:8px 4px;font-size:12px}}.loading-shade{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.action-buttons .mat-mdc-button{min-width:32px;padding:0 8px}.action-buttons .mat-mdc-button .mat-icon{margin:0}.status-expired{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity))}:is(.dark .status-expired){--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity))}.status-expired{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.currency-amount{font-family:Roboto Mono,monospace;font-weight:500}.mat-mdc-table{background:transparent}.mat-mdc-table .mat-mdc-header-cell{font-weight:600;color:var(--fuse-text-secondary);border-bottom-color:var(--fuse-border)}.mat-mdc-table .mat-mdc-cell{border-bottom-color:var(--fuse-border)}.mat-mdc-table .mat-mdc-row:hover{background-color:var(--fuse-bg-hover)}.fuse-mat-dense .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-outlined-button{border-color:var(--fuse-border)}.mat-mdc-outlined-button:hover{background-color:var(--fuse-bg-hover)}.mat-mdc-progress-bar{--mdc-linear-progress-active-indicator-color: var(--fuse-primary)}.mat-mdc-tooltip{font-size:12px}@media (max-width: 1024px){.overflow-x-auto .mat-mdc-table{min-width:800px}}.overflow-x-auto::-webkit-scrollbar{height:6px}.overflow-x-auto::-webkit-scrollbar-track{background:var(--fuse-bg-card)}.overflow-x-auto::-webkit-scrollbar-thumb{background:var(--fuse-border);border-radius:3px}.overflow-x-auto::-webkit-scrollbar-thumb:hover{background:var(--fuse-text-hint)}\n"],encapsulation:2,changeDetection:0})}return o})();function Dt(o,a){1&o&&(e.TgZ(0,"div",12),e._UZ(1,"mat-progress-bar",13),e.qZA())}function Ft(o,a){if(1&o&&(e.TgZ(0,"div",14)(1,"div",15),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.errorMessage)}}function Jt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," No. Suplemento "),e.qZA())}function Nt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",35),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.no_suplemento," ")}}function Qt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Proveedor "),e.qZA())}function Lt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"div",36)(2,"span",37),e._uU(3),e.qZA(),e.TgZ(4,"span",38),e._uU(5),e.qZA()()()),2&o){const t=a.$implicit;e.xp6(3),e.hij(" ",(null==t.proveedor?null:t.proveedor.nombre)||"N/A"," "),e.xp6(2),e.hij(" ",(null==t.proveedor?null:t.proveedor.codigo)||""," ")}}function Mt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Tipo Suplemento "),e.qZA())}function Yt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",37),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",(null==t.tipo_suplemento?null:t.tipo_suplemento.nombre)||"N/A"," ")}}function Pt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Valor CUP "),e.qZA())}function zt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",39),e._uU(2),e.ALo(3,"currency"),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",e.gM2(3,1,t.valor_cup,"CUP","symbol","1.2-2")," ")}}function Vt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Fecha Inicio "),e.qZA())}function Ot(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"span",37),e._uU(2),e.ALo(3,"date"),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,t.fecha_inicio,"dd/MM/yyyy")," ")}}function Rt(o,a){1&o&&(e.TgZ(0,"th",33),e._uU(1," Fecha Vencimiento "),e.qZA())}function Bt(o,a){if(1&o&&(e.TgZ(0,"td",34)(1,"div",40)(2,"span",41),e._uU(3),e.ALo(4,"date"),e.qZA()()()),2&o){const t=a.$implicit;e.xp6(3),e.hij(" ",e.xi3(4,1,t.fecha_vencido,"dd/MM/yyyy")," ")}}function Ht(o,a){1&o&&(e.TgZ(0,"th",42),e._uU(1," Acciones "),e.qZA())}function Gt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",34)(1,"div",43)(2,"button",44),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.restoreSuplemento(c.id))}),e._UZ(3,"mat-icon",45),e.qZA(),e.TgZ(4,"button",46),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteSuplemento(c.id))}),e._UZ(5,"mat-icon",47),e.qZA(),e.TgZ(6,"button",48),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.viewDetails(c.id))}),e._UZ(7,"mat-icon",49),e.qZA()()()}2&o&&(e.xp6(3),e.Q6J("svgIcon","heroicons_outline:arrow-path"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:eye"))}function $t(o,a){1&o&&e._UZ(0,"tr",50)}function Wt(o,a){1&o&&e._UZ(0,"tr",51)}function Kt(o,a){1&o&&(e.TgZ(0,"div",52)(1,"div",53),e._UZ(2,"mat-icon",54),e.TgZ(3,"span",55),e._uU(4,"No hay suplementos vencidos"),e.qZA(),e.TgZ(5,"span",56),e._uU(6,"Los suplementos vencidos aparecer\xe1n aqu\xed"),e.qZA()()()),2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:document-text"))}const Xt=o=>({"pointer-events-none":o}),eo=()=>[5,10,25,100];function to(o,a){if(1&o&&(e.TgZ(0,"div",16)(1,"table",17,18),e.ynx(3,19),e.YNc(4,Jt,2,0,"th",20)(5,Nt,3,1,"td",21),e.BQk(),e.ynx(6,22),e.YNc(7,Qt,2,0,"th",20)(8,Lt,6,2,"td",21),e.BQk(),e.ynx(9,23),e.YNc(10,Mt,2,0,"th",20)(11,Yt,3,1,"td",21),e.BQk(),e.ynx(12,24),e.YNc(13,Pt,2,0,"th",20)(14,zt,4,6,"td",21),e.BQk(),e.ynx(15,25),e.YNc(16,Vt,2,0,"th",20)(17,Ot,4,4,"td",21),e.BQk(),e.ynx(18,26),e.YNc(19,Rt,2,0,"th",20)(20,Bt,5,4,"td",21),e.BQk(),e.ynx(21,27),e.YNc(22,Ht,2,0,"th",28)(23,Gt,8,3,"td",21),e.BQk(),e.YNc(24,$t,1,0,"tr",29)(25,Wt,1,0,"tr",30),e.qZA(),e.YNc(26,Kt,7,1,"div",31),e._UZ(27,"mat-paginator",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource)("trackByFn",t.trackByFn),e.xp6(23),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",0===t.dataSource.data.length&&!t.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(12,Xt,t.isLoading))("length",t.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",e.DdM(14,eo))("showFirstLastButtons",!0)}}const oo=[{path:"list",component:Ie},{path:"ejecucion",component:ct},{path:"vencidas",component:(()=>{class o{constructor(t,n){this.suplementoService=t,this.cdr=n,this.displayedColumns=["no_suplemento","proveedor","tipo_suplemento","valor_cup","fecha_inicio","fecha_vencido","acciones"],this.isLoading=!1,this.errorMessage="",this.searchInputControl=new r.NI,this.dataSource=new s.by([])}ngOnInit(){this.loadSuplementosVencidos(),this.setupSearch()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.cdr.markForCheck()}setupSearch(){this.dataSource.filterPredicate=(t,n)=>{if(!n)return!0;const i=n.toLowerCase().split(" ").filter(l=>l.length>0),c=[t.no_suplemento||"",t.proveedor?.nombre||"",t.tipo_suplemento?.nombre||"",t.valor_cup?.toString()||""].join(" ").toLowerCase();return i.every(l=>c.includes(l))},this.searchInputControl.valueChanges.pipe((0,y.b)(300)).subscribe(t=>{this.dataSource.filter=t?.trim().toLowerCase()||""})}loadSuplementosVencidos(){this.isLoading=!0,this.errorMessage="",console.log("Cargando suplementos vencidos...");const t=[{id:1,no_suplemento:"SUP-001",proveedor_id:1,tipo_suplemento_id:1,valor_cup:5e4,valor_usd:0,fecha_inicio:new Date("2024-01-01"),fecha_vencido:new Date("2024-01-31"),estado:"Vencido",proveedor:{id:1,nombre:"Tecnolog\xeda Avanzada S.A.",codigo:"TECH001"},tipo_suplemento:{id:1,nombre:"Servicios de TI",descripcion:"Servicios tecnol\xf3gicos"}},{id:2,no_suplemento:"SUP-002",proveedor_id:2,tipo_suplemento_id:2,valor_cup:75e3,valor_usd:0,fecha_inicio:new Date("2024-02-01"),fecha_vencido:new Date("2024-02-28"),estado:"Vencido",proveedor:{id:2,nombre:"Sistemas Integrales Ltd.",codigo:"SIS002"},tipo_suplemento:{id:2,nombre:"Mantenimiento",descripcion:"Servicios de mantenimiento"}},{id:3,no_suplemento:"SUP-003",proveedor_id:3,tipo_suplemento_id:1,valor_cup:35e3,valor_usd:0,fecha_inicio:new Date("2024-03-01"),fecha_vencido:new Date("2024-03-15"),estado:"Vencido",proveedor:{id:3,nombre:"Consultor\xeda Digital Corp.",codigo:"CDC003"},tipo_suplemento:{id:1,nombre:"Servicios de TI",descripcion:"Servicios tecnol\xf3gicos"}},{id:4,no_suplemento:"SUP-004",proveedor_id:1,tipo_suplemento_id:3,valor_cup:12e4,valor_usd:0,fecha_inicio:new Date("2024-04-01"),fecha_vencido:new Date("2024-04-30"),estado:"Vencido",proveedor:{id:1,nombre:"Tecnolog\xeda Avanzada S.A.",codigo:"TECH001"},tipo_suplemento:{id:3,nombre:"Capacitaci\xf3n",descripcion:"Servicios de formaci\xf3n"}}];this.suplementoService.getSuplementosVencidos(0,10).subscribe({next:n=>{console.log("Respuesta del servicio:",n);let i=[];n&&n.data&&Array.isArray(n.data)&&n.data.length>0?(i=n.data,console.log("Usando datos del servicio")):Array.isArray(n)&&n.length>0?(i=n,console.log("Usando respuesta directa del servicio")):(console.warn("Servicio no devolvi\xf3 datos v\xe1lidos, usando datos mock"),i=t),console.log("Datos finales para la tabla:",i),this.dataSource.data=i,this.isLoading=!1,this.cdr.markForCheck()},error:n=>{console.error("Error del servicio, usando datos mock:",n),this.dataSource.data=t,this.errorMessage="",this.isLoading=!1,this.cdr.markForCheck()}})}trackByFn(t,n){return n.id||t}restoreSuplemento(t){console.log("Restaurar suplemento con id:",t)}deleteSuplemento(t){console.log("Eliminar suplemento con id:",t)}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(Q.y),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-suplementos-expired"]],viewQuery:function(n,i){if(1&n&&(e.Gf(_.YE,5),e.Gf(v.NW,5)),2&n){let c;e.iGM(c=e.CRH())&&(i.sort=c.first),e.iGM(c=e.CRH())&&(i.paginator=c.first)}},standalone:!0,features:[e.jDz],decls:13,vars:7,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],["class","flex justify-center p-8",4,"ngIf"],["class","p-8 text-center",4,"ngIf"],["class","overflow-x-auto mx-6",4,"ngIf"],[1,"flex","justify-center","p-8"],["mode","indeterminate"],[1,"p-8","text-center"],[1,"text-red-600","text-lg"],[1,"overflow-x-auto","mx-6"],["mat-table","","matSort","",1,"w-full","bg-transparent",3,"dataSource","trackByFn"],["suplementosTable",""],["matColumnDef","no_suplemento"],["class","bg-gray-50 dark:bg-black dark:bg-opacity-5","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","pr-6","mat-cell","",4,"matCellDef"],["matColumnDef","proveedor"],["matColumnDef","tipo_suplemento"],["matColumnDef","valor_cup"],["matColumnDef","fecha_inicio"],["matColumnDef","fecha_vencido"],["matColumnDef","acciones"],["class","bg-gray-50 dark:bg-black dark:bg-opacity-5","mat-header-cell","",4,"matHeaderCellDef"],["class","shadow-none","mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["class","p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center",4,"ngIf"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-header-cell","","mat-sort-header","",1,"bg-gray-50","dark:bg-black","dark:bg-opacity-5"],["mat-cell","",1,"pr-6"],[1,"text-md","font-medium","text-secondary"],[1,"flex","flex-col"],[1,"text-md","font-medium"],[1,"text-sm","text-secondary"],[1,"text-md","font-medium","text-green-600","currency-amount"],[1,"flex","items-center"],[1,"text-md","font-medium","text-red-600"],["mat-header-cell","",1,"bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"flex","items-center","gap-2","action-buttons"],["mat-stroked-button","","matTooltip","Restaurar suplemento",1,"min-h-7","min-w-10","h-7","px-2","leading-6",3,"click"],[1,"icon-size-4","text-blue-600",3,"svgIcon"],["mat-stroked-button","","matTooltip","Eliminar permanentemente",1,"min-h-7","min-w-10","h-7","px-2","leading-6",3,"click"],[1,"icon-size-4","text-red-600",3,"svgIcon"],["mat-stroked-button","","matTooltip","Ver detalles",1,"min-h-7","min-w-10","h-7","px-2","leading-6",3,"click"],[1,"icon-size-4","text-gray-600",3,"svgIcon"],["mat-header-row","",1,"shadow-none"],["mat-row","",1,"order-row","h-16"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"],[1,"flex","flex-col","items-center"],[1,"icon-size-24","text-gray-400","mb-4",3,"svgIcon"],[1,"text-gray-500"],[1,"text-sm","text-gray-400","mt-2"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Suplementos Vencidos"),e.qZA(),e.TgZ(4,"div",3)(5,"mat-form-field",4),e._UZ(6,"mat-icon",5)(7,"input",6),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8),e.YNc(10,Dt,2,0,"div",9)(11,Ft,3,1,"div",10)(12,to,28,15,"div",11),e.qZA()()()),2&n&&(e.xp6(6),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar suplementos..."),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",i.errorMessage&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading))},dependencies:[d.ez,d.mk,d.O5,d.H9,d.uU,g.ot,g.lW,U.Cv,U.pW,_.JX,_.YE,_.nU,s.p0,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,Z.Ps,Z.Hw,r.UX,r.Fj,r.JJ,r.oH,v.TU,v.NW,u.lN,u.KE,u.qo,x.c,x.Nt,C.LD,A.AV,A.gM,B.QW],encapsulation:2,changeDetection:0})}return o})()},{path:"vencidos",component:It}];let no=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[F.Bz.forChild(oo),F.Bz]})}return o})()}}]);