"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[592],{2682:(P,D,r)=>{r.d(D,{r:()=>T});var a=r(9862),p=r(9397),s=r(6306),m=r(2096),g=r(7398),n=r(2022),E=r(9212);let T=(()=>{class d{constructor(e){this.http=e}getTrabajadores(){return this.http.get(`${n.P.TRABAJADORES}`).pipe((0,p.b)(e=>console.log("Trabajadores obtenidos:",e)),(0,s.K)(e=>(console.error("Error al obtener trabajadores:",e),(0,m.of)(this.getMockTrabajadores()))),(0,g.U)(e=>e.data||[]))}searchTrabajadores(e){if(!e.trim())return this.getTrabajadores();const t=(new a.LE).set("search",e);return this.http.get(`${n.P.TRABAJADORES}`,{params:t}).pipe((0,s.K)(o=>(console.error("Error en b\xfasqueda de trabajadores:",o),(0,m.of)(this.getMockTrabajadores().filter(l=>l.nombre.toLowerCase().includes(e.toLowerCase())||l.apellido.toLowerCase().includes(e.toLowerCase())||l.email.toLowerCase().includes(e.toLowerCase()))))),(0,g.U)(o=>o.data||[]))}getTrabajadorById(e){return this.http.get(`${n.P.TRABAJADORES}/${e}`).pipe((0,s.K)(t=>{console.error("Error al obtener trabajador por ID:",t);const o=this.getMockTrabajadores().find(l=>l.id===e);return(0,m.of)(o||{})}))}createTrabajador(e){const t={nombre:e.nombre,apellido:e.apellido,usuario:e.usuario||e.email,contrasena:e.contrasena||"temporal123",cargo:e.cargo,departamento_id:e.departamento_id,email:e.email,telefono:e.telefono||"",telefono_movil:e.telefono_movil||"",rol:e.rol};return this.http.post(`${n.P.TRABAJADORES}`,t).pipe((0,p.b)(o=>console.log("Trabajador creado:",o)),(0,s.K)(o=>{console.error("Error al crear trabajador:",o);const l={...t,id:Date.now(),departamentoId:t.departamento_id,fecha_creacion:new Date,activo:!0};return(0,m.of)(l)}))}updateTrabajador(e,t){const o={nombre:t.nombre,apellido:t.apellido,usuario:t.usuario||t.email,cargo:t.cargo,departamento_id:t.departamento_id,email:t.email,telefono:t.telefono||"",telefono_movil:t.telefono_movil||"",rol:t.rol};return this.http.put(`${n.P.TRABAJADORES}/${e}`,o).pipe((0,p.b)(l=>console.log("Trabajador actualizado:",l)),(0,s.K)(l=>(console.error("Error al actualizar trabajador:",l),(0,m.of)({...o,id:e,departamentoId:o.departamento_id}))))}deleteTrabajador(e){return this.http.delete(`${n.P.TRABAJADORES}/${e}`).pipe((0,p.b)(()=>console.log("Trabajador eliminado:",e)),(0,s.K)(t=>(console.error("Error al eliminar trabajador:",t),(0,m.of)())))}getDepartamentos(){return this.http.get(`${n.P.DEPARTAMENTOS}`).pipe((0,s.K)(e=>(console.error("Error al obtener departamentos:",e),(0,m.of)(this.getMockDepartamentos()))))}exportToExcel(){return this.http.get(`${n.P.TRABAJADORES_EXPORT_EXCEL}`,{responseType:"blob"}).pipe((0,s.K)(e=>(console.error("Error al exportar a Excel:",e),(0,m.of)(new Blob))))}exportToPdf(){return this.http.get(`${n.P.TRABAJADORES_EXPORT_PDF}`,{responseType:"blob"}).pipe((0,s.K)(e=>(console.error("Error al exportar a PDF:",e),(0,m.of)(new Blob))))}getMockTrabajadores(){return[{id:1,nombre:"Juan",apellido:"P\xe9rez",usuario:"juan.perez",cargo:"Desarrollador Senior",departamento_id:2,departamentoId:2,email:"juan.perez@empresa.com",telefono:"123-456-7890",telefono_movil:"098-765-4321",rol:"user",activo:!0},{id:2,nombre:"Mar\xeda",apellido:"Gonz\xe1lez",usuario:"maria.gonzalez",cargo:"Gerente de RRHH",departamento_id:1,departamentoId:1,email:"maria.gonzalez@empresa.com",telefono:"123-456-7891",rol:"admin",activo:!0},{id:3,nombre:"Carlos",apellido:"Rodr\xedguez",usuario:"carlos.rodriguez",cargo:"Analista Financiero",departamento_id:3,departamentoId:3,email:"carlos.rodriguez@empresa.com",telefono:"123-456-7892",rol:"user",activo:!0}]}getMockDepartamentos(){return[{id:1,nombre:"Recursos Humanos"},{id:2,nombre:"Tecnolog\xeda"},{id:3,nombre:"Finanzas"},{id:4,nombre:"Operaciones"},{id:5,nombre:"Marketing"},{id:6,nombre:"Ventas"}]}static#o=this.\u0275fac=function(t){return new(t||d)(E.LFG(a.eN))};static#e=this.\u0275prov=E.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},7668:(P,D,r)=>{r.d(D,{h:()=>C});var a=r(6223),p=r(7700),s=r(8660),m=r(3393),g=r(6814),n=r(4170),E=r(4516),T=r(2296),d=r(8525),A=r(8034),e=r(3680),t=r(617),o=r(9212);function l(c,h){if(1&c&&(o.TgZ(0,"mat-option",19),o._uU(1),o.qZA()),2&c){const _=h.$implicit;o.Q6J("value",_),o.xp6(1),o.hij(" ",_.nombre," ")}}function v(c,h){if(1&c&&(o.TgZ(0,"mat-option",19),o._uU(1),o.qZA()),2&c){const _=h.$implicit;o.Q6J("value",_),o.xp6(1),o.hij(" ",_.no_contrato," ")}}let C=(()=>{class c{constructor(_,i,u,f){this.fb=_,this.dialogRef=i,this.dialog=u,this.data=f,this.proveedores=[],this.contratos=[]}ngOnInit(){this.form=this.fb.group({proveedor:["",a.kI.required],contrato:["",a.kI.required],costo_cup:["",a.kI.required],costo_cl:["",a.kI.required],trabajo_ejecutado:["",a.kI.required],fecha_ejecucion:["",a.kI.required]})}openNewProveedorDialog(){this.dialog.open(s.d,{width:"40%",height:"60%",disableClose:!0}).afterClosed().subscribe(i=>{i&&this.proveedores.push(i)})}openNewContratoDialog(){this.dialog.open(m._,{width:"40%",height:"90%",disableClose:!0}).afterClosed().subscribe(i=>{i&&this.contratos.push(i)})}save(){this.form.valid&&this.dialogRef.close(this.form.value)}cancel(){this.dialogRef.close()}static#o=this.\u0275fac=function(i){return new(i||c)(o.Y36(a.qu),o.Y36(p.so),o.Y36(p.uw),o.Y36(p.WI))};static#e=this.\u0275cmp=o.Xpm({type:c,selectors:[["app-suplemento-form"]],standalone:!0,features:[o.jDz],decls:46,vars:5,consts:[[1,"flex","flex-col","p-6","w-full"],[1,"text-2xl","font-bold","mb-6"],[1,"flex","flex-col","gap-4",3,"formGroup"],[1,"flex","items-center","gap-2"],[1,"flex-auto"],["formControlName","proveedor"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5"],["formControlName","contrato"],["matInput","","type","number","formControlName","costo_cup"],["matInput","","type","number","formControlName","costo_cl"],["matInput","","formControlName","trabajo_ejecutado"],["matInput","","formControlName","fecha_ejecucion",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"flex","justify-end","gap-2"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"]],template:function(i,u){if(1&i&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2,"Agregar Ejecuci\xf3n"),o.qZA(),o.TgZ(3,"form",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o._uU(7,"Proveedor"),o.qZA(),o.TgZ(8,"mat-select",5),o.YNc(9,l,2,2,"mat-option",6),o.qZA()(),o.TgZ(10,"button",7),o.NdJ("click",function(){return u.openNewProveedorDialog()}),o.TgZ(11,"mat-icon",8),o._uU(12,"add"),o.qZA()()(),o.TgZ(13,"div",3)(14,"mat-form-field",4)(15,"mat-label"),o._uU(16,"Contrato"),o.qZA(),o.TgZ(17,"mat-select",9),o.YNc(18,v,2,2,"mat-option",6),o.qZA()(),o.TgZ(19,"button",7),o.NdJ("click",function(){return u.openNewContratoDialog()}),o.TgZ(20,"mat-icon",8),o._uU(21,"add"),o.qZA()()(),o.TgZ(22,"mat-form-field")(23,"mat-label"),o._uU(24,"Costo (CUP)"),o.qZA(),o._UZ(25,"input",10),o.qZA(),o.TgZ(26,"mat-form-field")(27,"mat-label"),o._uU(28,"Costo (CL)"),o.qZA(),o._UZ(29,"input",11),o.qZA(),o.TgZ(30,"mat-form-field")(31,"mat-label"),o._uU(32,"Trabajo Ejecutado"),o.qZA(),o._UZ(33,"textarea",12),o.qZA(),o.TgZ(34,"mat-form-field")(35,"mat-label"),o._uU(36,"Fecha Ejecuci\xf3n"),o.qZA(),o._UZ(37,"input",13)(38,"mat-datepicker-toggle",14)(39,"mat-datepicker",null,15),o.qZA(),o.TgZ(41,"div",16)(42,"button",17),o.NdJ("click",function(){return u.cancel()}),o._uU(43,"Cancelar"),o.qZA(),o.TgZ(44,"button",18),o.NdJ("click",function(){return u.save()}),o._uU(45,"Guardar"),o.qZA()()()()),2&i){const f=o.MAs(40);o.xp6(3),o.Q6J("formGroup",u.form),o.xp6(6),o.Q6J("ngForOf",u.proveedores),o.xp6(9),o.Q6J("ngForOf",u.contratos),o.xp6(19),o.Q6J("matDatepicker",f),o.xp6(1),o.Q6J("for",f)}},dependencies:[g.ez,g.sg,a.UX,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,n.lN,n.KE,n.hX,n.R9,E.c,E.Nt,T.ot,T.lW,d.LD,d.gD,e.ey,A.FA,A.Mq,A.hl,A.nW,e.XK,t.Ps,t.Hw]})}return c})()}}]);