"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[292],{8660:(V,J,l)=>{l.d(J,{d:()=>B});var R=l(6814),m=l(6223),v=l(4170),b=l(4516),c=l(2296),I=l(8525),U=l(7700),Q=l(617),O=l(2596),L=l(2246),o=l(9212),Z=l(3680);function q(p,h){1&p&&(o.TgZ(0,"mat-error"),o._uU(1," El nombre es requerido "),o.qZA())}function P(p,h){1&p&&(o.TgZ(0,"mat-error"),o._uU(1," El c\xf3digo es requerido "),o.qZA())}function f(p,h){1&p&&(o.TgZ(0,"mat-error"),o._uU(1," Los tel\xe9fonos son requeridos "),o.qZA())}function y(p,h){1&p&&(o.TgZ(0,"mat-error"),o._uU(1," El domicilio es requerido "),o.qZA())}function w(p,h){if(1&p&&(o.TgZ(0,"mat-option",22),o._uU(1),o.qZA()),2&p){const e=h.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e.nombre_municipio," ")}}function T(p,h){1&p&&(o.TgZ(0,"mat-error"),o._uU(1," El municipio es requerido "),o.qZA())}function D(p,h){if(1&p&&(o.TgZ(0,"mat-option",22),o._uU(1),o.qZA()),2&p){const e=h.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e.nombre_ministerio," ")}}function A(p,h){1&p&&(o.TgZ(0,"mat-error"),o._uU(1," El ministerio es requerido "),o.qZA())}function N(p,h){if(1&p){const e=o.EpF();o.TgZ(0,"div",23)(1,"div",24)(2,"h4",25),o._uU(3),o.qZA(),o.TgZ(4,"button",26),o.NdJ("click",function(){const x=o.CHM(e).index,E=o.oxw();return o.KtG(E.removeRepresentante(x))}),o.TgZ(5,"mat-icon"),o._uU(6,"delete"),o.qZA()()(),o.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),o._uU(10,"Nombre"),o.qZA(),o._UZ(11,"input",5),o.TgZ(12,"mat-error"),o._uU(13,"El nombre es requerido"),o.qZA()(),o.TgZ(14,"mat-form-field",4)(15,"mat-label"),o._uU(16,"Cargo"),o.qZA(),o._UZ(17,"input",27),o.TgZ(18,"mat-error"),o._uU(19,"El cargo es requerido"),o.qZA()(),o.TgZ(20,"mat-form-field",4)(21,"mat-label"),o._uU(22,"Tel\xe9fono"),o.qZA(),o._UZ(23,"input",28),o.TgZ(24,"mat-error"),o._uU(25,"El tel\xe9fono es requerido"),o.qZA()(),o.TgZ(26,"mat-form-field",4)(27,"mat-label"),o._uU(28,"Email"),o.qZA(),o._UZ(29,"input",29),o.TgZ(30,"mat-error"),o._uU(31,"Ingrese un email v\xe1lido"),o.qZA()()()()}if(2&p){const e=h.index;o.Q6J("formGroupName",e),o.xp6(3),o.hij("Representante ",e+1,"")}}let B=(()=>{class p{get representantesArray(){return this.proveedorForm.get("representantes")}constructor(e,C,g,x){this.fb=e,this.dialog=C,this.dialogRef=g,this.data=x,this.ministerios=L.Cj,this.municipios=L.k0,this.proveedorForm=this.fb.group({nombre:["",[m.kI.required]],codigo:["",[m.kI.required]],telefonos:["",[m.kI.required]],domicilio:["",[m.kI.required]],municipio:[null,[m.kI.required]],ministerio:[null,[m.kI.required]],tipo:["",[m.kI.required]],categoria:[""],representantes:this.fb.array([])})}ngOnInit(){0===this.representantesArray.length&&this.addRepresentante()}createRepresentante(e){return this.fb.group({id:[e?.id||""],nombre:[e?.nombre||"",m.kI.required],cargo:[e?.cargo||"",m.kI.required],telefono:[e?.telefono||"",m.kI.required],email:[e?.email||"",[m.kI.required,m.kI.email]]})}addRepresentante(e){this.representantesArray.push(this.createRepresentante(e))}removeRepresentante(e){this.representantesArray.removeAt(e)}onCancel(){this.dialogRef.close()}onSubmit(){if(this.proveedorForm.valid){const e={...this.proveedorForm.value,id:Math.floor(1e3*Math.random())};this.dialogRef.close(e)}}static#e=this.\u0275fac=function(C){return new(C||p)(o.Y36(m.qu),o.Y36(U.uw),o.Y36(U.so),o.Y36(U.WI))};static#t=this.\u0275cmp=o.Xpm({type:p,selectors:[["app-proveedor-form"]],standalone:!0,features:[o.jDz],decls:53,vars:11,consts:[[1,"flex","flex-col","p-6","md:p-8","gap-4"],[1,"text-3xl","font-bold","mb-4"],[1,"flex","flex-col","gap-4",3,"formGroup","ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","codigo","required",""],["matInput","","formControlName","telefonos","required",""],["matInput","","formControlName","domicilio","required",""],["formControlName","municipio","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","ministerio","required",""],[1,"col-span-full","mt-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-lg","font-medium"],["mat-icon-button","","color","primary","type","button","matTooltip","Agregar representante",3,"click"],["formArrayName","representantes",1,"space-y-4"],["class","p-4 border rounded-lg",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","justify-end","gap-2","mt-4"],["type","button","mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],[3,"value"],[1,"p-4","border","rounded-lg",3,"formGroupName"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-md","font-medium"],["mat-icon-button","","color","warn","type","button","matTooltip","Eliminar",3,"click"],["matInput","","formControlName","cargo","required",""],["matInput","","formControlName","telefono","required",""],["matInput","","type","email","formControlName","email","required",""]],template:function(C,g){if(1&C&&(o.TgZ(0,"div",0)(1,"h2",1),o._uU(2,"Nuevo Proveedor"),o.qZA(),o.TgZ(3,"form",2),o.NdJ("ngSubmit",function(){return g.onSubmit()}),o.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o._uU(7,"Nombre"),o.qZA(),o._UZ(8,"input",5),o.YNc(9,q,2,0,"mat-error",6),o.qZA(),o.TgZ(10,"mat-form-field",4)(11,"mat-label"),o._uU(12,"C\xf3digo"),o.qZA(),o._UZ(13,"input",7),o.YNc(14,P,2,0,"mat-error",6),o.qZA()(),o.TgZ(15,"div",3)(16,"mat-form-field",4)(17,"mat-label"),o._uU(18,"Tel\xe9fonos"),o.qZA(),o._UZ(19,"input",8),o.YNc(20,f,2,0,"mat-error",6),o.qZA(),o.TgZ(21,"mat-form-field",4)(22,"mat-label"),o._uU(23,"Domicilio"),o.qZA(),o._UZ(24,"input",9),o.YNc(25,y,2,0,"mat-error",6),o.qZA()(),o.TgZ(26,"div",3)(27,"mat-form-field",4)(28,"mat-label"),o._uU(29,"Municipio"),o.qZA(),o.TgZ(30,"mat-select",10),o.YNc(31,w,2,2,"mat-option",11),o.qZA(),o.YNc(32,T,2,0,"mat-error",6),o.qZA(),o.TgZ(33,"mat-form-field",4)(34,"mat-label"),o._uU(35,"Ministerio"),o.qZA(),o.TgZ(36,"mat-select",12),o.YNc(37,D,2,2,"mat-option",11),o.qZA(),o.YNc(38,A,2,0,"mat-error",6),o.qZA()(),o.TgZ(39,"div",13)(40,"div",14)(41,"h3",15),o._uU(42,"Representantes"),o.qZA(),o.TgZ(43,"button",16),o.NdJ("click",function(){return g.addRepresentante()}),o.TgZ(44,"mat-icon"),o._uU(45,"add_circle"),o.qZA()()(),o.TgZ(46,"div",17),o.YNc(47,N,32,2,"div",18),o.qZA()(),o.TgZ(48,"div",19)(49,"button",20),o.NdJ("click",function(){return g.onCancel()}),o._uU(50,"Cancelar"),o.qZA(),o.TgZ(51,"button",21),o._uU(52,"Guardar"),o.qZA()()()()),2&C){let x,E,S,F,j,z;o.xp6(3),o.Q6J("formGroup",g.proveedorForm),o.xp6(6),o.Q6J("ngIf",null==(x=g.proveedorForm.get("nombre"))?null:x.hasError("required")),o.xp6(5),o.Q6J("ngIf",null==(E=g.proveedorForm.get("codigo"))?null:E.hasError("required")),o.xp6(6),o.Q6J("ngIf",null==(S=g.proveedorForm.get("telefonos"))?null:S.hasError("required")),o.xp6(5),o.Q6J("ngIf",null==(F=g.proveedorForm.get("domicilio"))?null:F.hasError("required")),o.xp6(6),o.Q6J("ngForOf",g.municipios),o.xp6(1),o.Q6J("ngIf",null==(j=g.proveedorForm.get("municipio"))?null:j.hasError("required")),o.xp6(5),o.Q6J("ngForOf",g.ministerios),o.xp6(1),o.Q6J("ngIf",null==(z=g.proveedorForm.get("ministerio"))?null:z.hasError("required")),o.xp6(9),o.Q6J("ngForOf",g.representantesArray.controls),o.xp6(4),o.Q6J("disabled",!g.proveedorForm.valid)}},dependencies:[R.ez,R.sg,R.O5,m.UX,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,m.x0,m.CE,v.lN,v.KE,v.hX,v.TO,b.c,b.Nt,c.ot,c.lW,c.RK,I.LD,I.gD,Z.ey,Q.Ps,Q.Hw,O.AV,O.gM]})}return p})()},7292:(V,J,l)=>{l.r(J),l.d(J,{ProveedoresRoutingModule:()=>Le});var R=l(1896),m=l(3566),v=l(1476),b=l(5313),c=l(6223),I=l(3620),U=l(3997),Q=l(9773),O=l(8645),L=l(9315),o=l(6814),Z=l(2296),q=l(6007),P=l(617),f=l(4170),y=l(4516),w=l(8525),T=l(7988),D=l(6385),A=l(7700),N=l(2596),B=l(8660),p=l(5520),h=l(1388),e=l(9212),C=l(3018),g=l(7174),x=l(2022),E=l(9862);let S=(()=>{class n{constructor(t){this.http=t,this.baseUrl=x.P.REPRESENTANTES}getRepresentantes(){return console.log("Fetching representantes list from backend"),this.http.get(this.baseUrl)}getRepresentanteById(t){return console.log(`Fetching representante with id ${t} from backend`),this.http.get(`${this.baseUrl}/${t}`)}createRepresentante(t){return console.log("Creating representante:",t),this.http.post(this.baseUrl,t)}updateRepresentante(t,r){return console.log(`Updating representante with id ${t}:`,r),this.http.put(`${this.baseUrl}/${t}`,r)}deleteRepresentante(t){return console.log(`Deleting representante with id ${t}`),this.http.delete(`${this.baseUrl}/${t}`)}static#e=this.\u0275fac=function(r){return new(r||n)(e.LFG(E.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F=l(3680);function j(n,d){1&n&&(e.TgZ(0,"div",26),e._UZ(1,"mat-progress-bar",27),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function z(n,d){1&n&&e.GkF(0)}const $=n=>({$implicit:n});function H(n,d){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,z,1,0,"ng-container",42),e.qZA()),2&n){const t=e.oxw().$implicit;e.oxw(2);const r=e.MAs(39);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,$,t))}}function X(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",36)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",31),e._uU(5),e.qZA(),e.TgZ(6,"div",31),e._uU(7),e.qZA(),e.TgZ(8,"div",31),e._uU(9),e.qZA(),e.TgZ(10,"div",31),e._uU(11),e.qZA(),e.TgZ(12,"div",31),e._uU(13),e.qZA(),e.TgZ(14,"div",31),e._uU(15),e.qZA(),e.TgZ(16,"div",31),e._uU(17),e.qZA(),e.TgZ(18,"div",31),e._uU(19),e.qZA(),e.TgZ(20,"div",37)(21,"button",38),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.toggleDetails(s.id))}),e._UZ(22,"mat-icon",39),e.qZA()()(),e.YNc(23,H,2,4,"div",40),e.BQk()}if(2&n){const t=d.$implicit,r=e.oxw(2);e.xp6(2),e.Q6J("matTooltip",t.nombre),e.xp6(1),e.hij(" ",t.nombre||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",t.codigo),e.xp6(1),e.hij(" ",t.codigo||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",t.estado),e.xp6(1),e.hij(" ",t.estado||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",r.getRepresentantesNames(t)),e.xp6(1),e.hij(" ",r.getRepresentantesNames(t)," "),e.xp6(1),e.Q6J("matTooltip",t.telefonos),e.xp6(1),e.hij(" ",t.telefonos||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",t.prefijo_provincia),e.xp6(1),e.hij(" ",t.prefijo_provincia||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",t.provincia),e.xp6(1),e.hij(" ",t.provincia||"N/A"," "),e.xp6(1),e.Q6J("matTooltip",r.getMunicipioName(t.municipio)),e.xp6(1),e.hij(" ",r.getMunicipioName(t.municipio)," "),e.xp6(1),e.Q6J("matTooltip",r.getMinisterioName(t.ministerio)),e.xp6(1),e.hij(" ",r.getMinisterioName(t.ministerio)," "),e.xp6(3),e.Q6J("svgIcon",(null==r.selectedRow?null:r.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(1),e.Q6J("ngIf",(null==r.selectedRow?null:r.selectedRow.id)===t.id)}}function ee(n,d){if(1&n&&(e.TgZ(0,"p",55)(1,"span",56),e._uU(2,"Representante:"),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.representante," ")}}function te(n,d){1&n&&e.GkF(0)}function oe(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",57),e.YNc(2,te,1,0,"ng-container",42),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(2);const r=e.MAs(39);e.xp6(2),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,$,t))}}function re(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",44)(3,"div",45)(4,"div",7)(5,"h3",46),e._uU(6),e.qZA(),e.TgZ(7,"p",47),e._uU(8),e.qZA(),e.YNc(9,ee,4,1,"p",48),e.qZA(),e.TgZ(10,"button",49),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.toggleDetails(s.id))}),e._UZ(11,"mat-icon",15),e.qZA()()(),e.TgZ(12,"div",50)(13,"div",51)(14,"div")(15,"label",52),e._uU(16,"Tel\xe9fonos"),e.qZA(),e.TgZ(17,"p",53),e._uU(18),e.qZA()(),e.TgZ(19,"div")(20,"label",52),e._uU(21,"Municipio"),e.qZA(),e.TgZ(22,"p",53),e._uU(23),e.qZA()(),e.TgZ(24,"div")(25,"label",52),e._uU(26,"Ministerio"),e.qZA(),e.TgZ(27,"p",53),e._uU(28),e.qZA()()()(),e.YNc(29,oe,3,4,"ng-container",54),e.qZA(),e.BQk()}if(2&n){const t=d.$implicit,r=e.oxw(2);e.xp6(6),e.hij(" ",t.nombre||"N/A"," "),e.xp6(2),e.hij(" ",t.codigo||"N/A"," "),e.xp6(1),e.Q6J("ngIf",t.representante),e.xp6(2),e.Q6J("svgIcon",(null==r.selectedRow?null:r.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(7),e.Oqu(t.telefonos||"N/A"),e.xp6(5),e.Oqu(r.getMunicipioName(t.municipio)),e.xp6(5),e.Oqu(r.getMinisterioName(t.ministerio)),e.xp6(1),e.Q6J("ngIf",(null==r.selectedRow?null:r.selectedRow.id)===t.id)}}const ne=n=>({"pointer-events-none":n}),ie=()=>[5,10,25,100];function ae(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",31)(5,"span"),e._uU(6,"Nombre"),e.qZA()(),e.TgZ(7,"div",31)(8,"span"),e._uU(9,"C\xf3digo"),e.qZA()(),e.TgZ(10,"div",31)(11,"span"),e._uU(12,"Estado"),e.qZA()(),e.TgZ(13,"div",31)(14,"span"),e._uU(15,"Representantes"),e.qZA()(),e.TgZ(16,"div",31)(17,"span"),e._uU(18,"Tel\xe9fonos"),e.qZA()(),e.TgZ(19,"div",31)(20,"span"),e._uU(21,"Prefijo Provincia"),e.qZA()(),e.TgZ(22,"div",31)(23,"span"),e._uU(24,"Provincia"),e.qZA()(),e.TgZ(25,"div",31)(26,"span"),e._uU(27,"Municipio"),e.qZA()(),e.TgZ(28,"div",31)(29,"span"),e._uU(30,"Ministerio"),e.qZA()(),e.TgZ(31,"div",32)(32,"span"),e._uU(33,"Detalles"),e.qZA()()(),e.YNc(34,X,24,20,"ng-container",33),e.qZA()(),e.TgZ(35,"div",34),e.YNc(36,re,30,8,"ng-container",33),e.qZA(),e._UZ(37,"mat-paginator",35),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("matTooltip","Nombre completo"),e.xp6(3),e.Q6J("matTooltip","C\xf3digo completo"),e.xp6(3),e.Q6J("matTooltip","Estado completo"),e.xp6(3),e.Q6J("matTooltip","Representantes completos"),e.xp6(3),e.Q6J("matTooltip","Tel\xe9fonos completos"),e.xp6(3),e.Q6J("matTooltip","Prefijo Provincia completo"),e.xp6(3),e.Q6J("matTooltip","Provincia completa"),e.xp6(3),e.Q6J("matTooltip","Municipio completo"),e.xp6(3),e.Q6J("matTooltip","Ministerio completo"),e.xp6(6),e.Q6J("ngForOf",t.dataSource.data)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngForOf",t.dataSource.data)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("ngClass",e.VKq(19,ne,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(21,ie))("showFirstLastButtons",!0)}}function se(n,d){if(1&n&&(e.TgZ(0,"mat-option",76),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_municipio," ")}}function le(n,d){if(1&n&&(e.TgZ(0,"mat-option",76),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_ministerio," ")}}function ce(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"form",60)(3,"div",61)(4,"div",62)(5,"div",63)(6,"mat-form-field",64)(7,"mat-label"),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",65),e.qZA(),e.TgZ(10,"mat-form-field",64)(11,"mat-label"),e._uU(12,"C\xf3digo"),e.qZA(),e._UZ(13,"input",66),e.qZA(),e.TgZ(14,"mat-form-field",64)(15,"mat-label"),e._uU(16,"Tel\xe9fonos"),e.qZA(),e._UZ(17,"input",67),e.qZA(),e.TgZ(18,"mat-form-field",64)(19,"mat-label"),e._uU(20,"Representante"),e.qZA(),e._UZ(21,"input",68),e.qZA()(),e.TgZ(22,"div",63)(23,"mat-form-field",64)(24,"mat-label"),e._uU(25,"Municipio"),e.qZA(),e.TgZ(26,"mat-select",69),e.YNc(27,se,2,2,"mat-option",70),e.qZA()()(),e.TgZ(28,"div",63)(29,"mat-form-field",64)(30,"mat-label"),e._uU(31,"Ministerio"),e.qZA(),e.TgZ(32,"mat-select",71),e.YNc(33,le,2,2,"mat-option",70),e.qZA()()()()(),e.TgZ(34,"div",72),e._UZ(35,"div",73),e.TgZ(36,"div",74)(37,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateSelectedRecord())}),e._uU(38," Actualizar "),e.qZA(),e.TgZ(39,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteSelectedRecord())}),e._uU(40," Eliminar "),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedRowForm),e.xp6(25),e.Q6J("ngForOf",t.mockMunicipio),e.xp6(6),e.Q6J("ngForOf",t.mockMinisterio),e.xp6(4),e.Q6J("color","primary"),e.xp6(2),e.Q6J("color","warn")}}function de(n,d){1&n&&(e.TgZ(0,"div",77),e._uU(1,"\xa1No hay proveedores!"),e.qZA())}let me=(()=>{class n{getRepresentantesNames(t){return t.representantes&&Array.isArray(t.representantes)?t.representantes.map(r=>`${r.nombre} ${r.apellido}`).join(", "):"Sin representantes"}constructor(t,r,i,s,a){this.dialog=t,this.proveedorService=r,this.CatalogService=i,this.representanteService=s,this.cdr=a,this.data=[],this.ministerios=[],this.municipios=[],this.mockMinisterio=[],this.mockMunicipio=[],this.columns=[{key:"nombre",label:"Nombre",editable:!0},{key:"codigo",label:"C\xf3digo",editable:!0},{key:"estado",label:"Estado",editable:!1},{key:"representantes",label:"Representantes",editable:!1},{key:"telefonos",label:"Tel\xe9fonos",editable:!0},{key:"prefijo_provincia",label:"Prefijo Provincia",editable:!1},{key:"provincia",label:"Provincia",editable:!1},{key:"municipio",label:"Municipio",nestedKey:"nombre_municipio",editable:!1,selectOptions:[]},{key:"ministerio",label:"Ministerio",nestedKey:"nombre_ministerio",editable:!1,selectOptions:[]},{key:"createdAt",label:"Creado",editable:!1},{key:"updatedAt",label:"Actualizado",editable:!1}],this.title="Proveedores",this.addButtonText="Agregar Proveedor",this.displayedColumns=[],this.searchInputControl=new c.NI(""),this.selectedRow=null,this.isLoading=!1,this.pagination={length:0,page:0,size:10},this._unsubscribeAll=new O.x,this.proveedoresConRepresentantes=[],this.dataSource=new b.by([]),this.selectedRowForm=new c.cw({})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.cdr.detectChanges()}ngOnInit(){this.displayedColumns=this.columns.map(t=>t.key).concat("details"),(0,L.D)({ministerios:this.CatalogService.getMinisterios(),municipios:this.CatalogService.getMunicipios()}).subscribe({next:t=>{this.ministerios=t.ministerios?.data||[],this.columns.find(i=>"ministerio"===i.key).selectOptions=this.ministerios,this.mockMinisterio=this.ministerios;let r=[];if(t.municipios?.data){let i=1;for(const[s,a]of Object.entries(t.municipios.data))Array.isArray(a)&&a.forEach(_=>{r.push({id:i++,provincia_id:Number(s),nombre_municipio:_})})}this.municipios=r,this.columns.find(i=>"municipio"===i.key).selectOptions=this.municipios,this.mockMunicipio=this.municipios,this.loadProveedores(),this.cdr.markForCheck()},error:t=>{console.error("Error loading catalogs:",t),this.loadProveedores()}}),this.proveedorService.getDashboardproveedor(),this.searchInputControl.valueChanges.pipe((0,I.b)(300),(0,U.x)(),(0,Q.R)(this._unsubscribeAll)).subscribe(t=>{this.closeDetails(),this.dataSource.filter=t?.trim().toLowerCase()||"",this.cdr.detectChanges(),this.dataSource._updateChangeSubscription()}),this.dataSource.filterPredicate=(t,r)=>[t.nombre||"",t.codigo||"",t.representante||"",t.telefonos||"",t.domicilio||"",this.getMunicipioName(t.municipio),this.getMinisterioName(t.ministerio)].join(" ").toLowerCase().includes(r)}getMunicipioName(t){return t?"string"==typeof t?t:t.nombre_municipio||"N/A":"N/A"}getMinisterioName(t){if(!t)return"N/A";if("string"==typeof t){const r=this.ministerios.find(i=>i.sigla===t||i.nombre===t);return r?r.nombre:t}return t.nombre||"N/A"}closeDetails(){this.selectedRow=null,this.cdr.detectChanges()}loadProveedores(){this.isLoading=!0,this.proveedorService.getProveedores().subscribe({next:t=>{console.log("Proveedores received from service:",t),this.data=t,this.dataSource.data=this.data,this.pagination.length=this.data.length,this.sort&&(this.dataSource.sort=this.sort),this.paginator&&(this.dataSource.paginator=this.paginator),this.dataSource._updateChangeSubscription(),this.isLoading=!1,this.cdr.markForCheck()},error:t=>{console.error("Error loading proveedores:",t),this.isLoading=!1,this.cdr.markForCheck()}})}trackByFn(t,r){return r.id}getNestedValue(t,r,i){return i&&t[r]?t[r][i]:t[r]||""}toggleDetails(t){this.selectedRow=this.selectedRow?.id===t?null:this.data.find(r=>r.id===t),this.selectedRowForm=new c.cw({nombre:new c.NI(this.selectedRow?.nombre),codigo:new c.NI(this.selectedRow?.codigo),telefonos:new c.NI(this.selectedRow?.telefonos),domicilio:new c.NI(this.selectedRow?.domicilio),municipio:new c.NI(this.selectedRow?.municipio),ministerio:new c.NI(this.selectedRow?.ministerio),representante:new c.NI(this.selectedRow?.representante)}),this.cdr.markForCheck()}createRecord(){this.addNewProveedor()}addNewProveedor(){const t=window.innerWidth<=768;this.dialog.open(B.d,{width:t?"90vw":"750px",maxWidth:t?"100vw":"90vw",height:t?"100vh":"90vh",maxHeight:"100vh",panelClass:"full-screen-dialog",disableClose:!1,autoFocus:!1,hasBackdrop:!t,position:t?{top:"0"}:{}}).afterClosed().subscribe(i=>{i&&this.proveedorService.createProveedor(i).subscribe({next:s=>{this.loadProveedores()},error:s=>{console.error("Error creating proveedor:",s)}})})}updateSelectedRecord(){if(this.selectedRow){const t={...this.selectedRow,...this.selectedRowForm.value};this.proveedorService.updateProveedor(this.selectedRow.id,t).subscribe({next:()=>{this.loadProveedores(),this.selectedRow=null},error:r=>{console.error("Error updating proveedor:",r)}})}}deleteSelectedRecord(){this.selectedRow&&this.proveedorService.deleteProveedor(this.selectedRow.id).subscribe({next:()=>{this.loadProveedores(),this.selectedRow=null},error:t=>{console.error("Error deleting proveedor:",t)}})}exportToCSV(){if(!this.dataSource.filteredData||0===this.dataSource.filteredData.length)return;const t=[];t.push(["Nombre","C\xf3digo","Estado","Representantes","Tel\xe9fonos","Prefijo Provincia","Provincia","Municipio","Ministerio","Creado","Actualizado"].join(",")),this.dataSource.filteredData.forEach(u=>{const Y=[u.nombre||"",u.codigo||"",u.estado||"",this.getRepresentantesNames(u),u.telefonos||"",u.prefijo_provincia||"",u.provincia||"",u.municipio||"",u.ministerio||"",u.createdAt||"",u.updatedAt||""].map(k=>"string"==typeof k&&(k.includes(",")||k.includes('"'))?`"${k.replace(/"/g,'""')}"`:k);t.push(Y.join(","))});const i=t.join("\n"),s=new Blob([i],{type:"text/csv;charset=utf-8;"}),a=window.URL.createObjectURL(s),_=document.createElement("a");_.href=a,_.download="proveedores_export.csv",_.click(),window.URL.revokeObjectURL(a)}exportToPDF(){try{if(!this.dataSource.filteredData||0===this.dataSource.filteredData.length)return console.warn("No hay datos para exportar"),void alert("No hay datos para exportar");console.log("Iniciando exportaci\xf3n PDF...");const t=new h.ZP({orientation:"landscape",unit:"mm",format:"a4"});t.setFontSize(16),t.setTextColor(40,40,40),t.text("Reporte de Proveedores",14,20),t.setFontSize(10),t.setTextColor(100,100,100),t.text(`Fecha de generaci\xf3n: ${(new Date).toLocaleDateString("es-ES")}`,14,30),t.text(`Total de proveedores: ${this.dataSource.filteredData.length}`,14,35);const r=["Nombre","C\xf3digo","Tel\xe9fonos","Domicilio","Municipio","Ministerio"],i=this.dataSource.filteredData.map(a=>[this.truncateText(a.nombre||"",25),a.codigo||"",this.truncateText(a.telefonos||"",20),this.truncateText(a.domicilio||"",30),this.truncateText("string"==typeof a.municipio?a.municipio:a.municipio?.nombre_municipio||"",20),this.truncateText("string"==typeof a.ministerio?a.ministerio:a.ministerio?.nombre_ministerio||"",25)]);console.log("Datos preparados para la tabla:",i.length,"filas"),(0,p.ZP)(t,{head:[r],body:i,startY:45,theme:"striped",styles:{fontSize:8,cellPadding:3,overflow:"linebreak",halign:"left"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255],fontStyle:"bold",fontSize:9},columnStyles:{0:{cellWidth:50},1:{cellWidth:25},2:{cellWidth:35},3:{cellWidth:60},4:{cellWidth:35},5:{cellWidth:50}},alternateRowStyles:{fillColor:[245,245,245]},margin:{top:45,left:14,right:14,bottom:20},didDrawPage:a=>{const _=t.getNumberOfPages(),u=t.internal.pageSize,M=u.height||u.getHeight();t.setFontSize(8),t.setTextColor(100,100,100),t.text(`P\xe1gina ${a.pageNumber} de ${_}`,14,M-10);const Y="Sistema de Gesti\xf3n de Proveedores",k=t.getTextWidth(Y),De=u.width||u.getWidth();t.text(Y,De-14-k,M-10)}}),console.log("Tabla generada, guardando PDF...");const s=`proveedores_export_${(new Date).toISOString().split("T")[0]}.pdf`;t.save(s),console.log("PDF guardado exitosamente")}catch(t){console.error("Error al exportar PDF:",t),alert("Error al generar el PDF. Por favor, intente nuevamente.")}}truncateText(t,r){return t?t.length<=r?t:t.substring(0,r-3)+"...":""}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(A.uw),e.Y36(C.z),e.Y36(g.a),e.Y36(S),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-proveedor-list"]],viewQuery:function(r,i){if(1&r&&(e.Gf(m.YE,5),e.Gf(v.NW,5)),2&r){let s;e.iGM(s=e.CRH())&&(i.sort=s.first),e.iGM(s=e.CRH())&&(i.paginator=s.first)}},standalone:!0,features:[e.jDz],decls:42,vars:14,consts:[[1,"flex","flex-col","min-h-screen","p-6","w-full"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden","mb-6","w-full"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","flex-col","sm:flex-row","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","mt-4","sm:mt-0","w-50","text-lg",3,"color","click"],[3,"svgIcon"],[1,"ml-2","hidden","sm:inline"],[1,"ml-2","sm:hidden"],["mat-icon-button","","matTooltip","Exportar tabla","aria-label","Exportar tabla",1,"ml-4","mt-4","sm:mt-0",3,"matMenuTriggerFor","color"],["exportMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden"],[4,"ngIf","ngIfElse"],["rowDetailsTemplate",""],["noProveedores",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"hidden","lg:block","w-full","overflow-x-auto"],[1,"w-full","min-w-max"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],["matTooltipPosition","above",1,"truncate",3,"matTooltip"],[1,"sticky","right-0","bg-gray-50","dark:bg-black","dark:bg-opacity-5","z-20","flex","items-center","justify-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"lg:hidden"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"sticky","right-0","bg-gray-50","dark:bg-black","dark:bg-opacity-90","z-30","flex","items-center","justify-center"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],["class","grid",4,"ngIf"],[1,"grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","mb-4","mx-4","shadow-sm"],[1,"p-4","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-500","dark:text-gray-400"],["class","text-sm text-gray-700 dark:text-gray-300 mt-1",4,"ngIf"],["mat-icon-button","",1,"ml-4","flex-shrink-0",3,"click"],[1,"p-4","space-y-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"text-xs","font-medium","text-gray-500","dark:text-gray-400","uppercase","tracking-wide"],[1,"mt-1","text-sm","text-gray-900","dark:text-white"],[4,"ngIf"],[1,"text-sm","text-gray-700","dark:text-gray-300","mt-1"],[1,"font-medium"],[1,"border-t","border-gray-200","dark:border-gray-700"],[1,"shadow-lg","overflow-hidden","bg-white","dark:bg-gray-800"],[1,"flex","border-b"],[1,"responsive-form","flex","flex-col","w-full","max-w-full","mx-auto","box-border",2,"width","100%","max-width","500px","padding","0 16px","box-sizing","border-box",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-1/3","sm:pl-8"],[1,"w-full"],["matInput","","formControlName","nombre"],["matInput","","formControlName","codigo"],["matInput","","formControlName","telefonos"],["matInput","","formControlName","representante"],["formControlName","municipio"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ministerio"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","border-t","px-4","sm:px-8","py-4"],[1,"hidden","lg:block","flex-1"],[1,"flex","flex-col","sm:flex-row","items-center","gap-3","w-full","sm:w-auto","lg:w-auto"],["mat-stroked-button","",1,"w-full","sm:w-auto","lg:w-auto","px-6",3,"color","click"],[3,"value"],[1,"p-8","sm:p-16","border-b","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(r,i){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5),e.YNc(6,j,2,1,"div",6),e.TgZ(7,"div",7)(8,"div",8)(9,"h2",9),e._uU(10," Proveedores "),e.qZA()()(),e.TgZ(11,"div",10)(12,"mat-form-field",11),e._UZ(13,"mat-icon",12)(14,"input",13),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){return i.addNewProveedor()}),e._UZ(16,"mat-icon",15),e.TgZ(17,"span",16),e._uU(18,"Agregar Proveedor"),e.qZA(),e.TgZ(19,"span",17),e._uU(20,"Agregar"),e.qZA()(),e.TgZ(21,"button",18),e._UZ(22,"mat-icon",15),e.qZA(),e.TgZ(23,"mat-menu",null,19)(25,"button",20),e.NdJ("click",function(){return i.exportToCSV()}),e.TgZ(26,"mat-icon"),e._uU(27,"description"),e.qZA(),e.TgZ(28,"span"),e._uU(29,"Exportar a CSV"),e.qZA()(),e.TgZ(30,"button",20),e.NdJ("click",function(){return i.exportToPDF()}),e.TgZ(31,"mat-icon"),e._uU(32,"picture_as_pdf"),e.qZA(),e.TgZ(33,"span"),e._uU(34,"Exportar a PDF"),e.qZA()()()()(),e.TgZ(35,"div",21)(36,"div",22),e.YNc(37,ae,38,22,"ng-container",23)(38,ce,41,5,"ng-template",null,24,e.W1O)(40,de,2,0,"ng-template",null,25,e.W1O),e.qZA()()()()()),2&r){const s=e.MAs(24),a=e.MAs(41);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:check-circle"),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(6),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar proveedores"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("matMenuTriggerFor",s)("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(15),e.Q6J("ngIf",(null==i.dataSource||null==i.dataSource.data?null:i.dataSource.data.length)>0)("ngIfElse",a)}},dependencies:[o.ez,o.mk,o.sg,o.O5,o.tP,Z.ot,Z.lW,Z.RK,q.Cv,q.pW,m.JX,m.YE,b.p0,P.Ps,P.Hw,c.UX,c._Y,c.Fj,c.JJ,c.JL,c.oH,c.sg,c.u,v.TU,v.NW,f.lN,f.KE,f.hX,f.qo,y.c,y.Nt,w.LD,w.gD,F.ey,T.Tx,T.VK,T.OP,T.p6,N.AV,N.gM,D.t,A.Is],styles:[".inventory-grid{display:grid;grid-template-columns:1fr 120px 120px 150px 180px 180px 180px 180px 180px 180px 180px 180px 80px;gap:1rem;width:100%;box-sizing:border-box}.inventory-grid.z-3{position:sticky;top:0;background:white;z-index:20;box-shadow:0 2px 5px -2px #0000001a;overflow:visible}.dark .inventory-grid.z-3{background:#1E293B}.inventory-grid>div:last-child{position:sticky;right:0;background:white;z-index:10;box-shadow:-2px 0 5px -2px #0000001a}.dark .inventory-grid>div:last-child{background:#1E293B}.sticky-end{position:sticky;right:0;background:white;z-index:11;box-shadow:-2px 0 5px -2px #0000001a}.dark .sticky-end{background:#1E293B}.dark .inventory-grid>div{color:#e0e0e0}.dark .sticky-end .mat-stroked-button{background:#1E293B!important;color:#fff!important;border-color:#1e293b!important}.dark .sticky-end .mat-stroked-button .mat-icon{color:#fff!important}.inventory-grid>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host{display:block;width:100%;overflow-x:auto}@media (max-width: 768px){.inventory-grid{grid-template-columns:25px 70px 110px 90px 90px 80px 80px 80px 80px 80px 35px}}\n"],encapsulation:2,changeDetection:0})}return n})();var G=l(2939),K=l(5986);function pe(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"El nombre es obligatorio"),e.qZA())}function ue(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Los apellidos son obligatorios"),e.qZA())}function ge(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"El email es obligatorio"),e.qZA())}function _e(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Email inv\xe1lido"),e.qZA())}function fe(n,d){if(1&n&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre_entidad," ")}}function he(n,d){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"La entidad es obligatoria"),e.qZA())}let xe=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.representanteService=r,this.dialogRef=i,this.data=s,this.entidades=[]}ngOnInit(){this.form=this.fb.group({nombre:["",c.kI.required],apellidos:["",c.kI.required],telefono:[""],email:["",[c.kI.required,c.kI.email]],cargo:[""],entidad:[null,c.kI.required]}),this.loadEntidades(),this.data&&this.form.patchValue(this.data)}loadEntidades(){this.entidades=[]}save(){if(this.form.valid){const t=this.form.value;this.data&&this.data.id?this.representanteService.updateRepresentante(this.data.id,t).subscribe({next:()=>{this.dialogRef.close("saved")},error:r=>{console.error("Error updating representante",r)}}):this.representanteService.createRepresentante(t).subscribe({next:()=>{this.dialogRef.close("saved")},error:r=>{console.error("Error creating representante",r)}})}}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(c.qu),e.Y36(S),e.Y36(A.so),e.Y36(A.WI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-representante-form"]],standalone:!0,features:[e.jDz],decls:36,vars:8,consts:[[3,"formGroup","ngSubmit"],["appearance","fill",1,"w-full"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","apellidos","required",""],["matInput","","formControlName","telefono"],["matInput","","formControlName","email","required",""],["matInput","","formControlName","cargo"],["formControlName","entidad","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end","space-x-4","mt-4"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(r,i){if(1&r&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.save()}),e.TgZ(1,"mat-form-field",1)(2,"mat-label"),e._uU(3,"Nombre"),e.qZA(),e._UZ(4,"input",2),e.YNc(5,pe,2,0,"mat-error",3),e.qZA(),e.TgZ(6,"mat-form-field",1)(7,"mat-label"),e._uU(8,"Apellidos"),e.qZA(),e._UZ(9,"input",4),e.YNc(10,ue,2,0,"mat-error",3),e.qZA(),e.TgZ(11,"mat-form-field",1)(12,"mat-label"),e._uU(13,"Tel\xe9fono"),e.qZA(),e._UZ(14,"input",5),e.qZA(),e.TgZ(15,"mat-form-field",1)(16,"mat-label"),e._uU(17,"Email"),e.qZA(),e._UZ(18,"input",6),e.YNc(19,ge,2,0,"mat-error",3)(20,_e,2,0,"mat-error",3),e.qZA(),e.TgZ(21,"mat-form-field",1)(22,"mat-label"),e._uU(23,"Cargo"),e.qZA(),e._UZ(24,"input",7),e.qZA(),e.TgZ(25,"mat-form-field",1)(26,"mat-label"),e._uU(27,"Entidad"),e.qZA(),e.TgZ(28,"mat-select",8),e.YNc(29,fe,2,2,"mat-option",9),e.qZA(),e.YNc(30,he,2,0,"mat-error",3),e.qZA(),e.TgZ(31,"div",10)(32,"button",11),e.NdJ("click",function(){return i.cancel()}),e._uU(33,"Cancelar"),e.qZA(),e.TgZ(34,"button",12),e._uU(35,"Guardar"),e.qZA()()()),2&r){let s,a,_,u,M;e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngIf",null==(s=i.form.get("nombre"))?null:s.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(a=i.form.get("apellidos"))?null:a.hasError("required")),e.xp6(9),e.Q6J("ngIf",null==(_=i.form.get("email"))?null:_.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(u=i.form.get("email"))?null:u.hasError("email")),e.xp6(9),e.Q6J("ngForOf",i.entidades),e.xp6(1),e.Q6J("ngIf",null==(M=i.form.get("entidad"))?null:M.hasError("required")),e.xp6(4),e.Q6J("disabled",i.form.invalid)}},dependencies:[o.ez,o.sg,o.O5,c.UX,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,f.lN,f.KE,f.hX,f.TO,y.c,y.Nt,Z.ot,Z.lW,w.LD,w.gD,F.ey]})}return n})();var ve=l(5170),be=l(6819);const Ze=["sort"],Te=["paginator"];function Ce(n,d){1&n&&(e.TgZ(0,"div",33),e._UZ(1,"mat-progress-bar",34),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function ye(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",35)(1,"mat-checkbox",36),e.NdJ("change",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.toggleColumn(s.key))}),e._uU(2),e.qZA()()}if(2&n){const t=d.$implicit;e.xp6(1),e.Q6J("checked",t.visible)("color","primary"),e.xp6(1),e.hij(" ",t.label," ")}}function we(n,d){if(1&n&&(e.TgZ(0,"div",46)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=d.$implicit;e.Q6J("matTooltip",t.tooltip),e.xp6(2),e.Oqu(t.label)}}function Ae(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"span",55),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,r=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngClass","activo"===i.getColumnValue(r,t.key)?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),e.xp6(1),e.hij(" ",i.getColumnValue(r,t.key)||"N/A"," ")}}function ke(n,d){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit,r=e.oxw().$implicit,i=e.oxw(2);e.hij(" ",i.getColumnValue(r,t.key)||"N/A"," ")}}function Re(n,d){if(1&n&&(e.TgZ(0,"div",53),e.YNc(1,Ae,3,2,"ng-container",30)(2,ke,1,1,"ng-template",null,54,e.W1O),e.qZA()),2&n){const t=d.$implicit,r=e.MAs(3),i=e.oxw().$implicit,s=e.oxw(2);e.Q6J("matTooltip",s.getColumnValue(i,t.key)),e.xp6(1),e.Q6J("ngIf","estado"===t.key)("ngIfElse",r)}}function Ue(n,d){1&n&&e.GkF(0)}const W=n=>({$implicit:n});function qe(n,d){if(1&n&&(e.TgZ(0,"div",56)(1,"div",57),e.YNc(2,Ue,1,0,"ng-container",58),e.qZA()()),2&n){const t=e.oxw().$implicit;e.oxw(2);const r=e.MAs(51);e.xp6(2),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,W,t))}}function Pe(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",47),e.YNc(2,Re,4,3,"div",48),e.TgZ(3,"div",49)(4,"button",50),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.toggleDetails(s.id))}),e._UZ(5,"mat-icon",51),e.qZA(),e.TgZ(6,"button",50),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.deleteRepresentante(s.id))}),e._UZ(7,"mat-icon",51),e.qZA()()(),e.YNc(8,qe,3,4,"div",52),e.BQk()}if(2&n){const t=d.$implicit,r=e.oxw(2);e.xp6(1),e.Udp("grid-template-columns",r.getGridColumns()),e.xp6(1),e.Q6J("ngForOf",r.getVisibleColumns()),e.xp6(2),e.Q6J("color","primary")("matTooltip","Ver detalles"),e.xp6(1),e.Q6J("svgIcon",(null==r.selectedRow?null:r.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(1),e.Q6J("color","warn")("matTooltip","Eliminar"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(1),e.Q6J("ngIf",(null==r.selectedRow?null:r.selectedRow.id)===t.id)}}function Ne(n,d){1&n&&e.GkF(0)}function Ee(n,d){if(1&n&&(e.TgZ(0,"div",67),e.YNc(1,Ne,1,0,"ng-container",58),e.qZA()),2&n){const t=e.oxw().$implicit;e.oxw(2);const r=e.MAs(51);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,W,t))}}function Se(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",59)(2,"div",60)(3,"h3",61),e._uU(4),e.qZA(),e.TgZ(5,"span",55),e._uU(6),e.qZA()(),e.TgZ(7,"div",62)(8,"div")(9,"span",63),e._uU(10,"Cargo:"),e.qZA(),e._uU(11),e.qZA(),e.TgZ(12,"div")(13,"span",63),e._uU(14,"Tel\xe9fono:"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"div")(17,"span",63),e._uU(18,"Email:"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"div")(21,"span",63),e._uU(22,"Proveedor:"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"div")(25,"span",63),e._uU(26,"Ministerio:"),e.qZA(),e._uU(27),e.qZA()(),e.TgZ(28,"div",64)(29,"button",65),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.toggleDetails(s.id))}),e._UZ(30,"mat-icon",15),e._uU(31," Detalles "),e.qZA(),e.TgZ(32,"button",65),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.deleteRepresentante(s.id))}),e._UZ(33,"mat-icon",15),e._uU(34," Eliminar "),e.qZA()(),e.YNc(35,Ee,2,4,"div",66),e.qZA(),e.BQk()}if(2&n){const t=d.$implicit,r=e.oxw(2);e.xp6(4),e.AsE(" ",t.nombre," ",t.apellido," "),e.xp6(1),e.Q6J("ngClass","activo"===t.estado?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),e.xp6(1),e.hij(" ",t.estado||"--"," "),e.xp6(5),e.hij(" ",t.cargo||"--",""),e.xp6(4),e.hij(" ",t.telefono||"--",""),e.xp6(4),e.hij(" ",t.email||"--",""),e.xp6(4),e.hij(" ",(null==t.Proveedor?null:t.Proveedor.nombre)||"--",""),e.xp6(4),e.hij(" ",(null==t.Proveedor?null:t.Proveedor.ministerio)||"--",""),e.xp6(2),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon",(null==r.selectedRow?null:r.selectedRow.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("color","warn"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(2),e.Q6J("ngIf",(null==r.selectedRow?null:r.selectedRow.id)===t.id)}}const Fe=n=>({"pointer-events-none":n}),Me=()=>[5,10,25,100];function Ie(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",37)(2,"div",38)(3,"div",39)(4,"div",40),e.YNc(5,we,3,2,"div",41),e.TgZ(6,"div",42)(7,"span"),e._uU(8,"Acciones"),e.qZA()()(),e.YNc(9,Pe,9,10,"ng-container",43),e.qZA()()(),e.TgZ(10,"div",44),e.YNc(11,Se,36,14,"ng-container",43),e.qZA(),e._UZ(12,"mat-paginator",45),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Udp("grid-template-columns",t.getGridColumns()),e.xp6(1),e.Q6J("ngForOf",t.getVisibleColumns()),e.xp6(4),e.Q6J("ngForOf",t.dataSource.data)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngForOf",t.dataSource.data)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("ngClass",e.VKq(13,Fe,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(15,Me))("showFirstLastButtons",!0)}}function Je(n,d){1&n&&(e.TgZ(0,"div",68),e._uU(1,"\xa1No hay representantes!"),e.qZA())}function Qe(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",69)(1,"form",70)(2,"div",71)(3,"mat-form-field",72)(4,"mat-label"),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",73),e.qZA(),e.TgZ(7,"mat-form-field",72)(8,"mat-label"),e._uU(9,"Apellido"),e.qZA(),e._UZ(10,"input",74),e.qZA(),e.TgZ(11,"mat-form-field",72)(12,"mat-label"),e._uU(13,"Cargo"),e.qZA(),e._UZ(14,"input",75),e.qZA(),e.TgZ(15,"mat-form-field",72)(16,"mat-label"),e._uU(17,"Tel\xe9fono"),e.qZA(),e._UZ(18,"input",76),e.qZA(),e.TgZ(19,"mat-form-field",72)(20,"mat-label"),e._uU(21,"Email"),e.qZA(),e._UZ(22,"input",77),e.qZA(),e.TgZ(23,"mat-form-field",72)(24,"mat-label"),e._uU(25,"Estado"),e.qZA(),e.TgZ(26,"mat-select",78)(27,"mat-option",79),e._uU(28,"Activo"),e.qZA(),e.TgZ(29,"mat-option",80),e._uU(30,"Inactivo"),e.qZA()()()(),e.TgZ(31,"div",81)(32,"button",82),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedRow=null)}),e._uU(33," Cancelar "),e.qZA(),e.TgZ(34,"button",83),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateSelectedRecord())}),e._uU(35," Guardar Cambios "),e.qZA(),e.TgZ(36,"button",84),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteSelectedRecord())}),e._uU(37," Eliminar "),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.selectedRowForm),e.xp6(33),e.Q6J("color","primary")("disabled",t.selectedRowForm.invalid),e.xp6(2),e.Q6J("color","warn")}}const Oe=[{path:"lista",component:me},{path:"representantes",component:(()=>{class n{constructor(t,r,i,s,a,_,u){this.representanteService=t,this.proveedorService=r,this.contratoService=i,this.suplementoService=s,this.dialog=a,this.snackBar=_,this.fb=u,this.dataSource=new b.by,this.suplementosDataSource=new b.by,this.columnSettings=[{key:"nombre",label:"Nombre",visible:!0,tooltip:"Nombre completo del representante"},{key:"apellido",label:"Apellido",visible:!0,tooltip:"Apellido completo del representante"},{key:"cargo",label:"Cargo",visible:!0,tooltip:"Cargo del representante"},{key:"telefono",label:"Tel\xe9fono",visible:!0,tooltip:"Tel\xe9fono del representante"},{key:"email",label:"Email",visible:!0,tooltip:"Email del representante"},{key:"estado",label:"Estado",visible:!0,tooltip:"Estado del representante"},{key:"proveedor_nombre",label:"Proveedor",visible:!0,tooltip:"Nombre del proveedor"},{key:"proveedor_codigo",label:"C\xf3digo Proveedor",visible:!1,tooltip:"C\xf3digo del proveedor"},{key:"tipo_empresa",label:"Tipo Empresa",visible:!1,tooltip:"Tipo de empresa"},{key:"ministerio",label:"Ministerio",visible:!0,tooltip:"Ministerio del proveedor"},{key:"provincia",label:"Provincia",visible:!1,tooltip:"Provincia del proveedor"},{key:"municipio",label:"Municipio",visible:!1,tooltip:"Municipio del proveedor"},{key:"numero_documento",label:"N\xfamero Documento",visible:!1,tooltip:"N\xfamero de documento"},{key:"tipo_documento",label:"Tipo Documento",visible:!1,tooltip:"Tipo de documento"}],this.displayedColumns=["proveedor_nombre","proveedor_codigo","representante","cargo","telefono","email","estado","tipo_empresa","ministerio","provincia","municipio","numero_documento","acciones"],this.displayedSuplementosColumns=["no_suplemento","fecha_firmado","valor_cup","valor_usd","estado","acciones"],this.selection=new Set,this.suplementoSelection=new Set,this.isLoading=!1,this.isSuplementosLoading=!1,this.contratos=[],this.suplementos=[],this.showSuplementos=!1,this.selectedContratoId=null,this.searchControl=new c.NI(""),this.pagination={length:0,page:0,size:10},this.selectedRow=null,this.dataSource=new b.by([]),this.suplementosDataSource=new b.by([]),this.selectedRowForm=this.fb.group({nombre:[""],apellido:[""],telefono:[""],email:[""],cargo:[""],estado:[""]})}loadRepresentantes(){this.isLoading=!0,this.representanteService.getRepresentantes().subscribe({next:t=>{console.log("Raw representantes response:",t);const r=Array.isArray(t)?t:t.data||[];this.proveedorService.getProveedores().subscribe({next:i=>{r.forEach(s=>{const a=i.find(_=>_.id===s.proveedor_id);s.Proveedor=a?{id:a.id,nombre:a.nombre||"",codigo:a.codigo||"",tipo_empresa:"",ministerio:"string"==typeof a.ministerio?a.ministerio:a.ministerio?.nombre_ministerio||"",provincia:a.provincia||"",municipio:"string"==typeof a.municipio?a.municipio:a.municipio?.nombre_municipio||"",telefonos:a.telefonos||"",prefijo_provincia:a.prefijo_provincia||"",estado:a.estado||"",representante_legal_id:a.representante_legal_id,createdAt:a.createdAt||"",updatedAt:a.updatedAt||""}:null}),console.log("Representantes con Proveedor completo:",r),this.dataSource.data=r,this.pagination.length=r.length,this.paginator&&(this.dataSource.paginator=this.paginator),this.sort&&(this.dataSource.sort=this.sort),this.selectedContratoId&&this.applyContratoFilter(),this.isLoading=!1},error:i=>{console.error("Error al cargar los proveedores",i),this.showMessage("Error al cargar los proveedores","error"),this.isLoading=!1}})},error:t=>{console.error("Error al cargar los representantes",t),this.showMessage("Error al cargar los representantes","error"),this.isLoading=!1}})}ngAfterViewInit(){this.dataSource.data.length>0&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort),this.dataSource.connect().subscribe(()=>{this.paginator&&this.sort&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}ngOnInit(){this.setupFilter(),this.loadRepresentantes(),this.loadSuplementos(),this.dataSource.filterPredicate=(t,r)=>[t.Proveedor?.nombre||"",t.Proveedor?.codigo||"",t.nombre||"",t.apellido||"",t.cargo||"",t.telefono||"",t.email||"",t.estado||"",t.Proveedor?.tipo_empresa||"",t.Proveedor?.ministerio||"",t.Proveedor?.provincia||"",t.Proveedor?.municipio||"",t.numero_documento||"",t.tipo_documento||""].join(" ").toLowerCase().includes(r)}setupFilter(){this.searchControl.valueChanges.pipe((0,I.b)(300),(0,U.x)()).subscribe(t=>{this.applyFilter(t)})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.selectedContratoId&&this.applyContratoFilter()}loadContratos(){this.contratoService.getContratos().subscribe({next:t=>{this.contratos=t},error:t=>{console.error("Error al cargar los contratos",t),this.showMessage("Error al cargar los contratos","error")}})}loadSuplementos(){this.isSuplementosLoading=!0,this.suplementoService.getSuplementos().subscribe({next:t=>{this.suplementos=t,this.suplementosDataSource.data=t,this.suplementosDataSource.paginator=this.paginator,this.suplementosDataSource.sort=this.sort,this.isSuplementosLoading=!1},error:t=>{console.error("Error al cargar los suplementos",t),this.showMessage("Error al cargar los suplementos","error"),this.isSuplementosLoading=!1}})}toggleSuplementos(){this.showSuplementos=!this.showSuplementos,this.showSuplementos&&0===this.suplementos.length&&this.loadSuplementos()}toggleDetails(t){if(this.selectedRow&&this.selectedRow.id===t)this.selectedRow=null;else{const r=this.dataSource.data.find(i=>i.id===t);this.selectedRow=r||null,this.selectedRow&&this.selectedRowForm.patchValue({nombre:this.selectedRow.nombre,apellido:this.selectedRow.apellido,telefono:this.selectedRow.telefono,email:this.selectedRow.email,cargo:this.selectedRow.cargo,estado:this.selectedRow.estado})}}updateSelectedRecord(){if(this.selectedRow&&this.selectedRowForm.valid){const t={...this.selectedRow,...this.selectedRowForm.value};this.representanteService.updateRepresentante(this.selectedRow.id,t).subscribe({next:()=>{this.showMessage("Representante actualizado correctamente"),this.loadRepresentantes(),this.selectedRow=null},error:r=>{console.error("Error al actualizar el representante",r),this.showMessage("Error al actualizar el representante","error")}})}}deleteSelectedRecord(){this.selectedRow&&(this.deleteRepresentante(this.selectedRow.id),this.selectedRow=null)}openAddDialog(){this.dialog.open(xe,{width:"600px",data:null}).afterClosed().subscribe(r=>{"saved"===r&&this.loadRepresentantes()})}showMessage(t,r="success"){this.snackBar.open(t,"Cerrar",{duration:5e3,panelClass:"success"===r?"success-snackbar":"error-snackbar",horizontalPosition:"right",verticalPosition:"top"})}deleteRepresentante(t){confirm("\xbfEst\xe1 seguro de eliminar este representante?")&&(this.isLoading=!0,this.representanteService.deleteRepresentante(t).subscribe({next:()=>{this.loadRepresentantes(),this.showMessage("Representante eliminado correctamente"),this.isLoading=!1},error:r=>{console.error("Error al eliminar el representante",r),this.showMessage("Error al eliminar el representante","error"),this.isLoading=!1}}))}deleteSelected(){if(confirm(`\xbfEst\xe1 seguro de eliminar los ${this.selection.size} representantes seleccionados?`)){this.isLoading=!0;const t=Array.from(this.selection).map(r=>this.representanteService.deleteRepresentante(r).toPromise());Promise.all(t).then(()=>{this.selection.clear(),this.loadRepresentantes(),this.showMessage(`${this.selection.size} representantes eliminados correctamente`),this.isLoading=!1}).catch(r=>{console.error("Error al eliminar los representantes",r),this.showMessage("Error al eliminar los representantes","error"),this.isLoading=!1})}}applyContratoFilter(){if(this.selectedContratoId){const t=[...this.dataSource.data];this.dataSource.data=t.filter(r=>r.contrato_id===this.selectedContratoId)}else this.loadRepresentantes()}onContratoChange(){this.applyContratoFilter()}trackByFn(t,r){return r.id||t}getVisibleColumns(){return this.columnSettings.filter(t=>t.visible)}getGridColumns(){return`${this.getVisibleColumns().map(()=>"minmax(120px, 1fr)").join(" ")} 200px`}getColumnValue(t,r){switch(r){case"nombre":return t.nombre||"";case"apellido":return t.apellido||"";case"cargo":return t.cargo||"";case"telefono":return t.telefono||"";case"email":return t.email||"";case"estado":return t.estado||"";case"proveedor_nombre":return t.Proveedor?.nombre||"";case"proveedor_codigo":return t.Proveedor?.codigo||"";case"tipo_empresa":return t.Proveedor?.tipo_empresa||"";case"ministerio":return t.Proveedor?.ministerio||"";case"provincia":return t.Proveedor?.provincia||"";case"municipio":return t.Proveedor?.municipio||"";case"numero_documento":return t.numero_documento||"";case"tipo_documento":return t.tipo_documento||"";default:return""}}toggleColumn(t){const r=this.columnSettings.find(i=>i.key===t);r&&(r.visible=!r.visible)}exportToCSV(){}exportToPDF(){}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(S),e.Y36(C.z),e.Y36(ve.d),e.Y36(be.y),e.Y36(A.uw),e.Y36(G.ux),e.Y36(c.qu))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-representante-list"]],viewQuery:function(r,i){if(1&r&&(e.Gf(Ze,5),e.Gf(Te,5)),2&r){let s;e.iGM(s=e.CRH())&&(i.sort=s.first),e.iGM(s=e.CRH())&&(i.paginator=s.first)}},standalone:!0,features:[e.jDz],decls:52,vars:17,consts:[[1,"flex","flex-col","min-h-screen","p-6","w-full"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden","mb-6","w-full"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","flex-col","sm:flex-row","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-stroked-button","",1,"ml-4","mt-4","sm:mt-0",3,"matMenuTriggerFor"],[3,"svgIcon"],[1,"ml-2"],["mat-flat-button","",1,"ml-4","mt-4","sm:mt-0","w-55","text-lg",3,"color","click"],[1,"ml-2","hidden","sm:inline"],[1,"ml-2","sm:hidden"],["mat-icon-button","","matTooltip","Exportar tabla","aria-label","Exportar tabla",1,"ml-4","mt-4","sm:mt-0",3,"matMenuTriggerFor","color"],["exportMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"column-menu"],["columnMenu","matMenu"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","border-b"],[1,"p-2"],["class","flex items-center py-1 px-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",4,"ngFor","ngForOf"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden"],[4,"ngIf","ngIfElse"],["noRepresentantes",""],["rowDetailsTemplate",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"flex","items-center","py-1","px-2","hover:bg-gray-100","dark:hover:bg-gray-700","rounded"],[3,"checked","color","change"],[1,"hidden","lg:block","w-full"],[1,"relative","overflow-x-auto","overflow-y-hidden","max-w-full"],[1,"min-w-max"],[1,"sticky","top-0","z-20","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","border-b"],["class","truncate flex items-center","matTooltipPosition","above",3,"matTooltip",4,"ngFor","ngForOf"],[1,"sticky","right-0","bg-gray-50","dark:bg-black","dark:bg-opacity-5","z-30","flex","items-center","justify-center","border-l"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"lg:hidden"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],["matTooltipPosition","above",1,"truncate","flex","items-center",3,"matTooltip"],[1,"grid","items-center","gap-4","py-3","px-6","md:px-8","border-b","hover:bg-gray-50","dark:hover:bg-gray-800","transition-colors","duration-200"],["class","truncate","matTooltipPosition","above",3,"matTooltip",4,"ngFor","ngForOf"],[1,"sticky","right-0","bg-white","dark:bg-gray-900","z-30","flex","items-center","justify-center","gap-2","border-l","pl-4"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"color","matTooltip","click"],[1,"icon-size-5",3,"svgIcon"],["class","w-full bg-gray-50 dark:bg-gray-800 border-b",4,"ngIf"],["matTooltipPosition","above",1,"truncate",3,"matTooltip"],["normalColumn",""],[1,"px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"w-full","bg-gray-50","dark:bg-gray-800","border-b"],[1,"p-6"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700","p-4","mb-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","gap-2","text-sm"],[1,"font-medium"],[1,"flex","justify-end","mt-4","gap-2"],["mat-stroked-button","",3,"color","click"],["class","mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],[1,"mt-4","pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"p-8","sm:p-16","border-b","text-4xl","font-semibold","tracking-tight","text-center"],[1,"max-w-4xl","mx-auto"],[1,"space-y-6",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","nombre","placeholder","Nombre del representante"],["matInput","","formControlName","apellido","placeholder","Apellido del representante"],["matInput","","formControlName","cargo","placeholder","Cargo del representante"],["matInput","","formControlName","telefono","placeholder","Tel\xe9fono del representante"],["matInput","","formControlName","email","type","email","placeholder","Email del representante"],["formControlName","estado"],["value","activo"],["value","inactivo"],[1,"flex","justify-end","gap-4","pt-4","border-t","border-gray-200","dark:border-gray-700"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","type","button",3,"color","disabled","click"],["mat-stroked-button","","type","button",3,"color","click"]],template:function(r,i){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5),e.YNc(6,Ce,2,1,"div",6),e.TgZ(7,"div",7)(8,"div",8)(9,"h2",9),e._uU(10," Representantes "),e.qZA()()(),e.TgZ(11,"div",10)(12,"mat-form-field",11),e._UZ(13,"mat-icon",12)(14,"input",13),e.qZA(),e.TgZ(15,"button",14),e._UZ(16,"mat-icon",15),e.TgZ(17,"span",16),e._uU(18,"Columnas"),e.qZA()(),e.TgZ(19,"button",17),e.NdJ("click",function(){return i.openAddDialog()}),e._UZ(20,"mat-icon",15),e.TgZ(21,"span",18),e._uU(22,"Agregar Representante"),e.qZA(),e.TgZ(23,"span",19),e._uU(24,"Agregar"),e.qZA()(),e.TgZ(25,"button",20),e._UZ(26,"mat-icon",15),e.qZA(),e.TgZ(27,"mat-menu",null,21)(29,"button",22),e.NdJ("click",function(){return i.exportToCSV()}),e.TgZ(30,"mat-icon"),e._uU(31,"description"),e.qZA(),e.TgZ(32,"span"),e._uU(33,"Exportar a CSV"),e.qZA()(),e.TgZ(34,"button",22),e.NdJ("click",function(){return i.exportToPDF()}),e.TgZ(35,"mat-icon"),e._uU(36,"picture_as_pdf"),e.qZA(),e.TgZ(37,"span"),e._uU(38,"Exportar a PDF"),e.qZA()()()()(),e.TgZ(39,"mat-menu",23,24)(41,"div",25),e._uU(42," Mostrar Columnas "),e.qZA(),e.TgZ(43,"div",26),e.YNc(44,ye,3,3,"div",27),e.qZA()(),e.TgZ(45,"div",28)(46,"div",29),e.YNc(47,Ie,13,16,"ng-container",30)(48,Je,2,0,"ng-template",null,31,e.W1O),e.qZA()()()()(),e.YNc(50,Qe,38,4,"ng-template",null,32,e.W1O)),2&r){const s=e.MAs(28),a=e.MAs(40),_=e.MAs(49);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:users"),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(6),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",i.searchControl)("autocomplete","off")("placeholder","Buscar representantes"),e.xp6(1),e.Q6J("matMenuTriggerFor",a),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:view-columns"),e.xp6(3),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("matMenuTriggerFor",s)("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(18),e.Q6J("ngForOf",i.columnSettings),e.xp6(3),e.Q6J("ngIf",(null==i.dataSource||null==i.dataSource.data?null:i.dataSource.data.length)>0)("ngIfElse",_)}},dependencies:[o.ez,o.mk,o.sg,o.O5,o.tP,b.p0,m.JX,v.TU,v.NW,y.c,y.Nt,f.KE,f.hX,f.qo,f.lN,Z.ot,Z.lW,Z.RK,P.Ps,P.Hw,q.Cv,q.pW,N.AV,N.gM,A.Is,c.UX,c._Y,c.Fj,c.JJ,c.JL,c.oH,c.sg,c.u,w.LD,w.gD,F.ey,T.Tx,T.VK,T.OP,T.p6,D.t,G.ZX,K.p9,K.oG],styles:[".inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 150px 200px 180px 1fr 200px 200px 100px;gap:1rem;width:100%;box-sizing:border-box}.inventory-grid.z-10[_ngcontent-%COMP%]{position:sticky;top:0;background:white;z-index:20;box-shadow:0 2px 5px -2px #0000001a;overflow:visible}.dark[_ngcontent-%COMP%]   .inventory-grid.z-10[_ngcontent-%COMP%]{background:#1E293B}.inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{position:sticky;right:0;background:white;z-index:10;box-shadow:-2px 0 5px -2px #0000001a}.dark[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{background:#1E293B}.sticky-end[_ngcontent-%COMP%]{position:sticky;right:0;background:white;z-index:11;box-shadow:-2px 0 5px -2px #0000001a}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]{background:#1E293B}.dark[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#e0e0e0}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{background:#1E293B!important;color:#fff!important;border-color:#1e293b!important}.dark[_ngcontent-%COMP%]   .sticky-end[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff!important}.inventory-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]{display:block;width:100%;overflow-x:auto}@media (max-width: 768px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:25px 70px 110px 90px 90px 80px 80px 80px 80px 80px 35px}}"]})}return n})()}];let Le=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({imports:[R.Bz.forChild(Oe),R.Bz]})}return n})()}}]);