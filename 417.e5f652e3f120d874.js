"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[417],{5390:(D,k,l)=>{l.r(k),l.d(k,{default:()=>Ce});var e=l(9212),Q=l(1896);let J=(()=>{class n{constructor(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["inventory"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(i,o){1&i&&e._UZ(0,"router-outlet")},dependencies:[Q.lC],encapsulation:2,changeDetection:0})}return n})();var C=l(5619),I=l(9397),b=l(8180),v=l(7398),h=l(4664),S=l(8504),E=l(2096),P=l(2181),L=l(1474);let p=(()=>{class n{constructor(t){this._httpClient=t,this._brands=new C.X(null),this._categories=new C.X(null),this._pagination=new C.X(null),this._product=new C.X(null),this._products=new C.X(null),this._tags=new C.X(null),this._vendors=new C.X(null)}get brands$(){return this._brands.asObservable()}get categories$(){return this._categories.asObservable()}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}get tags$(){return this._tags.asObservable()}get vendors$(){return this._vendors.asObservable()}getBrands(){return this._httpClient.get("api/apps/ecommerce/inventory/brands").pipe((0,I.b)(t=>{this._brands.next(t)}))}getCategories(){return this._httpClient.get("api/apps/ecommerce/inventory/categories").pipe((0,I.b)(t=>{this._categories.next(t)}))}getProducts(t=0,i=10,o="name",c="asc",_=""){return this._httpClient.get("api/apps/ecommerce/inventory/products",{params:{page:""+t,size:""+i,sort:o,order:c,search:_}}).pipe((0,I.b)(x=>{this._pagination.next(x.pagination),this._products.next(x.products)}))}getProductById(t){return this._products.pipe((0,b.q)(1),(0,v.U)(i=>{const o=i.find(c=>c.id===t)||null;return this._product.next(o),o}),(0,h.w)(i=>i?(0,E.of)(i):(0,S._)("Could not found product with id of "+t+"!")))}createProduct(){return this.products$.pipe((0,b.q)(1),(0,h.w)(t=>this._httpClient.post("api/apps/ecommerce/inventory/product",{}).pipe((0,v.U)(i=>(this._products.next([i,...t]),i)))))}updateProduct(t,i){return this.products$.pipe((0,b.q)(1),(0,h.w)(o=>this._httpClient.patch("api/apps/ecommerce/inventory/product",{id:t,product:i}).pipe((0,v.U)(c=>{const _=o.findIndex(x=>x.id===t);return o[_]=c,this._products.next(o),c}),(0,h.w)(c=>this.product$.pipe((0,b.q)(1),(0,P.h)(_=>_&&_.id===t),(0,I.b)(()=>(this._product.next(c),c)))))))}deleteProduct(t){return this.products$.pipe((0,b.q)(1),(0,h.w)(i=>this._httpClient.delete("api/apps/ecommerce/inventory/product",{params:{id:t}}).pipe((0,v.U)(o=>{const c=i.findIndex(_=>_.id===t);return i.splice(c,1),this._products.next(i),o}))))}getTags(){return this._httpClient.get("api/apps/ecommerce/inventory/tags").pipe((0,I.b)(t=>{this._tags.next(t)}))}createTag(t){return this.tags$.pipe((0,b.q)(1),(0,h.w)(i=>this._httpClient.post("api/apps/ecommerce/inventory/tag",{tag:t}).pipe((0,v.U)(o=>(this._tags.next([...i,o]),o)))))}updateTag(t,i){return this.tags$.pipe((0,b.q)(1),(0,h.w)(o=>this._httpClient.patch("api/apps/ecommerce/inventory/tag",{id:t,tag:i}).pipe((0,v.U)(c=>{const _=o.findIndex(x=>x.id===t);return o[_]=c,this._tags.next(o),c}))))}deleteTag(t){return this.tags$.pipe((0,b.q)(1),(0,h.w)(i=>this._httpClient.delete("api/apps/ecommerce/inventory/tag",{params:{id:t}}).pipe((0,v.U)(o=>{const c=i.findIndex(_=>_.id===t);return i.splice(c,1),this._tags.next(i),o}),(0,P.h)(o=>o),(0,h.w)(o=>this.products$.pipe((0,b.q)(1),(0,v.U)(c=>(c.forEach(_=>{const x=_.tags.findIndex(Ie=>Ie===t);x>-1&&_.tags.splice(x,1)}),o)))))))}getVendors(){return this._httpClient.get("api/apps/ecommerce/inventory/vendors").pipe((0,I.b)(t=>{this._vendors.next(t)}))}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(L.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var r=l(6814),s=l(6223),d=l(2296),u=l(5986),g=l(3680),m=l(4170),Z=l(617),T=l(4516),f=l(1476),y=l(6007),w=l(8525),F=l(2599),U=l(3566),M=l(4748),N=l(8645),A=l(9773),q=l(3620),O=l(3019),B=l(6278);function $(n,a){1&n&&(e.TgZ(0,"div",16),e._UZ(1,"mat-progress-bar",17),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function V(n,a){if(1&n&&e._UZ(0,"img",43),2&n){const t=e.oxw().$implicit;e.Q6J("alt","Product thumbnail image")("src",t.thumbnail,e.LSH)}}function R(n,a){1&n&&(e.TgZ(0,"div",44),e._uU(1," NO THUMB "),e.qZA())}function Y(n,a){1&n&&(e.TgZ(0,"div",45),e._UZ(1,"div",46),e.qZA())}function z(n,a){1&n&&(e.TgZ(0,"div",47),e._UZ(1,"div",48),e.qZA())}function G(n,a){1&n&&(e.TgZ(0,"div",49),e._UZ(1,"div",50),e.qZA())}function K(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",51),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function H(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",52),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x-mark"))}function j(n,a){1&n&&e.GkF(0)}const W=n=>({$implicit:n});function X(n,a){if(1&n&&(e.ynx(0),e.YNc(1,j,1,0,"ng-container",53),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(4);const i=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,W,t))}}function ee(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",28)(2,"div",29)(3,"div",30),e.YNc(4,V,1,2,"img",31)(5,R,2,0,"div",32),e.qZA()(),e.TgZ(6,"div",33),e._uU(7),e.qZA(),e.TgZ(8,"div",34),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"div",35)(14,"div",36),e._uU(15),e.qZA(),e.YNc(16,Y,2,0,"div",37)(17,z,2,0,"div",38)(18,G,2,0,"div",39),e.qZA(),e.TgZ(19,"div",40),e.YNc(20,K,2,1,"ng-container",13)(21,H,2,1,"ng-container",13),e.qZA(),e.TgZ(22,"div")(23,"button",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit,_=e.oxw(4);return e.KtG(_.toggleDetails(c.id))}),e._UZ(24,"mat-icon",42),e.qZA()()(),e.TgZ(25,"div",19),e.YNc(26,X,2,4,"ng-container",13),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(4),e.Q6J("ngIf",t.thumbnail),e.xp6(1),e.Q6J("ngIf",!t.thumbnail),e.xp6(2),e.hij(" ",t.sku," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",e.gM2(12,13,t.price,"USD","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stock),e.xp6(1),e.Q6J("ngIf",t.stock<20),e.xp6(1),e.Q6J("ngIf",t.stock>=20&&t.stock<30),e.xp6(1),e.Q6J("ngIf",t.stock>=30),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon",(null==i.selectedProduct?null:i.selectedProduct.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==i.selectedProduct?null:i.selectedProduct.id)===t.id)}}function te(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ee,27,18,"ng-container",27),e.BQk()),2&n){const t=a.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const ne=n=>({"pointer-events-none":n}),ie=()=>[5,10,25,100];function oe(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19)(2,"div",20),e._UZ(3,"div"),e.TgZ(4,"div",21),e._uU(5," SKU "),e.qZA(),e.TgZ(6,"div",22),e._uU(7,"Name"),e.qZA(),e.TgZ(8,"div",23),e._uU(9," Price "),e.qZA(),e.TgZ(10,"div",24),e._uU(11," Stock "),e.qZA(),e.TgZ(12,"div",24),e._uU(13," Active "),e.qZA(),e.TgZ(14,"div",25),e._uU(15,"Details"),e.qZA()(),e.YNc(16,te,2,2,"ng-container",13),e.ALo(17,"async"),e.qZA(),e._UZ(18,"mat-paginator",26),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","sku"),e.xp6(2),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","price"),e.xp6(2),e.Q6J("mat-sort-header","stock"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(17,12,t.products$)),e.xp6(2),e.Q6J("ngClass",e.VKq(14,ne,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(16,ie))("showFirstLastButtons",!0)}}function re(n,a){if(1&n&&(e.ynx(0),e.YNc(1,oe,19,17,"ng-container",18),e.BQk()),2&n){const t=a.ngIf;e.oxw();const i=e.MAs(20);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function se(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"img",95),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.selectedProductForm.get("images").value[t.selectedProductForm.get("currentImageIndex").value],e.LSH)}}function ce(n,a){1&n&&(e.TgZ(0,"span",96),e._uU(1,"NO IMAGE"),e.qZA())}function ae(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",97)(1,"button",98),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cycleImages(!1))}),e._UZ(2,"mat-icon",42),e.qZA(),e.TgZ(3,"span",99),e._uU(4),e.qZA(),e.TgZ(5,"button",98),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cycleImages(!0))}),e._UZ(6,"mat-icon",42),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("svgIcon","heroicons_mini:arrow-long-left"),e.xp6(2),e.AsE(" ",t.selectedProductForm.get("currentImageIndex").value+1," of ",t.selectedProductForm.get("images").value.length," "),e.xp6(2),e.Q6J("svgIcon","heroicons_mini:arrow-long-right")}}function le(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-option",100),e._uU(2),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function de(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-option",100),e._uU(2),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function ge(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-option",100),e._uU(2),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function _e(n,a){1&n&&e._UZ(0,"mat-icon",42),2&n&&e.Q6J("svgIcon","heroicons_solid:pencil-square")}function me(n,a){1&n&&e._UZ(0,"mat-icon",42),2&n&&e.Q6J("svgIcon","heroicons_solid:check")}function pe(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",101),e.NdJ("change",function(o){const _=e.CHM(t).$implicit,x=e.oxw(3);return e.KtG(x.toggleProductTag(_,o))}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("color","primary")("checked",i.selectedProduct.tags.includes(t.id)),e.xp6(1),e.hij(" ",t.title," ")}}function ue(n,a){if(1&n&&(e.ynx(0),e.YNc(1,pe,3,3,"ng-container",27),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function he(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",103)(2,"input",104),e.NdJ("input",function(o){const _=e.CHM(t).$implicit,x=e.oxw(3);return e.KtG(x.updateTagTitle(_,o))}),e.qZA(),e.TgZ(3,"button",105),e.NdJ("click",function(){const c=e.CHM(t).$implicit,_=e.oxw(3);return e.KtG(_.deleteTag(c))}),e._UZ(4,"mat-icon",42),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("value",t.title),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function fe(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",102),e.YNc(2,he,5,3,"ng-container",27),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function xe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",106),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(95);return e.oxw().createTag(o.value),e.KtG(o.value="")}),e._UZ(1,"mat-icon",107),e.TgZ(2,"div",108),e._uU(3,'Create "'),e.TgZ(4,"b"),e._uU(5),e.qZA(),e._uU(6,'"'),e.qZA()()}if(2&n){e.oxw();const t=e.MAs(95);e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Oqu(t.value)}}function ve(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",110),e.TgZ(2,"span",111),e._uU(3,"Product updated"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function ye(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",112),e.TgZ(2,"span",111),e._uU(3,"An error occurred, try again!"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x-mark"))}function Te(n,a){if(1&n&&(e.TgZ(0,"div",109),e.YNc(1,ve,4,1,"ng-container",13)(2,ye,4,1,"ng-container",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","success"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===t.flashMessage)}}function be(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",55)(2,"form",56)(3,"div",57)(4,"div",58)(5,"div",59)(6,"div",60),e.YNc(7,se,2,1,"ng-container",18)(8,ce,2,0,"ng-template",null,61,e.W1O),e.qZA(),e.YNc(10,ae,7,4,"div",62),e.qZA(),e.TgZ(11,"div",63)(12,"span",64),e._uU(13,"Product status"),e.qZA(),e.TgZ(14,"mat-slide-toggle",65),e._uU(15),e.qZA()()(),e.TgZ(16,"div",66)(17,"div",67)(18,"mat-form-field",68)(19,"mat-label"),e._uU(20,"Name"),e.qZA(),e._UZ(21,"input",69),e.qZA(),e.TgZ(22,"div",70)(23,"mat-form-field",71)(24,"mat-label"),e._uU(25,"SKU"),e.qZA(),e._UZ(26,"input",69),e.qZA(),e.TgZ(27,"mat-form-field",72)(28,"mat-label"),e._uU(29,"Barcode"),e.qZA(),e._UZ(30,"input",69),e.qZA()(),e.TgZ(31,"div",70)(32,"mat-form-field",71)(33,"mat-label"),e._uU(34,"Category"),e.qZA(),e.TgZ(35,"mat-select",73),e.YNc(36,le,3,2,"ng-container",74),e.qZA()(),e.TgZ(37,"mat-form-field",75)(38,"mat-label"),e._uU(39,"Brand"),e.qZA(),e.TgZ(40,"mat-select",73),e.YNc(41,de,3,2,"ng-container",74),e.qZA()(),e.TgZ(42,"mat-form-field",76)(43,"mat-label"),e._uU(44,"Vendor"),e.qZA(),e.TgZ(45,"mat-select",73),e.YNc(46,ge,3,2,"ng-container",74),e.qZA()()(),e.TgZ(47,"div",70)(48,"mat-form-field",71)(49,"mat-label"),e._uU(50,"Stock"),e.qZA(),e._UZ(51,"input",77),e.qZA(),e.TgZ(52,"mat-form-field",76)(53,"mat-label"),e._uU(54,"Reserved"),e.qZA(),e._UZ(55,"input",77),e.qZA()()(),e.TgZ(56,"div",78)(57,"mat-form-field",68)(58,"mat-label"),e._uU(59,"Cost"),e.qZA(),e.TgZ(60,"span",79),e._uU(61,"$"),e.qZA(),e._UZ(62,"input",69),e.qZA(),e.TgZ(63,"mat-form-field",68)(64,"mat-label"),e._uU(65,"Base Price"),e.qZA(),e.TgZ(66,"span",79),e._uU(67,"$"),e.qZA(),e._UZ(68,"input",69),e.qZA(),e.TgZ(69,"mat-form-field",68)(70,"mat-label"),e._uU(71,"Tax"),e.qZA(),e.TgZ(72,"span",80),e._uU(73,"%"),e.qZA(),e._UZ(74,"input",77),e.qZA(),e.TgZ(75,"mat-form-field",68)(76,"mat-label"),e._uU(77,"Price"),e.qZA(),e.TgZ(78,"span",80),e._uU(79,"$"),e.qZA(),e._UZ(80,"input",69),e.qZA()(),e.TgZ(81,"div",78)(82,"mat-form-field",68)(83,"mat-label"),e._uU(84,"Weight"),e.qZA(),e.TgZ(85,"span",80),e._uU(86,"lbs."),e.qZA(),e._UZ(87,"input",69),e.qZA(),e.TgZ(88,"span",81),e._uU(89,"Tags"),e.qZA(),e.TgZ(90,"div",82)(91,"div",83)(92,"div",84),e._UZ(93,"mat-icon",42),e.TgZ(94,"input",85,86),e.NdJ("input",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.filterTags(o))})("keydown",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.filterTagsInputKeyDown(o))}),e.qZA()(),e.TgZ(96,"button",87),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleTagsEditMode())}),e.YNc(97,_e,1,1,"mat-icon",88)(98,me,1,1,"mat-icon",88),e.qZA()(),e.TgZ(99,"div",89),e.YNc(100,ue,2,2,"ng-container",13)(101,fe,3,2,"ng-container",13)(102,xe,7,2,"div",90),e.qZA()()()()(),e.TgZ(103,"div",91)(104,"button",92),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteSelectedProduct())}),e._uU(105," Delete "),e.qZA(),e.TgZ(106,"div",29),e.YNc(107,Te,3,2,"div",93),e.TgZ(108,"button",94),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateSelectedProduct())}),e._uU(109," Update "),e.qZA()()()()()()}if(2&n){const t=e.MAs(9),i=e.MAs(95),o=e.oxw();e.xp6(2),e.Q6J("formGroup",o.selectedProductForm),e.xp6(5),e.Q6J("ngIf",o.selectedProductForm.get("images").value.length)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",o.selectedProductForm.get("images").value.length),e.xp6(4),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===o.selectedProductForm.get("active").value?"Active":"Disabled"," "),e.xp6(6),e.Q6J("formControlName","name"),e.xp6(5),e.Q6J("formControlName","sku"),e.xp6(4),e.Q6J("formControlName","barcode"),e.xp6(5),e.Q6J("formControlName","category"),e.xp6(1),e.Q6J("ngForOf",o.categories),e.xp6(4),e.Q6J("formControlName","brand"),e.xp6(1),e.Q6J("ngForOf",o.brands),e.xp6(4),e.Q6J("formControlName","vendor"),e.xp6(1),e.Q6J("ngForOf",o.vendors),e.xp6(5),e.Q6J("formControlName","stock"),e.xp6(4),e.Q6J("formControlName","reserved"),e.xp6(7),e.Q6J("formControlName","cost"),e.xp6(6),e.Q6J("formControlName","basePrice"),e.xp6(6),e.Q6J("formControlName","taxPercent"),e.xp6(6),e.Q6J("formControlName","price"),e.xp6(7),e.Q6J("formControlName","weight"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("maxLength",50),e.xp6(3),e.Q6J("ngIf",!o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.tagsEditMode),e.xp6(2),e.Q6J("ngIf",!o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.shouldShowCreateTagButton(i.value)),e.xp6(2),e.Q6J("color","warn"),e.xp6(3),e.Q6J("ngIf",o.flashMessage),e.xp6(1),e.Q6J("color","primary")}}function Ze(n,a){1&n&&(e.TgZ(0,"div",113),e._uU(1,"There are no products!"),e.qZA())}const Ce=[{path:"",pathMatch:"full",redirectTo:"inventory"},{path:"inventory",component:J,children:[{path:"",component:(()=>{class n{constructor(t,i,o,c){this._changeDetectorRef=t,this._fuseConfirmationService=i,this._formBuilder=o,this._inventoryService=c,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new s.p4,this.selectedProduct=null,this.tagsEditMode=!1,this._unsubscribeAll=new N.x}ngOnInit(){this.selectedProductForm=this._formBuilder.group({id:[""],category:[""],name:["",[s.kI.required]],description:[""],tags:[[]],sku:[""],barcode:[""],brand:[""],vendor:[""],stock:[""],reserved:[""],cost:[""],basePrice:[""],taxPercent:[""],price:[""],weight:[""],thumbnail:[""],images:[[]],currentImageIndex:[0],active:[!1]}),this._inventoryService.brands$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(t=>{this.brands=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.categories$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.pagination$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.products$=this._inventoryService.products$,this._inventoryService.tags$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.vendors$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(t=>{this.vendors=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,A.R)(this._unsubscribeAll),(0,q.b)(300),(0,h.w)(t=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(0,10,"name","asc",t))),(0,v.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,A.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,O.T)(this._sort.sortChange,this._paginator.page).pipe((0,h.w)(()=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,v.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(t){this.selectedProduct&&this.selectedProduct.id===t?this.closeDetails():this._inventoryService.getProductById(t).subscribe(i=>{this.selectedProduct=i,this.selectedProductForm.patchValue(i),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedProduct=null}cycleImages(t=!0){const i=this.selectedProductForm.get("images").value.length,o=this.selectedProductForm.get("currentImageIndex").value,c=o+1===i?0:o+1,_=o-1<0?i-1:o-1;t?this.selectedProductForm.get("currentImageIndex").setValue(c):this.selectedProductForm.get("currentImageIndex").setValue(_)}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const i=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.title.toLowerCase().includes(i))}filterTagsInputKeyDown(t){if("Enter"!==t.key)return;if(0===this.filteredTags.length)return this.createTag(t.target.value),void(t.target.value="");const i=this.filteredTags[0];this.selectedProduct.tags.find(c=>c===i.id)?this.removeTagFromProduct(i):this.addTagToProduct(i)}createTag(t){this._inventoryService.createTag({title:t}).subscribe(o=>{this.addTagToProduct(o)})}updateTagTitle(t,i){t.title=i.target.value,this._inventoryService.updateTag(t.id,t).pipe((0,q.b)(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(t){this._inventoryService.deleteTag(t.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(t){this.selectedProduct.tags.unshift(t.id),this.selectedProductForm.get("tags").patchValue(this.selectedProduct.tags),this._changeDetectorRef.markForCheck()}removeTagFromProduct(t){this.selectedProduct.tags.splice(this.selectedProduct.tags.findIndex(i=>i===t.id),1),this.selectedProductForm.get("tags").patchValue(this.selectedProduct.tags),this._changeDetectorRef.markForCheck()}toggleProductTag(t,i){i.checked?this.addTagToProduct(t):this.removeTagFromProduct(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(i=>i.title.toLowerCase()===t.toLowerCase())>-1)}createProduct(){this._inventoryService.createProduct().subscribe(t=>{this.selectedProduct=t,this.selectedProductForm.patchValue(t),this._changeDetectorRef.markForCheck()})}updateSelectedProduct(){const t=this.selectedProductForm.getRawValue();delete t.currentImageIndex,this._inventoryService.updateProduct(t.id,t).subscribe(()=>{this.showFlashMessage("success")})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"Delete product",message:"Are you sure you want to remove this product? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{if("confirmed"===i){const o=this.selectedProductForm.getRawValue();this._inventoryService.deleteProduct(o.id).subscribe(()=>{this.closeDetails()})}})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(e.sBO),e.Y36(B.R),e.Y36(s.QS),e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["inventory-list"]],viewQuery:function(i,o){if(1&i&&(e.Gf(f.NW,5),e.Gf(U.YE,5)),2&i){let c;e.iGM(c=e.CRH())&&(o._paginator=c.first),e.iGM(c=e.CRH())&&(o._sort=c.first)}},standalone:!0,features:[e.jDz],decls:21,vars:11,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noProducts",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","md:block",3,"mat-sort-header"],[3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","items-center"],[1,"relative","flex","flex-0","items-center","justify-center","w-12","h-12","mr-6","rounded","overflow-hidden","border"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"hidden","md:block","truncate"],[1,"truncate"],[1,"hidden","lg:flex","items-center"],[1,"min-w-4"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-col","items-center","sm:items-start","mb-8","sm:mb-0"],[1,"flex","flex-col","items-center"],[1,"w-32","h-44","border","rounded","overflow-hidden"],["noImage",""],["class","flex items-center mt-2 whitespace-nowrap",4,"ngIf"],[1,"flex","flex-col","mt-8"],[1,"font-semibold","mb-2"],[3,"formControlName","color"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-2/4","sm:pl-8"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex"],[1,"w-1/3","pr-2"],[1,"w-2/3","pl-2"],[3,"formControlName"],[4,"ngFor","ngForOf"],[1,"w-1/3","px-2"],[1,"w-1/3","pl-2"],["type","number","matInput","",3,"formControlName"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],["matPrefix",""],["matSuffix",""],[1,"mb-px","font-medium","leading-tight"],[1,"mt-1.5","rounded-md","border","border-gray-300","dark:border-gray-500","shadow-sm","overflow-hidden"],[1,"flex","items-center","-my-px","py-2","px-3"],[1,"flex","items-center","flex-auto","min-w-0"],["type","text","placeholder","Enter tag name",1,"min-w-0","ml-2","py-1","border-0",3,"maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"ml-3","w-8","h-8","min-h-8",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"h-44","leading-none","overflow-y-auto","border-t","border-gray-300","dark:border-gray-500"],["class","flex items-center h-10 min-h-10 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer border-t hover:bg-gray-50 dark:hover:bg-hover","matRipple","",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","w-full","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"color","click"],["class","flex items-center mr-4",4,"ngIf"],["mat-flat-button","",3,"color","click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"flex","items-center","min-h-20","text-lg","font-semibold"],[1,"flex","items-center","mt-2","whitespace-nowrap"],["mat-icon-button","",3,"click"],[1,"font-sm","mx-2"],[3,"value"],[1,"flex","items-center","h-10","min-h-10","pl-1","pr-4",3,"color","checked","change"],[1,"p-4","space-y-2"],[1,"fuse-mat-dense","w-full",3,"subscriptSizing"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],["matRipple","",1,"flex","items-center","h-10","min-h-10","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","border-t","hover:bg-gray-50","dark:hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"flex","items-center","mr-4"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,$,2,1,"div",2),e.TgZ(3,"div",3),e._uU(4,"Inventory"),e.qZA(),e.TgZ(5,"div",4)(6,"mat-form-field",5),e._UZ(7,"mat-icon",6)(8,"input",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return o.createProduct()}),e._UZ(10,"mat-icon",9),e.TgZ(11,"span",10),e._uU(12,"Add"),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",12),e.YNc(15,re,2,2,"ng-container",13),e.ALo(16,"async"),e.YNc(17,be,110,33,"ng-template",null,14,e.W1O)(19,Ze,2,0,"ng-template",null,15,e.W1O),e.qZA()()()),2&i&&(e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(4),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:magnifying-glass"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Search products"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(16,9,o.products$)))},dependencies:[r.O5,y.Cv,y.pW,m.lN,m.KE,m.hX,m.qo,m.R9,Z.Ps,Z.Hw,T.c,T.Nt,s.u5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.UX,s.oH,s.sg,s.u,d.ot,d.lW,d.RK,U.JX,U.YE,U.nU,r.ax,r.tP,f.TU,f.NW,r.mk,F.rP,F.Rr,w.LD,w.gD,g.ey,g.Ng,u.p9,u.oG,g.si,g.wG,r.Ov,r.H9],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:48px 112px auto 112px 96px 96px 72px}}\n"],encapsulation:2,data:{animation:M.L},changeDetection:0})}return n})(),resolve:{brands:()=>(0,e.f3M)(p).getBrands(),categories:()=>(0,e.f3M)(p).getCategories(),products:()=>(0,e.f3M)(p).getProducts(),tags:()=>(0,e.f3M)(p).getTags(),vendors:()=>(0,e.f3M)(p).getVendors()}}]}]},8337:(D,k,l)=>{l.d(k,{Ov:()=>S,Z9:()=>I,eX:()=>h,k:()=>L,o2:()=>C,yy:()=>v});var e=l(3168),Q=l(8645),J=l(9212);class C{}function I(p){return p&&"function"==typeof p.connect&&!(p instanceof e.c)}class v{applyChanges(r,s,d,u,g){r.forEachOperation((m,Z,T)=>{let f,y;if(null==m.previousIndex){const w=d(m,Z,T);f=s.createEmbeddedView(w.templateRef,w.context,w.index),y=1}else null==T?(s.remove(Z),y=3):(f=s.get(Z),s.move(f,T),y=2);g&&g({context:f?.context,operation:y,record:m})})}detach(){}}class h{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(r,s,d,u,g){r.forEachOperation((m,Z,T)=>{let f,y;null==m.previousIndex?(f=this._insertView(()=>d(m,Z,T),T,s,u(m)),y=f?1:0):null==T?(this._detachAndCacheView(Z,s),y=3):(f=this._moveView(Z,T,s,u(m)),y=2),g&&g({context:f?.context,operation:y,record:m})})}detach(){for(const r of this._viewCache)r.destroy();this._viewCache=[]}_insertView(r,s,d,u){const g=this._insertViewFromCache(s,d);if(g)return void(g.context.$implicit=u);const m=r();return d.createEmbeddedView(m.templateRef,m.context,m.index)}_detachAndCacheView(r,s){const d=s.detach(r);this._maybeCacheView(d,s)}_moveView(r,s,d,u){const g=d.get(r);return d.move(g,s),g.context.$implicit=u,g}_maybeCacheView(r,s){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(r);else{const d=s.indexOf(r);-1===d?r.destroy():s.remove(d)}}_insertViewFromCache(r,s){const d=this._viewCache.pop();return d&&s.insert(d,r),d||null}}class S{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(r=!1,s,d=!0,u){this._multiple=r,this._emitChanges=d,this.compareWith=u,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Q.x,s&&s.length&&(r?s.forEach(g=>this._markSelected(g)):this._markSelected(s[0]),this._selectedToEmit.length=0)}select(...r){this._verifyValueAssignment(r),r.forEach(d=>this._markSelected(d));const s=this._hasQueuedChanges();return this._emitChangeEvent(),s}deselect(...r){this._verifyValueAssignment(r),r.forEach(d=>this._unmarkSelected(d));const s=this._hasQueuedChanges();return this._emitChangeEvent(),s}setSelection(...r){this._verifyValueAssignment(r);const s=this.selected,d=new Set(r);r.forEach(g=>this._markSelected(g)),s.filter(g=>!d.has(g)).forEach(g=>this._unmarkSelected(g));const u=this._hasQueuedChanges();return this._emitChangeEvent(),u}toggle(r){return this.isSelected(r)?this.deselect(r):this.select(r)}clear(r=!0){this._unmarkAll();const s=this._hasQueuedChanges();return r&&this._emitChangeEvent(),s}isSelected(r){return this._selection.has(this._getConcreteValue(r))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(r){this._multiple&&this.selected&&this._selected.sort(r)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(r){r=this._getConcreteValue(r),this.isSelected(r)||(this._multiple||this._unmarkAll(),this.isSelected(r)||this._selection.add(r),this._emitChanges&&this._selectedToEmit.push(r))}_unmarkSelected(r){r=this._getConcreteValue(r),this.isSelected(r)&&(this._selection.delete(r),this._emitChanges&&this._deselectedToEmit.push(r))}_unmarkAll(){this.isEmpty()||this._selection.forEach(r=>this._unmarkSelected(r))}_verifyValueAssignment(r){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(r){if(this.compareWith){for(let s of this._selection)if(this.compareWith(r,s))return s;return r}return r}}const L=new J.OlP("_ViewRepeater")}}]);