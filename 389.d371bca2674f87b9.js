"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[389],{9389:(E,c,r)=>{r.r(c),r.d(c,{TrabajadoresModule:()=>s});var u=r(6814),d=r(1896),n=r(2682),t=r(9212);const m=[{path:"",loadComponent:()=>r.e(352).then(r.bind(r,8352)).then(i=>i.TrabajadoresComponent)}];let s=(()=>{class i{static#o=this.\u0275fac=function(_){return new(_||i)};static#e=this.\u0275mod=t.oAB({type:i});static#r=this.\u0275inj=t.cJS({providers:[n.r],imports:[u.ez,d.Bz.forChild(m)]})}return i})()},2682:(E,c,r)=>{r.d(c,{r:()=>T});var u=r(9862),d=r(9397),n=r(6306),t=r(2096),m=r(7398),s=r(2022),i=r(9212);let T=(()=>{class p{constructor(o){this.http=o}getTrabajadores(){return this.http.get(`${s.P.TRABAJADORES}`).pipe((0,d.b)(o=>console.log("Trabajadores obtenidos:",o)),(0,n.K)(o=>(console.error("Error al obtener trabajadores:",o),(0,t.of)(this.getMockTrabajadores()))),(0,m.U)(o=>o.data||[]))}searchTrabajadores(o){if(!o.trim())return this.getTrabajadores();const e=(new u.LE).set("search",o);return this.http.get(`${s.P.TRABAJADORES}`,{params:e}).pipe((0,n.K)(a=>(console.error("Error en b\xfasqueda de trabajadores:",a),(0,t.of)(this.getMockTrabajadores().filter(l=>l.nombre.toLowerCase().includes(o.toLowerCase())||l.apellido.toLowerCase().includes(o.toLowerCase())||l.email.toLowerCase().includes(o.toLowerCase()))))),(0,m.U)(a=>a.data||[]))}getTrabajadorById(o){return this.http.get(`${s.P.TRABAJADORES}/${o}`).pipe((0,n.K)(e=>{console.error("Error al obtener trabajador por ID:",e);const a=this.getMockTrabajadores().find(l=>l.id===o);return(0,t.of)(a||{})}))}createTrabajador(o){const e={nombre:o.nombre,apellido:o.apellido,usuario:o.usuario||o.email,contrasena:o.contrasena||"temporal123",cargo:o.cargo,departamento_id:o.departamento_id,email:o.email,telefono:o.telefono||"",telefono_movil:o.telefono_movil||"",rol:o.rol};return this.http.post(`${s.P.TRABAJADORES}`,e).pipe((0,d.b)(a=>console.log("Trabajador creado:",a)),(0,n.K)(a=>{console.error("Error al crear trabajador:",a);const l={...e,id:Date.now(),departamentoId:e.departamento_id,fecha_creacion:new Date,activo:!0};return(0,t.of)(l)}))}updateTrabajador(o,e){const a={nombre:e.nombre,apellido:e.apellido,usuario:e.usuario||e.email,cargo:e.cargo,departamento_id:e.departamento_id,email:e.email,telefono:e.telefono||"",telefono_movil:e.telefono_movil||"",rol:e.rol};return this.http.put(`${s.P.TRABAJADORES}/${o}`,a).pipe((0,d.b)(l=>console.log("Trabajador actualizado:",l)),(0,n.K)(l=>(console.error("Error al actualizar trabajador:",l),(0,t.of)({...a,id:o,departamentoId:a.departamento_id}))))}deleteTrabajador(o){return this.http.delete(`${s.P.TRABAJADORES}/${o}`).pipe((0,d.b)(()=>console.log("Trabajador eliminado:",o)),(0,n.K)(e=>(console.error("Error al eliminar trabajador:",e),(0,t.of)())))}getDepartamentos(){return this.http.get(`${s.P.DEPARTAMENTOS}`).pipe((0,n.K)(o=>(console.error("Error al obtener departamentos:",o),(0,t.of)(this.getMockDepartamentos()))))}exportToExcel(){return this.http.get(`${s.P.TRABAJADORES_EXPORT_EXCEL}`,{responseType:"blob"}).pipe((0,n.K)(o=>(console.error("Error al exportar a Excel:",o),(0,t.of)(new Blob))))}exportToPdf(){return this.http.get(`${s.P.TRABAJADORES_EXPORT_PDF}`,{responseType:"blob"}).pipe((0,n.K)(o=>(console.error("Error al exportar a PDF:",o),(0,t.of)(new Blob))))}getMockTrabajadores(){return[{id:1,nombre:"Juan",apellido:"P\xe9rez",usuario:"juan.perez",cargo:"Desarrollador Senior",departamento_id:2,departamentoId:2,email:"juan.perez@empresa.com",telefono:"123-456-7890",telefono_movil:"098-765-4321",rol:"user",activo:!0},{id:2,nombre:"Mar\xeda",apellido:"Gonz\xe1lez",usuario:"maria.gonzalez",cargo:"Gerente de RRHH",departamento_id:1,departamentoId:1,email:"maria.gonzalez@empresa.com",telefono:"123-456-7891",rol:"admin",activo:!0},{id:3,nombre:"Carlos",apellido:"Rodr\xedguez",usuario:"carlos.rodriguez",cargo:"Analista Financiero",departamento_id:3,departamentoId:3,email:"carlos.rodriguez@empresa.com",telefono:"123-456-7892",rol:"user",activo:!0}]}getMockDepartamentos(){return[{id:1,nombre:"Recursos Humanos"},{id:2,nombre:"Tecnolog\xeda"},{id:3,nombre:"Finanzas"},{id:4,nombre:"Operaciones"},{id:5,nombre:"Marketing"},{id:6,nombre:"Ventas"}]}static#o=this.\u0275fac=function(e){return new(e||p)(i.LFG(u.eN))};static#e=this.\u0275prov=i.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);