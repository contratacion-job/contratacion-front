<div class="p-6">
  <h2 class="text-2xl font-bold mb-6">
    {{ isEditMode ? 'Editar Suplemento' : 'Nuevo Suplemento' }}
  </h2>

  <form [formGroup]="suplementoForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Número de Contrato de Contratación -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>No. Contrato de Contratación</mat-label>
        <input matInput formControlName="no_contrato_contratacion" type="number" required>
        <mat-error *ngIf="f['no_contrato_contratacion'].hasError('required')">
          El número de contrato es requerido
        </mat-error>
      </mat-form-field>

      <!-- Vigencia -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Vigencia</mat-label>
        <mat-select formControlName="vigencia_id" required>
          <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia.id">
            {{ vigencia.vigencia }} {{ vigencia.tipo_vigencia }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="f['vigencia_id'].hasError('required')">
          La vigencia es requerida
        </mat-error>
      </mat-form-field>

      <!-- Proveedor -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Proveedor</mat-label>
        <mat-select formControlName="proveedor_id" required>
          <mat-option *ngFor="let proveedor of proveedores" [value]="proveedor.id">
            {{ proveedor.nombre }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="f['proveedor_id'].hasError('required')">
          El proveedor es requerido
        </mat-error>
      </mat-form-field>

      <!-- Tipo de Contrato -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Tipo de Contrato</mat-label>
        <mat-select formControlName="tipo_contrato_id" required>
          <mat-option *ngFor="let tipo of tiposContrato" [value]="tipo.id">
            {{ tipo.nombre_tipo_contrato }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="f['tipo_contrato_id'].hasError('required')">
          El tipo de contrato es requerido
        </mat-error>
      </mat-form-field>

      <!-- Departamento -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Departamento</mat-label>
        <mat-select formControlName="departamento_id" required>
          <mat-option *ngFor="let depto of departamentos" [value]="depto.id">
            {{ depto.nombre_departamento }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="f['departamento_id'].hasError('required')">
          El departamento es requerido
        </mat-error>
      </mat-form-field>

      <!-- Número de Contrato -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Número de Contrato</mat-label>
        <input matInput formControlName="no_contrato_id" type="number" required>
        <mat-error *ngIf="f['no_contrato_id'].hasError('required')">
          El número de contrato es requerido
        </mat-error>
      </mat-form-field>

      <!-- Fecha de Entrada -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Fecha de Entrada</mat-label>
        <input matInput [matDatepicker]="entradaPicker" formControlName="fecha_entrada" required>
        <mat-datepicker-toggle matSuffix [for]="entradaPicker">
          <mat-icon matDatepickerToggleIcon>calendar_today</mat-icon>
        </mat-datepicker-toggle>
        <mat-datepicker #entradaPicker></mat-datepicker>
        <mat-error *ngIf="f['fecha_entrada'].hasError('required')">
          La fecha de entrada es requerida
        </mat-error>
      </mat-form-field>

      <!-- Fecha de Firma -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Fecha de Firma</mat-label>
        <input matInput [matDatepicker]="firmaPicker" formControlName="fecha_firmado" required>
        <mat-datepicker-toggle matSuffix [for]="firmaPicker">
          <mat-icon matDatepickerToggleIcon>calendar_today</mat-icon>
        </mat-datepicker-toggle>
        <mat-datepicker #firmaPicker></mat-datepicker>
        <mat-error *ngIf="f['fecha_firmado'].hasError('required')">
          La fecha de firma es requerida
        </mat-error>
      </mat-form-field>

      <!-- Fecha de Vencimiento -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Fecha de Vencimiento</mat-label>
        <input matInput [matDatepicker]="vencimientoPicker" formControlName="fecha_vencido" required>
        <mat-datepicker-toggle matSuffix [for]="vencimientoPicker">
          <mat-icon matDatepickerToggleIcon>calendar_today</mat-icon>
        </mat-datepicker-toggle>
        <mat-datepicker #vencimientoPicker></mat-datepicker>
        <mat-error *ngIf="f['fecha_vencido'].hasError('required')">
          La fecha de vencimiento es requerida
        </mat-error>
      </mat-form-field>

      <!-- Valor en CUP -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Valor (CUP)</mat-label>
        <input matInput type="number" step="0.01" min="0" formControlName="valor_cup" required>
        <span matSuffix>CUP</span>
        <mat-error *ngIf="f['valor_cup'].hasError('required')">
          El valor en CUP es requerido
        </mat-error>
        <mat-error *ngIf="f['valor_cup'].hasError('min')">
          El valor debe ser mayor o igual a 0
        </mat-error>
      </mat-form-field>

      <!-- Monto de Vencimiento en CUP -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Monto de Vencimiento (CUP)</mat-label>
        <input matInput type="number" step="0.01" min="0" formControlName="monto_vencimiento_cup">
        <span matSuffix>CUP</span>
      </mat-form-field>

      <!-- Valor en USD -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Valor (USD)</mat-label>
        <input matInput type="number" step="0.01" min="0" formControlName="valor_usd">
        <span matSuffix>USD</span>
      </mat-form-field>

      <!-- Monto de Vencimiento en USD -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Monto de Vencimiento (USD)</mat-label>
        <input matInput type="number" step="0.01" min="0" formControlName="monto_vencimiento_usd">
        <span matSuffix>USD</span>
      </mat-form-field>

      <!-- Monto de Vencimiento en CL -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Monto de Vencimiento (CL)</mat-label>
        <input matInput type="number" step="0.01" min="0" formControlName="monto_vencimiento_cl">
        <span matSuffix>CL</span>
      </mat-form-field>
    </div>

    <!-- Observaciones -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Observaciones</mat-label>
      <textarea matInput formControlName="observaciones" rows="3"></textarea>
    </mat-form-field>

    <!-- Acciones -->
    <div class="flex justify-end gap-2 mt-6">
      <button type="button" mat-stroked-button (click)="onCancel()">
        Cancelar
      </button>
      <button type="submit" mat-flat-button color="primary" [disabled]="suplementoForm.invalid">
        {{ isEditMode ? 'Actualizar' : 'Guardar' }}
      </button>
    </div>
  </form>
</div>
